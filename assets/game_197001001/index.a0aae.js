window.__require=function e(t,a,n){function r(s,i){if(!a[s]){if(!t[s]){var d=s.split("/");if(d=d[d.length-1],!t[d]){var l="function"==typeof __require&&__require;if(!i&&l)return l(d,!0);if(o)return o(d,!0);throw new Error("Cannot find module '"+s+"'")}s=d}var c=a[s]={exports:{}};t[s][0].call(c.exports,function(e){return r(t[s][1][e]||e)},c,c.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({AILogic:[function(e,t){"use strict";cc._RF.push(t,"a2e92RodOpKNpw2oUvfa3e/","AILogic");var a=function(e){this.player=e,this.cards=e.cardList.slice(0).sort(function(e,t){return t.val-e.val}),this.analyse()},n=function(e,t){return{val:e,cardList:t}};a.prototype.follow=function(e,t,a){var n=this;return n.log(),function(){switch(e.cardKind){case G.gameRule.ONE:if(!(_=n.matchCards(n._one,G.gameRule.ONE,e,t,a))){if(t||n.player.isLandlord)for(var r=0;r<n.cards.length;r++)if(n.cards[r].val<=15&&n.cards[r].val>e.val)return{cardList:n.cards.slice(r,r+1),cardKind:G.gameRule.ONE,size:1,val:n.cards[r].val};if(n.times<=1&&n._pairs.length>0&&n._pairs[0].val>10){var o=n.cards.slice(0,1);return o[0].val>e.val?{cardList:o,cardKind:G.gameRule.ONE,size:1,val:o[0].val}:null}}return _;case G.gameRule.PAIRS:if(null==(l=n._pairs.length>0?n.matchCards(n._pairs,G.gameRule.PAIRS,e,t,a):null)&&(t||n.player.isLandlord))if(n._progressionPairs.length>0){for(r=n._progressionPairs.length-1;r>=0;r--)if(!(e.val>=n._progressionPairs[r].val))for(var s=n._progressionPairs[r].cardList.length-1;s>=0;s-=2)if(n._progressionPairs[r].cardList[s].val>e.val){var i=n._progressionPairs[r].cardList.splice(s-1,2);return{cardList:i,cardKind:G.gameRule.PAIRS,size:2,val:i[0].val}}}else if(n._three.length>0)for(r=n._three.length-1;r>=0;r--)if(n._three[r].val>e.val)return{cardList:n._three[r].cardList.slice(0,2),cardKind:G.gameRule.PAIRS,size:2,val:n._three[r].val};return l;case G.gameRule.THREE:return t||n.player.isLandlord?n.matchCards(n._three,G.gameRule.THREE,e,t,a):null;case G.gameRule.THREE_WITH_ONE:if(!t&&!n.player.isLandlord)return null;if(d=n.minCards(n._three,G.gameRule.THREE,e.val)){if(!(_=n.minOne(2,d.val)))return null;d.cardList.push(_),d.cardKind=G.gameRule.THREE_WITH_ONE,d.size=4}return d;case G.gameRule.THREE_WITH_PAIRS:if(!t&&!n.player.isLandlord)return null;var d;if(d=n.minCards(n._three,G.gameRule.THREE,e.val)){for(var l=n.minCards(n._pairs,G.gameRule.PAIRS);l.cardList[0].val===d.val;)l=n.minCards(n._pairs,G.gameRule.PAIRS,l.cardList[0].val);if(!l)return null;d.cardList=d.cardList.concat(l.cardList),d.cardKind=G.gameRule.THREE_WITH_PAIRS,d.size=5}return d;case G.gameRule.PROGRESSION:if(!t&&!n.player.isLandlord)return null;if(n._progression.length>0)for(r=n._progression.length-1;r>=0;r--)if(e.val<n._progression[r].val&&e.size<=n._progression[r].cardList.length){if(e.size===n._progression[r].cardList.length)return n.setCardKind(n._progression[r],G.gameRule.PROGRESSION);if(n.player.isLandlord||t){var c=n._progression[r].val-e.val,u=n._progression[r].cardList.length-e.size;for(s=0;s<u;s++)c>1?(n._progression[r].cardList.shift(),n._progression[r].val--,c--):n._progression[r].cardList.pop();return n.setCardKind(n._progression[r],G.gameRule.PROGRESSION)}return null}return null;case G.gameRule.PROGRESSION_PAIRS:if(!t&&!n.player.isLandlord)return null;if(n._progressionPairs.length>0)for(r=n._progressionPairs.length-1;r>=0;r--)if(e.val<n._progressionPairs[r].val&&e.size<=n._progressionPairs[r].cardList.length){if(e.size===n._progressionPairs[r].cardList.length)return n.setCardKind(n._progressionPairs[r],G.gameRule.PROGRESSION_PAIRS);if(n.player.isLandlord||t){for(c=n._progressionPairs[r].val-e.val,u=(n._progressionPairs[r].cardList.length-e.size)/2,s=0;s<u;s++)c>1?(n._progressionPairs[r].cardList.shift(),n._progressionPairs[r].cardList.shift(),c--):(n._progressionPairs[r].cardList.pop(),n._progressionPairs[r].cardList.pop());return n.setCardKind(n._progressionPairs[r],G.gameRule.PROGRESSION_PAIRS)}return null}return null;case G.gameRule.PLANE:return t||n.player.isLandlord?n.minPlane(e.size,e):null;case G.gameRule.PLANE_WITH_ONE:if(!t&&!n.player.isLandlord)return null;var h=e.size/4;if(f=n.minPlane(3*h,e)){var p=2;for(r=0;r<h;r++){var _;if(!(_=n.minOne(p,f.val)))return null;f.cardList.push(_),p=_.val}f.cardKind=G.gameRule.PLANE_WITH_ONE,f.size=f.cardList.length}return f;case G.gameRule.PLANE_WITH_PAIRS:if(!t&&!n.player.isLandlord)return null;var f;if(h=e.size/5,f=n.minPlane(3*h,e)){var g=2;for(r=0;r<h;r++){if(!(l=n.minCards(n._pairs,G.gameRule.PAIRS,g)))return null;f.cardList=f.cardList.concat(l.cardList),g=l.val}f.cardKind=G.gameRule.PLANE_WITH_PAIRS,f.size=f.cardList.length}return f;case G.gameRule.BOMB:return t||n.player.isLandlord?n.minCards(n._bomb,G.gameRule.BOMB,e.val)||(n._kingBomb.length>0&&(t&&a<6||n.player.isLandlord&&n.player.cardList.length<6)?n.setCardKind(n._kingBomb[0],G.gameRule.KING_BOMB):null):null;case G.gameRule.FOUR_WITH_TWO:case G.gameRule.FOUR_WITH_TWO_PAIRS:return n.minCards(n._bomb,G.gameRule.BOMB,e.val);case G.gameRule.KING_BOMB:default:return null}}()||(e.cardKind!=G.gameRule.BOMB&&e.cardKind!=G.gameRule.KING_BOMB&&(n._bomb.length>0||n._kingBomb.length>0)?t&&a<5||n.player.isLandlord&&(n.player.cardList.length<5||n.player.nextPlayer.cardList.length<5||n.player.nextPlayer.nextPlayer.cardList.length<6)||n.times()<=2?n._bomb.length>0?n.minCards(n._bomb,G.gameRule.BOMB):n.setCardKind(n._kingBomb[0],G.gameRule.KING_BOMB):void 0:null)},a.prototype.play=function(e){var t=this;t.log();for(var a=function(e){for(var a=t.cards[e],n=0;n<t._one.length;n++)if(t._one[n].val===a.val)return t.minCards(t._one,G.gameRule.ONE);for(var r=0;r<t._pairs.length;r++)if(t._pairs[r].val===a.val)return t.minCards(t._pairs,G.gameRule.PAIRS);for(var o=0;o<t._three.length;o++)if(t._three[o].val===a.val)return t.minCards(t._three,G.gameRule.THREE);for(var s=0;s<t._bomb.length;s++)if(t._bomb[s].val===a.val)return t.minCards(t._bomb,G.gameRule.BOMB);for(var i=0;i<t._plane.length;i++)for(var d=0;d<t._plane[i].cardList.length;d++)if(t._plane[i].cardList[d].val===a.val&&t._plane[i].cardList[d].shape===a.shape)return t.minCards(t._plane,G.gameRule.PLANE);for(var l=0;l<t._progression.length;l++)for(d=0;d<t._progression[l].cardList.length;d++)if(t._progression[l].cardList[d].val===a.val&&t._progression[l].cardList[d].shape===a.shape)return t.minCards(t._progression,G.gameRule.PROGRESSION);for(var c=0;c<t._progressionPairs.length;c++)for(d=0;d<t._progressionPairs[c].cardList.length;d++)if(t._progressionPairs[c].cardList[d].val===a.val&&t._progressionPairs[c].cardList[d].shape===a.shape)return t.minCards(t._progressionPairs,G.gameRule.PROGRESSION_PAIRS);if(t._kingBomb.length>0)return t.minCards(t._kingBomb,G.gameRule.KING_BOMB)},n=t.cards.length-1;n>=0;n--){var r=a(n);if(r.cardKind!==G.gameRule.ONE){if(r.cardKind===G.gameRule.THREE){if(d=(u=t.minCards(t._three,G.gameRule.THREE)).cardList.length/3,t._one.length>0)return c=t.minOne(l,u.val),u.cardList.push(c),t.setCardKind(u,G.gameRule.THREE_WITH_ONE);if(t._pairs.length>0){var o=t.minCards(t._pairs,G.gameRule.PAIRS,s);return u.cardList=u.cardList.concat(o.cardList),t.setCardKind(u,G.gameRule.THREE_WITH_PAIRS)}return t.setCardKind(u,G.gameRule.THREE)}if(r.cardKind===G.gameRule.PLANE){if(d=(i=t.minCards(t._plane,G.gameRule.PLANE)).cardList.length/3,t._one.length>d&&t._pairs.length>d){if(t._one.length>=t._pairs.length){for(l=2,n=0;n<d;n++)c=t.minOne(l,i.val),i.cardList.push(c),l=c.val;return t.setCardKind(i,G.gameRule.PLANE_WITH_ONE)}var s=2;for(n=0;n<d;n++)o=t.minCards(t._pairs,G.gameRule.PAIRS,s),i.cardList=i.cardList.concat(o.cardList),s=o.val;return t.setCardKind(i,G.gameRule.PLANE_WITH_PAIRS)}if(t._pairs.length>d){for(s=2,n=0;n<d;n++)o=t.minCards(t._pairs,G.gameRule.PAIRS,s),i.cardList=i.cardList.concat(o.cardList),s=o.val;return t.setCardKind(i,G.gameRule.PLANE_WITH_PAIRS)}if(t._one.length>d){for(l=2,n=0;n<d;n++)c=t.minOne(l,i.val),i.cardList.push(c),l=c.val;return t.setCardKind(i,G.gameRule.PLANE_WITH_ONE)}return t.setCardKind(i,G.gameRule.PLANE)}if(r.cardKind===G.gameRule.BOMB&&1===t.times())return r;if(r.cardKind===G.gameRule.BOMB&&1!=t.times())continue;return r}if(t._plane.length>0){var i,d=(i=t.minCards(t._plane,G.gameRule.PLANE)).cardList.length/3,l=2;for(n=0;n<d;n++){var c=t.minOne(l,i.val);i.cardList.push(c),l=c.val}return t.setCardKind(i,G.gameRule.PLANE_WITH_ONE)}if(t._three.length>0){var u;d=(u=t.minCards(t._three,G.gameRule.THREE)).cardList.length/3,c=t.minOne(l,u.val);if(u.cardList.push(c),u.val<14)return t.setCardKind(u,G.gameRule.THREE_WITH_ONE)}if(!t.player.isLandlord)return e<=2?t.playOneAtTheEnd(e):t.minCards(t._one,G.gameRule.ONE);if(t.player.isLandlord)return t.player.nextPlayer.cardList.length<=2||t.player.nextPlayer.nextPlayer.cardList.length<=2?t.playOneAtTheEnd(e):t.minCards(t._one,G.gameRule.ONE)}},a.prototype.playOneAtTheEnd=function(e){if(this._progression.length>0)return this.minCards(this._progression,G.gameRule.PROGRESSION);if(this._plane.length>0){var t=this.minCards(this._plane,G.gameRule.PLANE),a=t.cardList.length/3;if(this._one.length>a&&this._pairs.length>a){if(this._one.length>=this._pairs.length){for(var n=2,r=0;r<a;r++){var o=this.minOne(n,t.val);t.cardList.push(o),n=o.val}return this.setCardKind(t,G.gameRule.PLANE_WITH_ONE)}var s=2;for(r=0;r<a;r++){var i=this.minCards(this._pairs,G.gameRule.PAIRS,s);t.cardList=t.cardList.concat(i.cardList),s=i.val}return this.setCardKind(t,G.gameRule.PLANE_WITH_PAIRS)}if(this._pairs.length>a){for(s=2,r=0;r<a;r++)i=this.minCards(this._pairs,G.gameRule.PAIRS,s),t.cardList=t.cardList.concat(i.cardList),s=i.val;return this.setCardKind(t,G.gameRule.PLANE_WITH_PAIRS)}if(this._one.length>a){for(n=2,r=0;r<a;r++)o=this.minOne(n,t.val),t.cardList.push(o),n=o.val;return this.setCardKind(t,G.gameRule.PLANE_WITH_ONE)}return this.setCardKind(t,G.gameRule.PLANE)}if(this._progressionPairs.length>0)return this.minCards(this._progressionPairs,G.gameRule.PROGRESSION_PAIRS);if(this._three.length>0){var d=this.minCards(this._three,G.gameRule.THREE);return a=d.cardList.length/3,this._one.length>=0?(o=this.minOne(n,d.val),d.cardList.push(o),this.setCardKind(d,G.gameRule.THREE_WITH_ONE)):this._pairs.length>0?(i=this.minCards(this._pairs,G.gameRule.PAIRS,s),d.cardList=d.cardList.concat(i.cardList),this.setCardKind(d,G.gameRule.THREE_WITH_PAIRS)):this.setCardKind(d,G.gameRule.THREE)}return this._pairs.length>0?this.player.isLandlord&&(2===this.player.nextPlayer.cardList.length||2===this.player.nextPlayer.nextPlayer.cardList.length)||!this.player.isLandlord&&2===e?this.maxCards(this._pairs,G.gameRule.PAIRS):this.minCards(this._pairs,G.gameRule.PAIRS):this._one.length>0?this.player.isLandlord&&(this.player.nextPlayer.cardList.length<=2||this.player.nextPlayer.nextPlayer.cardList.length<=2)||!this.player.isLandlord&&e<=2?this.maxCards(this._one,G.gameRule.ONE):this.minCards(this._one,G.gameRule.ONE):(o=null,o=this.player.isLandlord&&(this.player.nextPlayer.cardList.length<=2||this.player.nextPlayer.nextPlayer.cardList.length<=2)||!this.player.isLandlord&&e<=2?this.cards.slice(-1):this.cards.slice(0,1),{size:1,cardKind:G.gameRule.ONE,cardList:o,val:o[0].val})},a.prototype.prompt=function(e){var t=this,a=G.gameRule.valCount(t.cards);if(e){var n=[],r=function(e,a,n){for(var r=[],o=n.length-1;o>=0;o--)(n[o].count<e||n[o].val<=a)&&n.splice(o,1);n.sort(t.promptSort);for(var s=0;s<n.length;s++){for(var i=n[s].val,d=[],l=t.cards,c=l.length-1;c>=0;c--)if(l[c].val===i){if(!(d.length<e))break;d.push(l[c])}d.length&&r.push(d)}return r},o=function(a){var n=[];if(e.val<14&&t.cards.length>=e.size)for(var r=e.val+1;r<15;r++)for(var o=[],s=0;s<t.cards.length&&!(t.cards[s].val<r&&0===o.length);s++)if(!(t.cards[s].val>r||o.length>0&&t.cards[s].val===o[o.length-1].val))if(t.cards[s].val===r&&t.cards[s+1]&&t.cards[s+1].val===r&&t.cards[s+2]&&t.cards[s+2].val===r&&0===o.length)o=o.concat(t.cards.slice(s,s+3)),s+=2;else{if(!(o.length>0&&o[o.length-1].val-1===t.cards[s].val&&t.cards[s+1]&&o[o.length-1].val-1===t.cards[s+1].val&&t.cards[s+2]&&o[o.length-1].val-1===t.cards[s+2].val))break;if(o=o.concat(t.cards.slice(s,s+3)),s+=2,o.length===3*a){n.push(o);break}}return n};switch(e.cardKind){case G.gameRule.ONE:n=r(1,e.val,a);break;case G.gameRule.PAIRS:n=r(2,e.val,a);break;case G.gameRule.THREE:n=r(3,e.val,a);break;case G.gameRule.THREE_WITH_ONE:for(var s=r(3,e.val,a.slice(0)),i=r(1,2,a.slice(0)),d=0;d<s.length;d++)for(var l=0;l<i.length;l++)i[l][0].val!=s[d][0].val&&n.push(s[d].concat(i[l]));break;case G.gameRule.THREE_WITH_PAIRS:s=r(3,e.val,a.slice(0));var c=r(2,2,a.slice(0));for(d=0;d<s.length;d++)for(l=0;l<c.length;l++)c[l][0].val!=s[d][0].val&&n.push(s[d].concat(c[l]));break;case G.gameRule.PROGRESSION:if(e.val<14&&t.cards.length>=e.size)for(d=e.val+1;d<15;d++){var u=[];for(l=0;l<t.cards.length&&!(t.cards[l].val<d&&0===u.length);l++)if(!(t.cards[l].val>d||u.length>0&&t.cards[l].val===u[u.length-1].val))if(t.cards[l].val!==d||0!==u.length){if(u[u.length-1].val-1!==t.cards[l].val)break;if(u.push(t.cards.slice(l,l+1)[0]),u.length===e.size){n.push(u);break}}else u.push(t.cards.slice(l,l+1)[0])}break;case G.gameRule.PROGRESSION_PAIRS:if(e.val<14&&t.cards.length>=e.size)for(d=e.val+1;d<15;d++)for(u=[],l=0;l<t.cards.length&&!(t.cards[l].val<d&&0===u.length);l++)if(!(t.cards[l].val>d||u.length>0&&t.cards[l].val===u[u.length-1].val))if(t.cards[l].val===d&&t.cards[l+1]&&t.cards[l+1].val===d&&0===u.length)u=u.concat(t.cards.slice(l,l+2)),l++;else{if(!(u.length>0&&u[u.length-1].val-1===t.cards[l].val&&t.cards[l+1]&&u[u.length-1].val-1===t.cards[l+1].val))break;if(u=u.concat(t.cards.slice(l,l+2)),l++,u.length===e.size){n.push(u);break}}break;case G.gameRule.PLANE:n=o(e.size/3);break;case G.gameRule.PLANE_WITH_ONE:n=o(e.size/4);break;case G.gameRule.PLANE_WITH_PAIRS:n=o(e.size/5);break;case G.gameRule.FOUR_WITH_TWO:case G.gameRule.FOUR_WITH_TWO_PAIRS:case G.gameRule.BOMB:n=r(4,e.val,a)}if(e.cardKind!=G.gameRule.KING_BOMB&&e.cardKind!=G.gameRule.BOMB&&t._bomb.length>0)for(d=t._bomb.length-1;d>=0;d--)n.push(t._bomb[d].cardList);return e.cardKind!=G.gameRule.KING_BOMB&&t._kingBomb.length>0&&n.push(t._kingBomb[0].cardList),n}return[].concat(t._one,t._pairs,t._progressionPairs,t._progression,t._plane,t._three,t._bomb,t._kingBomb).map(function(e){return e.cardList&&e.cardList}).filter(function(e){return e})},a.prototype.getMinVal=function(e,t){for(var a=G.gameRule.valCount(this.cards),n=a.length-1;n>=0;n--)if(a[n].count===e&&a[n].val>t)return this.cards.splice(n,1)},a.prototype.analyse=function(){var e=this.cards.slice(0),t=null,a=null,r=null;this._one=[],this._pairs=[],this._kingBomb=[],this._bomb=[],this._three=[],this._plane=[],this._progression=[],this._progressionPairs=[],e.sort(G.gameRule.cardSort),G.gameRule.isKingBomb(e.slice(0,2))&&this._kingBomb.push(n(17,e.splice(0,2))),t=G.gameRule.valCount(e);for(var o=0;o<t.length;o++)if(4===t[o].count){var s=[];this.moveItem(e,s,t[o].val),this._bomb.push(n(s[0].val,s))}a=e.slice(0).slice(0),this.judgeThree(a),this.judgePlane();for(var i=0;i<this._three.length;i++)a=a.concat(this._three[i].cardList);this._three=[],a.sort(G.gameRule.cardSort),r=a.slice(0),this.judgeProgression(r),this.judgeProgressionPairs(r),this.judgeThree(r),t=G.gameRule.valCount(r);for(var d=0;d<t.length;d++)if(1===t[d].count)for(var l=0;l<r.length;l++)r[l].val===t[d].val&&this._one.push(n(t[d].val,r.splice(l,1)));else if(2===t[d].count)for(l=0;l<r.length;l++)r[l].val===t[d].val&&this._pairs.push(n(t[d].val,r.splice(l,2)));this._one.sort(function(e,t){return t.val-e.val}),this._pairs.sort(function(e,t){return t.val-e.val}),this._kingBomb.sort(function(e,t){return t.val-e.val}),this._bomb.sort(function(e,t){return t.val-e.val}),this._three.sort(function(e,t){return t.val-e.val}),this._plane.sort(function(e,t){return t.val-e.val}),this._progression.sort(function(e,t){return t.val-e.val}),this._progressionPairs.sort(function(e,t){return t.val-e.val})},a.prototype.judgeThree=function(e){for(var t=G.gameRule.valCount(e),a=0;a<t.length;a++)if(3===t[a].count){var r=[];this.moveItem(e,r,t[a].val),this._three.push(n(r[0].val,r))}},a.prototype.judgePlane=function(){if(this._three.length>1){for(var e=[],t=0;t<this._three.length;t++)if(!(this._three[t].val>=15))if(0!=e.length)if(e[e.length-1].val-1==this._three[t].val)e.push({obj:this._three[t],fromIndex:t});else{if(e.length>1){for(var a=[],r=0;r<e.length;r++)a=a.concat(e[r].obj.cardList);this._plane.push(n(e[0].obj.val,a));for(var o=e.length-1;o>=0;o--)this._three.splice(e[o].fromIndex,1)}(e=[]).push({obj:this._three[t],fromIndex:t})}else e.push({obj:this._three[t],fromIndex:t});if(e.length>1){for(a=[],r=0;r<e.length;r++)a=a.concat(e[r].obj.cardList);for(this._plane.push(n(e[0].obj.val,a)),o=e.length-1;o>=0;o--)this._three.splice(e[o].fromIndex,1)}}},a.prototype.judgeProgression=function(e){var t=this;if(e.length>=5){for(var a=[],r=0;r<e.length;r++)if(!(e[r].val>=15))if(0!=a.length)if(a[a.length-1].obj.val-1===e[r].val){if(a.push({obj:e[r],fromIndex:r}),5===a.length)break}else{if(a[a.length-1].obj.val===e[r].val)continue;if(a.length>=5)break;(a=[]).push({obj:e[r],fromIndex:r})}else a.push({obj:e[r],fromIndex:r});5===a.length?(function(a){for(var r=[],o=0;o<a.length;o++)r.push(a[o].obj);t._progression.push(n(a[0].obj.val,r));for(var s=a.length-1;s>=0;s--)e.splice(a[s].fromIndex,1)}(a),t.judgeProgression(e)):t.joinProgression(e)}},a.prototype.joinProgression=function(e){for(var t=0;t<this._progression.length;t++)for(var a=0;a<e.length;a++)14!=this._progression[t].val&&this._progression[t].val===e[a].val-1?this._progression[t].cardList.unshift(e.splice(a,1)[0]):e[a].val===this._progression[t].val-this._progression[t].cardList.length&&this._progression[t].cardList.push(e.splice(a,1)[0]);for(var n=this._progression.slice(0),r=0;r<n.length;r++)r<n.length-1&&n[r].val-n[r].cardList.length===n[r+1].val&&(this._progression[r].cardList=this._progression[r].cardList.concat(this._progression[r+1].cardList),this._progression.splice(++r,1))},a.prototype.judgeProgressionPairs=function(e){var t=this;if(e.length>=6){for(var a=[],r=G.gameRule.valCount(e),o=0;o<r.length;o++)if(!(r[o].val>=15))if(0==a.length&&r[o].count>=2)a.push(r[o].val);else if(a[a.length-1]-1===r[o].val&&r[o].count>=2)a.push(r[o].val);else{if(a.length>=3)break;a=[],r[o].count>=2&&a.push(r[o].val)}a.length>=3&&(function(a){for(var r=[],o=a.length-1;o>=0;o--)for(var s=0;s<e.length;s++)if(e[s].val===a[o]){r=r.concat(e.splice(s,2));break}r.sort(G.gameRule.cardSort),t._progressionPairs.push(n(a[0],r))}(a),t.judgeProgressionPairs(e))}},a.prototype.moveItem=function(e,t,a){for(var n=e.length-1;n>=0;n--)e[n].val===a&&t.push(e.splice(n,1)[0])},a.prototype.setCardKind=function(e,t){return e.cardKind=t,e.size=e.cardList.length,e},a.prototype.minPlane=function(e,t){if(this._plane.length>0)for(var a=this._plane.length-1;a>=0;a--)if(t.val<this._plane[a].val&&e<=this._plane[a].cardList.length){if(e===this._plane[a].cardList.length)return this.setCardKind(this._plane[a],G.gameRule.PLANE);for(var n=this._plane[a].val-t.val,r=(this._plane[a].cardList.length-e)/3,o=0;o<r;o++)if(n>1){for(var s=0;s<3;s++)this._plane[a].cardList.shift();n--}else for(s=0;s<3;s++)this._plane[a].cardList.pop();return this.setCardKind(this._plane[a],G.gameRule.PLANE)}return null},a.prototype.minCards=function(e,t,a){if(a=a||2,e.length>0)for(var n=e.length-1;n>=0;n--)if(a<e[n].val)return this.setCardKind(e[n],t);return null},a.prototype.maxCards=function(e,t,a){var n=null;if(e.length>0){for(var r=0;r<e.length;r++)(n&&e[r].val>n.val||!n)&&(n=e[r]);return a?n.val>a?this.setCardKind(n,t):null:this.setCardKind(n,t)}return null},a.prototype.matchCards=function(e,t,a,n,r){if(this.player.isLandlord)return this.player.nextPlayer.cardList.length<3||this.player.nextPlayer.nextPlayer.cardList.length<3?this.maxCards(e,t,a.val):this.minCards(e,t,a.val);if(n)return r<3?this.maxCards(e,t,a.val):this.minCards(e,t,a.val);var o=null;return this.player.nextPlayer.isLandlord&&this.player.nextPlayer.cardList.length<3?this.maxCards(e,t,a.val):(o=this.minCards(e,t,a.val))&&(o.val<14||this.times()<=2)?o:null},a.prototype.minOne=function(e,t){var a=this.minCards(this._one,G.gameRule.ONE,e),n=this.offPairs(t);return a?a.val>14?n?(this.deleteOne(n),n):null:a.cardList[0]:n?(this.deleteOne(n),n):null},a.prototype.offPairs=function(e,t){var a=this.minCards(this._pairs,G.gameRule.PAIRS,e);if(a)for(;a.cardList[0].val===t;)a=this.minCards(this._pairs,G.gameRule.PAIRS,a.cardList[0].val);return a?a.cardList[0]:null},a.prototype.deleteOne=function(e){for(var t=0;t<this.cards.length;t++)this.cards[t].val===e.val&&this.cards[t].shape===e.shape&&this.cards.splice(t,1);this.analyse()},a.prototype.judgeScore=function(){var e=0;e+=6*this._bomb.length,this._kingBomb.length>0?e+=8:17===this.cards[0].val?e+=4:16===this.cards[0].val&&(e+=3);for(var t=0;t<this.cards.length;t++)15===this.cards[t].val&&(e+=2);return e>=7?3:e>=5?2:e>=3?1:4},a.prototype.promptSort=function(e,t){return e.count===t.count?e.val>t.val?1:-1:e.count<t.count?-1:1},a.prototype.times=function(){var e=this._kingBomb.length+this._bomb.length+this._progression.length+this._progressionPairs.length+this._one.length+this._pairs.length,t=this._three.length;if(this._plane.length>0)for(var a=0;a<this._plane.length;a++)t+=this._plane[a].cardList.length/3;return t-(this._one.length+this._pairs.length)>0&&(e+=t-(this._one.length+this._pairs.length)),e},a.prototype.log=function(){},t.exports=a,cc._RF.pop()},{}],AiLogic197001001:[function(e,t,a){"use strict";cc._RF.push(t,"54f85QjwXRJNJx1RaSGImE2","AiLogic197001001");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var o=arguments[t],s=0,i=o.length;s<i;s++,r++)n[r]=o[s];return n};Object.defineProperty(a,"__esModule",{value:!0});var r=e("./Cards/DdzCardUtils"),o=e("./GameRule197001001"),s=e("./Utils197001001"),i=function(e,t){return{val:e,cardList:t}},d=function(){function e(e,t){this.isBanker=!1,this.cards=[],this._one=[],this._pairs=[],this._kingBomb=[],this._bomb=[],this._three=[],this._plane=[],this._progression=[],this._progressionPairs=[],this.cards=r.default.sortCardsDown(e.slice(0)),this.isBanker=t,this.analyse()}return e.prototype.updateCards=function(e){this.cards=[],this.cards=r.default.sortCardsDown(e.slice(0)),this.analyse()},e.prototype.play=function(e){var t=this;t.log();for(var a=function(e){for(var a=t.cards[e],n=0;n<t._one.length;n++)if(t._one[n].val===a.val)return t.minCards(t._one,o.default.ONE);for(var r=0;r<t._pairs.length;r++)if(t._pairs[r].val===a.val)return t.minCards(t._pairs,o.default.PAIRS);for(var s=0;s<t._three.length;s++)if(t._three[s].val===a.val)return t.minCards(t._three,o.default.THREE);for(var i=0;i<t._bomb.length;i++)if(t._bomb[i].val===a.val)return t.minCards(t._bomb,o.default.BOMB);for(var d=0;d<t._plane.length;d++)for(var l=0;l<t._plane[d].cardList.length;l++)if(t._plane[d].cardList[l].val===a.val&&t._plane[d].cardList[l].suit===a.suit)return t.minCards(t._plane,o.default.PLANE);for(var c=0;c<t._progression.length;c++)for(l=0;l<t._progression[c].cardList.length;l++)if(t._progression[c].cardList[l].val===a.val&&t._progression[c].cardList[l].suit===a.suit)return t.minCards(t._progression,o.default.PROGRESSION);for(var u=0;u<t._progressionPairs.length;u++)for(l=0;l<t._progressionPairs[u].cardList.length;l++)if(t._progressionPairs[u].cardList[l].val===a.val&&t._progressionPairs[u].cardList[l].suit===a.suit)return t.minCards(t._progressionPairs,o.default.PROGRESSION_PAIRS);if(t._kingBomb.length>0)return t.minCards(t._kingBomb,o.default.KING_BOMB)},n=t.cards.length-1;n>=0;n--){var r=a(n);if(r.cardKind===o.default.ONE){if(t._plane.length>0){var s=(u=t.minCards(t._plane,o.default.PLANE)).cardList.length/3,i=2;for(n=0;n<s;n++){var d=t.minOne(i,u.val);u.cardList.push(d),i=d.val}return t.setCardKind(u,o.default.PLANE_WITH_ONE)}return t._three.length>0&&(s=(l=t.minCards(t._three,o.default.THREE)).cardList.length/3,d=t.minOne(i,l.val),l.cardList.push(d),l.val<14)?t.setCardKind(l,o.default.THREE_WITH_ONE):t.isBanker?t.minCards(t._one,o.default.ONE):e<=2?t.playOneAtTheEnd(e):t.minCards(t._one,o.default.ONE)}if(r.cardKind===o.default.THREE){var l;if(s=(l=t.minCards(t._three,o.default.THREE)).cardList.length/3,t._one.length>0)return d=t.minOne(i,l.val),l.cardList.push(d),t.setCardKind(l,o.default.THREE_WITH_ONE);if(t._pairs.length>0){var c=t.minCards(t._pairs,o.default.PAIRS,h);return l.cardList=l.cardList.concat(c.cardList),t.setCardKind(l,o.default.THREE_WITH_PAIRS)}return t.setCardKind(l,o.default.THREE)}if(r.cardKind===o.default.PLANE){var u;if(s=(u=t.minCards(t._plane,o.default.PLANE)).cardList.length/3,t._one.length>s&&t._pairs.length>s){if(t._one.length>=t._pairs.length){for(i=2,n=0;n<s;n++)d=t.minOne(i,u.val),u.cardList.push(d),i=d.val;return t.setCardKind(u,o.default.PLANE_WITH_ONE)}var h=2;for(n=0;n<s;n++)c=t.minCards(t._pairs,o.default.PAIRS,h),u.cardList=u.cardList.concat(c.cardList),h=c.val;return t.setCardKind(u,o.default.PLANE_WITH_PAIRS)}if(t._pairs.length>s){for(h=2,n=0;n<s;n++)c=t.minCards(t._pairs,o.default.PAIRS,h),u.cardList=u.cardList.concat(c.cardList),h=c.val;return t.setCardKind(u,o.default.PLANE_WITH_PAIRS)}if(t._one.length>s){for(i=2,n=0;n<s;n++)d=t.minOne(i,u.val),u.cardList.push(d),i=d.val;return t.setCardKind(u,o.default.PLANE_WITH_ONE)}return t.setCardKind(u,o.default.PLANE)}if(r.cardKind===o.default.BOMB&&1===t.times())return r;if(r.cardKind!==o.default.BOMB||1==t.times())return r}},e.prototype.playOneAtTheEnd=function(){if(this._progression.length>0)return this.minCards(this._progression,o.default.PROGRESSION);if(this._plane.length>0){var e=this.minCards(this._plane,o.default.PLANE),t=e.cardList.length/3;if(this._one.length>t&&this._pairs.length>t){if(this._one.length>=this._pairs.length){for(var a=2,n=0;n<t;n++){var r=this.minOne(a,e.val);e.cardList.push(r),a=r.val}return this.setCardKind(e,o.default.PLANE_WITH_ONE)}var s=2;for(n=0;n<t;n++){var i=this.minCards(this._pairs,o.default.PAIRS,s);e.cardList=e.cardList.concat(i.cardList),s=i.val}return this.setCardKind(e,o.default.PLANE_WITH_PAIRS)}if(this._pairs.length>t){for(s=2,n=0;n<t;n++)i=this.minCards(this._pairs,o.default.PAIRS,s),e.cardList=e.cardList.concat(i.cardList),s=i.val;return this.setCardKind(e,o.default.PLANE_WITH_PAIRS)}if(this._one.length>t){for(a=2,n=0;n<t;n++)r=this.minOne(a,e.val),e.cardList.push(r),a=r.val;return this.setCardKind(e,o.default.PLANE_WITH_ONE)}return this.setCardKind(e,o.default.PLANE)}if(this._progressionPairs.length>0)return this.minCards(this._progressionPairs,o.default.PROGRESSION_PAIRS);if(this._three.length>0){var d=this.minCards(this._three,o.default.THREE);return t=d.cardList.length/3,this._one.length>=0?(r=this.minOne(a,d.val),d.cardList.push(r),this.setCardKind(d,o.default.THREE_WITH_ONE)):this._pairs.length>0?(i=this.minCards(this._pairs,o.default.PAIRS,s),d.cardList=d.cardList.concat(i.cardList),this.setCardKind(d,o.default.THREE_WITH_PAIRS)):this.setCardKind(d,o.default.THREE)}return this._pairs.length>0?this.isBanker?this.maxCards(this._pairs,o.default.PAIRS):this.minCards(this._pairs,o.default.PAIRS):this._one.length>0?this.isBanker?this.maxCards(this._one,o.default.ONE):this.minCards(this._one,o.default.ONE):(r=null,r=this.isBanker?this.cards.slice(-1):this.cards.slice(0,1),{size:1,cardKind:o.default.ONE,cardList:r,val:r[0].val})},e.prototype.prompt=function(e){var t=this,a=o.default.valCount(t.cards);if(e){var r=[],i=function(e,a,n){for(var r=[],o=n.length-1;o>=0;o--)(n[o].count<e||n[o].val<=a)&&n.splice(o,1);n.sort(t.promptSort);for(var s=0;s<n.length;s++){for(var i=n[s].val,d=[],l=t.cards,c=l.length-1;c>=0;c--)if(l[c].val===i){if(!(d.length<e))break;d.push(l[c])}d.length&&r.push(d)}return r},d=function(a){var n=[];if(e.val<14&&t.cards.length>=e.size)for(var r=e.val+1;r<15;r++)for(var o=[],s=0;s<t.cards.length&&!(t.cards[s].val<r&&0===o.length);s++)if(!(t.cards[s].val>r||o.length>0&&t.cards[s].val===o[o.length-1].val))if(t.cards[s].val===r&&t.cards[s+1]&&t.cards[s+1].val===r&&t.cards[s+2]&&t.cards[s+2].val===r&&0===o.length)o=o.concat(t.cards.slice(s,s+3)),s+=2;else{if(!(o.length>0&&o[o.length-1].val-1===t.cards[s].val&&t.cards[s+1]&&o[o.length-1].val-1===t.cards[s+1].val&&t.cards[s+2]&&o[o.length-1].val-1===t.cards[s+2].val))break;if(o=o.concat(t.cards.slice(s,s+3)),s+=2,o.length===3*a){n.push(o);break}}return n};switch(e.cardKind){case o.default.ONE:(r=i(1,e.val,a)).length>0&&r.sort(function(e,t){return e[0].point-t[0].point});break;case o.default.PAIRS:(r=i(2,e.val,a)).length>0&&r.sort(function(e,t){return e[0].point-t[0].point});break;case o.default.THREE:(r=i(3,e.val,a)).length>0&&r.sort(function(e,t){return e[0].point-t[0].point});break;case o.default.THREE_WITH_ONE:for(var l=i(3,e.val,a.slice(0)),c=i(1,2,a.slice(0)),u=0;u<l.length;u++)for(var h=0;h<c.length;h++)c[h][0].val!=l[u][0].val&&r.push(l[u].concat(c[h]));break;case o.default.THREE_WITH_PAIRS:l=i(3,e.val,a.slice(0));var p=i(2,2,a.slice(0));for(u=0;u<l.length;u++)for(h=0;h<p.length;h++)p[h][0].val!=l[u][0].val&&r.push(l[u].concat(p[h]));break;case o.default.PROGRESSION:if(e.val<14&&t.cards.length>=e.size)for(u=e.val+1;u<15;u++){var _=[];for(h=0;h<t.cards.length&&!(t.cards[h].val<u&&0===_.length);h++)if(!(t.cards[h].val>u||_.length>0&&t.cards[h].val===_[_.length-1].val))if(t.cards[h].val!==u||0!==_.length){if(_[_.length-1].val-1!==t.cards[h].val)break;if(_.push(t.cards.slice(h,h+1)[0]),_.length===e.size){r.push(_);break}}else _.push(t.cards.slice(h,h+1)[0])}break;case o.default.PROGRESSION_PAIRS:if(e.val<14&&t.cards.length>=e.size)for(u=e.val+1;u<15;u++)for(_=[],h=0;h<t.cards.length&&!(t.cards[h].val<u&&0===_.length);h++)if(!(t.cards[h].val>u||_.length>0&&t.cards[h].val===_[_.length-1].val))if(t.cards[h].val===u&&t.cards[h+1]&&t.cards[h+1].val===u&&0===_.length)_=_.concat(t.cards.slice(h,h+2)),h++;else{if(!(_.length>0&&_[_.length-1].val-1===t.cards[h].val&&t.cards[h+1]&&_[_.length-1].val-1===t.cards[h+1].val))break;if(_=_.concat(t.cards.slice(h,h+2)),h++,_.length===e.size){r.push(_);break}}break;case o.default.PLANE:r=d(e.size/3);break;case o.default.PLANE_WITH_ONE:r=d(e.size/4);break;case o.default.PLANE_WITH_PAIRS:r=d(e.size/5);break;case o.default.FOUR_WITH_TWO:case o.default.FOUR_WITH_TWO_PAIRS:case o.default.BOMB:r=i(4,e.val,a)}if(e.cardKind!=o.default.KING_BOMB&&e.cardKind!=o.default.BOMB&&t._bomb.length>0)for(u=t._bomb.length-1;u>=0;u--)r.push(t._bomb[u].cardList);return e.cardKind!=o.default.KING_BOMB&&t._kingBomb.length>0&&r.push(t._kingBomb[0].cardList),r}var f=s.default.clone(t._one).reverse(),g=s.default.clone(t._pairs).reverse(),v=s.default.clone(t._three).reverse();return n(f,g,t._progressionPairs,t._progression,t._plane,v,t._bomb,t._kingBomb).map(function(e){return e.cardList&&e.cardList}).filter(function(e){return e})},e.prototype.getMinVal=function(e,t){for(var a=o.default.valCount(this.cards),n=a.length-1;n>=0;n--)if(a[n].count===e&&a[n].val>t)return this.cards.splice(n,1)},e.prototype.analyse=function(){var e=this.cards.slice(0),t=null,a=null,n=null;this._one=[],this._pairs=[],this._kingBomb=[],this._bomb=[],this._three=[],this._plane=[],this._progression=[],this._progressionPairs=[],e=r.default.sortCardsDown(e),o.default.isKingBomb(e.slice(0,2))&&this._kingBomb.push(i(17,e.splice(0,2))),t=o.default.valCount(e);for(var s=0;s<t.length;s++)if(4===t[s].count){var d=[];this.moveItem(e,d,t[s].val),this._bomb.push(i(d[0].val,d))}a=e.slice(0).slice(0),this.judgeThree(a),this.judgePlane();for(var l=0;l<this._three.length;l++)a=a.concat(this._three[l].cardList);this._three=[],n=(a=r.default.sortCardsDown(a)).slice(0),this.judgeProgression(n),this.judgeProgressionPairs(n),this.judgeThree(n),t=o.default.valCount(n);for(var c=0;c<t.length;c++)if(1===t[c].count)for(var u=0;u<n.length;u++)n[u].val===t[c].val&&this._one.push(i(t[c].val,n.splice(u,1)));else if(2===t[c].count)for(u=0;u<n.length;u++)n[u].val===t[c].val&&this._pairs.push(i(t[c].val,n.splice(u,2)));this._one.sort(function(e,t){return t.val-e.val}),this._pairs.sort(function(e,t){return t.val-e.val}),this._kingBomb.sort(function(e,t){return t.val-e.val}),this._bomb.sort(function(e,t){return t.val-e.val}),this._three.sort(function(e,t){return t.val-e.val}),this._plane.sort(function(e,t){return t.val-e.val}),this._progression.sort(function(e,t){return t.val-e.val}),this._progressionPairs.sort(function(e,t){return t.val-e.val})},e.prototype.judgeThree=function(e){for(var t=o.default.valCount(e),a=0;a<t.length;a++)if(3===t[a].count){var n=[];this.moveItem(e,n,t[a].val),this._three.push(i(n[0].val,n))}},e.prototype.judgePlane=function(){if(this._three.length>1){for(var e=[],t=0;t<this._three.length;t++)if(!(this._three[t].val>=15))if(0!=e.length)if(e[e.length-1].val-1==this._three[t].val)e.push({obj:this._three[t],fromIndex:t});else{if(e.length>1){for(var a=[],n=0;n<e.length;n++)a=a.concat(e[n].obj.cardList);this._plane.push(i(e[0].obj.val,a));for(var r=e.length-1;r>=0;r--)this._three.splice(e[r].fromIndex,1)}(e=[]).push({obj:this._three[t],fromIndex:t})}else e.push({obj:this._three[t],fromIndex:t});if(e.length>1){for(a=[],n=0;n<e.length;n++)a=a.concat(e[n].obj.cardList);for(this._plane.push(i(e[0].obj.val,a)),r=e.length-1;r>=0;r--)this._three.splice(e[r].fromIndex,1)}}},e.prototype.judgeProgression=function(e){var t=this;if(e.length>=5){for(var a=[],n=0;n<e.length;n++)if(!(e[n].val>=15))if(0!=a.length)if(a[a.length-1].obj.val-1===e[n].val){if(a.push({obj:e[n],fromIndex:n}),5===a.length)break}else{if(a[a.length-1].obj.val===e[n].val)continue;if(a.length>=5)break;(a=[]).push({obj:e[n],fromIndex:n})}else a.push({obj:e[n],fromIndex:n});5===a.length?(function(a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].obj);t._progression.push(i(a[0].obj.val,n));for(var o=a.length-1;o>=0;o--)e.splice(a[o].fromIndex,1)}(a),t.judgeProgression(e)):t.joinProgression(e)}},e.prototype.joinProgression=function(e){for(var t=0;t<this._progression.length;t++)for(var a=0;a<e.length;a++)14!=this._progression[t].val&&this._progression[t].val===e[a].val-1?this._progression[t].cardList.unshift(e.splice(a,1)[0]):e[a].val===this._progression[t].val-this._progression[t].cardList.length&&this._progression[t].cardList.push(e.splice(a,1)[0]);for(var n=this._progression.slice(0),r=0;r<n.length;r++)r<n.length-1&&n[r].val-n[r].cardList.length===n[r+1].val&&(this._progression[r].cardList=this._progression[r].cardList.concat(this._progression[r+1].cardList),this._progression.splice(++r,1))},e.prototype.judgeProgressionPairs=function(e){var t=this;if(e.length>=6){for(var a=[],n=o.default.valCount(e),s=0;s<n.length;s++)if(!(n[s].val>=15))if(0==a.length&&n[s].count>=2)a.push(n[s].val);else if(a[a.length-1]-1===n[s].val&&n[s].count>=2)a.push(n[s].val);else{if(a.length>=3)break;a=[],n[s].count>=2&&a.push(n[s].val)}a.length>=3&&(function(a){for(var n=[],o=a.length-1;o>=0;o--)for(var s=0;s<e.length;s++)if(e[s].val===a[o]){n=n.concat(e.splice(s,2));break}n=r.default.sortCardsDown(n),t._progressionPairs.push(i(a[0],n))}(a),t.judgeProgressionPairs(e))}},e.prototype.moveItem=function(e,t,a){for(var n=e.length-1;n>=0;n--)e[n].val===a&&t.push(e.splice(n,1)[0])},e.prototype.setCardKind=function(e,t){return e.cardKind=t,e.size=e.cardList.length,e},e.prototype.minPlane=function(e,t){if(this._plane.length>0)for(var a=this._plane.length-1;a>=0;a--)if(t.val<this._plane[a].val&&e<=this._plane[a].cardList.length){if(e===this._plane[a].cardList.length)return this.setCardKind(this._plane[a],o.default.PLANE);for(var n=this._plane[a].val-t.val,r=(this._plane[a].cardList.length-e)/3,s=0;s<r;s++)if(n>1){for(var i=0;i<3;i++)this._plane[a].cardList.shift();n--}else for(i=0;i<3;i++)this._plane[a].cardList.pop();return this.setCardKind(this._plane[a],o.default.PLANE)}return null},e.prototype.minCards=function(e,t,a){if(a=a||2,e.length>0)for(var n=e.length-1;n>=0;n--)if(a<e[n].val)return this.setCardKind(e[n],t);return null},e.prototype.maxCards=function(e,t,a){var n=null;if(e.length>0){for(var r=0;r<e.length;r++)(n&&e[r].val>n.val||!n)&&(n=e[r]);return a?n.val>a?this.setCardKind(n,t):null:this.setCardKind(n,t)}return null},e.prototype.matchCards=function(e,t,a,n,r){if(this.isBanker)return this.minCards(e,t,a.val);if(n)return r<3?this.maxCards(e,t,a.val):this.minCards(e,t,a.val);var o=null;return this.isBanker?this.maxCards(e,t,a.val):(o=this.minCards(e,t,a.val))&&(o.val<14||this.times()<=2)?o:null},e.prototype.minOne=function(e,t){var a=this.minCards(this._one,o.default.ONE,e),n=this.offPairs(e,t);return a?a.val>14?n?(this.deleteOne(n),n):null:a.cardList[0]:n?(this.deleteOne(n),n):null},e.prototype.offPairs=function(e,t){var a=this.minCards(this._pairs,o.default.PAIRS,e);if(a)for(;a.cardList[0].val===t;)a=this.minCards(this._pairs,o.default.PAIRS,a.cardList[0].val);return a?a.cardList[0]:null},e.prototype.deleteOne=function(e){for(var t=0;t<this.cards.length;t++)this.cards[t].val===e.val&&this.cards[t].suit===e.suit&&this.cards.splice(t,1);this.analyse()},e.prototype.judgeScore=function(){var e=0;e+=6*this._bomb.length,this._kingBomb.length>0?e+=8:17===this.cards[0].val?e+=4:16===this.cards[0].val&&(e+=3);for(var t=0;t<this.cards.length;t++)15===this.cards[t].val&&(e+=2);return console.info("\u624b\u724c\u8bc4\u5206\uff1a"+e),e>=7?3:e>=5?2:e>=3?1:4},e.prototype.promptSort=function(e,t){return e.count===t.count?e.val>t.val?1:-1:e.count<t.count?-1:1},e.prototype.pointSort=function(e,t){return e.point===t.point?e.val>t.val?1:-1:e.point-t.point},e.prototype.times=function(){var e=this._kingBomb.length+this._bomb.length+this._progression.length+this._progressionPairs.length+this._one.length+this._pairs.length,t=this._three.length;if(this._plane.length>0)for(var a=0;a<this._plane.length;a++)t+=this._plane[a].cardList.length/3;return t-(this._one.length+this._pairs.length)>0&&(e+=t-(this._one.length+this._pairs.length)),e},e.prototype.log=function(){console.info("\u4ee5\u4e0b\u663e\u793a\u3010666\u3011\u624b\u724c\u6982\u51b5\uff0c\u624b\u6570\uff1a"+this.times()),console.info("\u738b\u70b8"),console.info(this._kingBomb),console.info("\u70b8\u5f39"),console.info(this._bomb),console.info("\u4e09\u6839"),console.info(this._three),console.info("\u98de\u673a"),console.info(this._plane),console.info("\u987a\u5b50"),console.info(this._progression),console.info("\u8fde\u5bf9"),console.info(this._progressionPairs),console.info("\u5355\u724c"),console.info(this._one),console.info("\u5bf9\u5b50"),console.info(this._pairs)},e}();a.default=d,cc._RF.pop()},{"./Cards/DdzCardUtils":"DdzCardUtils","./GameRule197001001":"GameRule197001001","./Utils197001001":"Utils197001001"}],CMD197001001:[function(e,t,a){"use strict";cc._RF.push(t,"7eec3jfWQ1MxaS+1o4sc3tJ","CMD197001001"),Object.defineProperty(a,"__esModule",{value:!0}),a.UserItem197001001=a.PokerModel197001001=void 0;a.PokerModel197001001=function(){this.point=0,this.color=0,this.isReplaced=!1};a.UserItem197001001=function(){this.pos=0,this.isSelf=!1,this.userName="",this.bringScores=0,this.avatar=0,this.betScores=0,this.roundBetScores=0},cc._RF.pop()},{}],CardRecorder197001001:[function(e,t,a){"use strict";cc._RF.push(t,"ed6d1G+/7JFO5XmVpBGuWIr","CardRecorder197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../evnet/GameEventNames197001001"),i=e("../../framework/Cards/DdzCard"),d=e("../../framework/Cards/DdzCardUtils"),l=e("../../framework/Utils197001001"),c=e("../../global/CommonEnum197001001"),u=e("../../global/Global197001001"),h=e("../../global/UIConfigData197001001"),p=[{ui_panel_x:-800,card0_x:432,card1_x:575,card2_x:712},{ui_panel_x:5,card0_x:900,card1_x:930,card2_x:960}],_=cc._decorator,f=_.ccclass,g=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_btnMenu=[],t.bg_menu=null,t.ui_recorder=null,t.ui_btnRecorder=[],t.ui_cads=[],t.ui_panel=null,t.ui_recorderLabel=[],t.ui_btnTuoGuan=null,t.m_status=0,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),this.ui_btnMenu[0].on("click",this.onClickButton,this),this.ui_btnMenu[1].on("click",this.onClickButton,this),this.bg_menu.getChildByName("ui_btnToHall").on("click",this.onClickButton,this),this.bg_menu.getChildByName("ui_btnSetting").on("click",this.onClickButton,this),this.bg_menu.getChildByName("ui_btnHelp").on("click",this.onClickButton,this),this.ui_btnRecorder[0].on("click",this.onClickButton,this),this.ui_btnRecorder[1].on("click",this.onClickButton,this),this.ui_btnRecorder[2].on("click",this.onClickButton,this),this.ui_btnTuoGuan.on("click",this.onClickButton,this),this.openMenu(!0),this.refresh()},t.prototype.onDestroy=function(){},t.prototype.refresh=function(){this.m_status=0,this.openRecorder(!1),this.ui_recorder.active=!1,this.setBtnTuoGuan()},t.prototype.setBtnTuoGuan=function(e){void 0===e&&(e=!1),this.ui_btnTuoGuan.getComponent(cc.Button).interactable=e,this.ui_btnTuoGuan.getChildByName("label0").active=e,this.ui_btnTuoGuan.getChildByName("label1").active=!e},t.prototype.showExitBtn=function(e){void 0===e&&(e=!1)},t.prototype.showRecorder=function(e){void 0===e&&(e=!1),this.ui_recorder.active=e,e&&(this.m_status=1,this.openRecorder())},t.prototype.onClickButton=function(e){switch(e.node.name){case"ui_btnToHall":u.default.getInstance().leaveType=c.LeaveType197001001.ToHall,cc.Tween.stopAll(),this.unscheduleAllCallbacks(),base.GUI.getInstance().openAsync(h.UIID197001001.UI_Hall,c.BUNDLENAME.GAME).then(function(){base.GUI.getInstance().remove(h.UIID197001001.UI_ROOM,c.BUNDLENAME.GAME)});break;case"ui_btnSetting":base.GUI.getInstance().open(h.UIID197001001.UI_SETTING,c.BUNDLENAME.GAME);break;case"ui_btnHelp":base.GUI.getInstance().open(h.UIID197001001.UI_HELP,c.BUNDLENAME.GAME);break;case"ui_btnMenu0":this.openMenu(!0);break;case"ui_btnMenu1":this.openMenu(!1);break;case"ui_btnRecorder0":this.m_status=1==this.m_status?0:1,this.openRecorder();break;case"ui_btnRecorder1":this.m_status=0,this.openRecorder();break;case"ui_btnRecorder2":this.m_status=1,this.openRecorder();break;case"ui_btnTuoGuan":base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_IS_TUOGUAN)}},t.prototype.openRecorder=function(e){if(void 0===e&&(e=u.default.getInstance().isFrontDesk),cc.Tween.stopAllByTag(c.GameTweenTag197001001.TAG_1),cc.Tween.stopAllByTag(c.GameTweenTag197001001.TAG_2),cc.Tween.stopAllByTag(c.GameTweenTag197001001.TAG_3),cc.Tween.stopAllByTag(c.GameTweenTag197001001.TAG_4),this.ui_btnRecorder[1].active=1==this.m_status,this.ui_btnRecorder[2].active=1!=this.m_status,!e)return this.ui_panel.x=p[this.m_status].ui_panel_x,this.ui_cads[0].x=p[this.m_status].card0_x,this.ui_cads[1].x=p[this.m_status].card1_x,void(this.ui_cads[2].x=p[this.m_status].card2_x);var t=0==this.m_status?1:0;this.ui_panel.x=p[t].ui_panel_x,this.ui_cads[0].x=p[t].card0_x,this.ui_cads[1].x=p[t].card1_x,this.ui_cads[2].x=p[t].card2_x,cc.tween(this.ui_panel).to(.8,{x:p[this.m_status].ui_panel_x}).tag(c.GameTweenTag197001001.TAG_1).start(),cc.tween(this.ui_cads[0]).to(.8,{x:p[this.m_status].card0_x}).tag(c.GameTweenTag197001001.TAG_2).start(),cc.tween(this.ui_cads[1]).to(.8,{x:p[this.m_status].card1_x}).tag(c.GameTweenTag197001001.TAG_3).start(),cc.tween(this.ui_cads[2]).to(.8,{x:p[this.m_status].card2_x}).tag(c.GameTweenTag197001001.TAG_4).start()},t.prototype.openMenu=function(e){this.ui_btnMenu[0].active=!e,this.ui_btnMenu[1].active=e,this.bg_menu.active=e},t.prototype.updateRecorder=function(e){for(var t=[],a=l.default.clone(u.default.getInstance().mHandCard),n=0;n<a.length;n++){var r=d.default.calculatePoints(a[n]);t[r]?t[r]+=1:t[r]=1}for(n=0;n<e.length;n++){var o=this.ui_recorderLabel[e[n].cardId-1],s=4;14!=e[n].cardId&&15!=e[n].cardId||(s=1);var i=s-(t[e[n].cardId]?t[e[n].cardId]+e[n].cardNum:e[n].cardNum);o.string=i.toString(),o.node.color=0!=i?new cc.Color(249,124,34,255):new cc.Color(162,147,136,255)}},t.prototype.setLandlordCard=function(){var e=u.default.getInstance().mLandlordCard,t=[];for(var a in e){var n=(new i.default).create(e[a]);t.push(n)}for(a=0;a<e.length;a++){var r=this.ui_cads[a],o=d.default.getPokerSpName(t[a].suit,t[a].point);r.getComponent(cc.Sprite).spriteFrame=u.default.getInstance().cardsPokerAtlas.getSpriteFrame(o)}this.ui_cads[2].getChildByName("score").getComponent(cc.Label).string=u.default.getInstance().mLallLandlordScore.toString()},o([g(cc.Node)],t.prototype,"ui_btnMenu",void 0),o([g(cc.Node)],t.prototype,"bg_menu",void 0),o([g(cc.Node)],t.prototype,"ui_recorder",void 0),o([g(cc.Node)],t.prototype,"ui_btnRecorder",void 0),o([g(cc.Node)],t.prototype,"ui_cads",void 0),o([g(cc.Node)],t.prototype,"ui_panel",void 0),o([g(cc.Label)],t.prototype,"ui_recorderLabel",void 0),o([g(cc.Node)],t.prototype,"ui_btnTuoGuan",void 0),o([f],t)}(cc.Component);a.default=v,cc._RF.pop()},{"../../evnet/GameEventNames197001001":"GameEventNames197001001","../../framework/Cards/DdzCard":"DdzCard","../../framework/Cards/DdzCardUtils":"DdzCardUtils","../../framework/Utils197001001":"Utils197001001","../../global/CommonEnum197001001":"CommonEnum197001001","../../global/Global197001001":"Global197001001","../../global/UIConfigData197001001":"UIConfigData197001001"}],CardTypeEffects197001001:[function(e,t,a){"use strict";cc._RF.push(t,"bbbd7fgqCNEjLHenqNs0quU","CardTypeEffects197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../framework/Const/DdzConst"),i=cc._decorator,d=i.ccclass,l=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_zhadang=null,t.ui_wangzha=null,t.ui_shunzi=null,t.ui_feiji=null,t}return r(t,e),t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.ui_zhadang.node.active=!1,this.ui_wangzha.node.active=!1,this.ui_shunzi.node.active=!1,this.ui_feiji.node.active=!1;var a=e[0][0];switch(a){case s.DdzCardsType.CARD_TYPE_BOMB:this.playBombAni();break;case s.DdzCardsType.CARD_TYPE_ROCKET:this.playKingBombAni();break;case s.DdzCardsType.CARD_TYPE_ONELINE:this.playStraightAni();break;case s.DdzCardsType.CARD_TYPE_THREELINE:case s.DdzCardsType.CARD_TYPE_PLANEWITHONE:case s.DdzCardsType.CARD_TYPE_PLANEWITHWING:this.playPlaneAni();break;default:base.GUI.getInstance().close(this)}},t.prototype.playPlaneAni=function(){var e=this;this.ui_feiji.node.active=!0,this.setSpineAnimation(this.ui_feiji,"animation",!1,function(){base.GUI.getInstance().close(e)})},t.prototype.playStraightAni=function(){var e=this;this.ui_shunzi.node.active=!0,this.setSpineAnimation(this.ui_shunzi,"ship",!1,function(){base.GUI.getInstance().close(e)})},t.prototype.playKingBombAni=function(){var e=this;this.ui_wangzha.node.active=!0;var t=base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH?"animation_zh":"animation_en";this.setSpineAnimation(this.ui_wangzha,t,!1,function(){base.GUI.getInstance().close(e)})},t.prototype.playBombAni=function(){var e=this;this.ui_zhadang.node.active=!0;var t=base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH?"animation2_zh":"animation2_en";this.setSpineAnimation(this.ui_zhadang,"animation1",!0),this.scheduleOnce(function(){e.setSpineAnimation(e.ui_zhadang,t,!1,function(){base.GUI.getInstance().close(e)})},.2)},t.prototype.setSpineAnimation=function(e,t,a,n){e.setAnimation(0,t,a)&&!a&&e.setCompleteListener(function(){e.setCompleteListener(null),n&&n()})},o([l(sp.Skeleton)],t.prototype,"ui_zhadang",void 0),o([l(sp.Skeleton)],t.prototype,"ui_wangzha",void 0),o([l(sp.Skeleton)],t.prototype,"ui_shunzi",void 0),o([l(sp.Skeleton)],t.prototype,"ui_feiji",void 0),o([d],t)}(base.PopupModel);a.default=c,cc._RF.pop()},{"../../framework/Const/DdzConst":"DdzConst"}],CardUtils197001001:[function(e,t,a){"use strict";cc._RF.push(t,"d22deK2bOpAt4MoF0gyX7Ff","CardUtils197001001"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){}return e.calculateSuit=function(e){return 0==e?0:Math.floor(e/16)},e.calculatePoints=function(e){return 0==e?5:e%16},e.getPokerSpriteFrameName=function(e,t){return 0!=e&&t>=1&&t<12?"chess_poker_"+e+"_"+(t+2):12==t?"chess_poker_"+e+"_1":13==t?"chess_poker_"+e+"_2":14==t?"chess_poker_"+e+"_2":15==t?"chess_poker_"+e+"_1":"chess_poker_0_5"},e.compareCardPoints=function(e,t){return e.point>t.point?1:e.point<t.point?-1:0},e.getHandCardsMargin=function(e){var t=85;return e<=17&&e>=15?t=90:e<15&&e>8?t=90:e<=8&&(t=90),t},e.getHandCardsOffset=function(e){var t=100;return e<=17&&(t=100+10*(e-17)),t>=0?t:0},e.ppRect=function(e,t){if(e==t){var a=new cc.Size(1e-4,1e-4);return cc.rect(e.x,e.y,a.width,a.height)}var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return cc.rect(n,r,Math.max(Math.abs(e.x-t.x),1e-4),Math.max(Math.abs(e.y-t.y),1e-4))},e.getIndexFromArray=function(e,t){if(null!=e&&e.length>0)for(var a=0;a<e.length;a++)if(e[a]===t)return a;return 0},e.isValue=function(e,t){return null!=e&&(t?null!=e[t]:null!=e)},e.clone=function(e){if("object"!=typeof e||null==e)return e;var t={};for(var a in e.constructor==Array&&(t=[]),e)t[a]=this.clone(e[a]);return t},e}();a.default=n,cc._RF.pop()},{}],Clock197001001:[function(e,t,a){"use strict";cc._RF.push(t,"45bc0YpBBNI2q7+3sLlK2WK","Clock197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../global/CommonEnum197001001"),i=cc._decorator,d=i.ccclass,l=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initClock(),this.node.active=!1},t.prototype.initClock=function(){var e=new base.ClockParamType;e.countDown=10,e.enterCrucialCall=function(){base.SoundManager.getInstance().playEffect(s.SOUNDS_NAME.Special_alert,!1,s.BUNDLENAME.GAME)},e.completeFunction=function(){},e.crucialSecond=3,this.initData(e)},o([d],t)}(base.ClockTimer));a.default=l,cc._RF.pop()},{"../global/CommonEnum197001001":"CommonEnum197001001"}],CommonEnum197001001:[function(e,t,a){"use strict";cc._RF.push(t,"ca937UMcbZC4I8k+UEuKcOz","CommonEnum197001001"),Object.defineProperty(a,"__esModule",{value:!0}),a.GameOperation197001001=a.GameState197001001=a.GameTweenTag197001001=a.LeaveType197001001=a.MAX_USER_COUNT=a.BUNDLENAME=a.SOUNDS_NAME_EN=a.SOUNDS_NAME=void 0,function(e){e.click="sounds/click",e.nvA="sounds/nvA",e.nanA="sounds/nanA",e.nv2="sounds/nv2",e.nan2="sounds/nan2",e.nv3="sounds/nv3",e.nan3="sounds/nan3",e.nv4="sounds/nv4",e.nan4="sounds/nan4",e.nv5="sounds/nv5",e.nan5="sounds/nan5",e.nv6="sounds/nv6",e.nan6="sounds/nan6",e.nv7="sounds/nv7",e.nan7="sounds/nan7",e.nv8="sounds/nv8",e.nan8="sounds/nan8",e.nv9="sounds/nv9",e.nan9="sounds/nan9",e.nv10="sounds/nv10",e.nan10="sounds/nan10",e.nvJ="sounds/nvJ",e.nanJ="sounds/nanJ",e.nvQ="sounds/nvQ",e.nanQ="sounds/nanQ",e.nvK="sounds/nvK",e.nanK="sounds/nanK",e.nvxiaowang="sounds/nvxiaowang",e.nvdawang="sounds/nvdawang",e.nanxiaowang="sounds/nanxiaowang",e.nandawang="sounds/nandawang",e.baojing1_1="sounds/baojing1_1",e.baojing1="sounds/baojing1",e.baojing2_1="sounds/baojing2_1",e.baojing2="sounds/baojing2",e.buyao1="sounds/buyao1",e.buyao1_1="sounds/buyao1_1",e.buyao2="sounds/buyao2",e.buyao3="sounds/buyao3",e.buyao4="sounds/buyao4",e.buyao4_1="sounds/buyao4_1",e.DealFold="sounds/DealFold",e.dui1="sounds/dui1",e.dui2="sounds/dui2",e.dui3="sounds/dui3",e.dui4="sounds/dui4",e.dui5="sounds/dui5",e.dui6="sounds/dui6",e.dui7="sounds/dui7",e.dui8="sounds/dui8",e.dui9="sounds/dui9",e.dui10="sounds/dui10",e.dui11="sounds/dui11",e.dui12="sounds/dui12",e.dui13="sounds/dui13",e.dui1_1="sounds/dui1_1",e.dui2_1="sounds/dui2_1",e.dui3_1="sounds/dui3_1",e.dui4_1="sounds/dui4_1",e.dui5_1="sounds/dui5_1",e.dui6_1="sounds/dui6_1",e.dui7_1="sounds/dui7_1",e.dui8_1="sounds/dui8_1",e.dui9_1="sounds/dui9_1",e.dui10_1="sounds/dui10_1",e.dui11_1="sounds/dui11_1",e.dui12_1="sounds/dui12_1",e.dui13_1="sounds/dui13_1",e.feiji_1="sounds/feiji_1",e.feiji="sounds/feiji",e.liandui_1="sounds/liandui_1",e.liandui="sounds/liandui",e.MusicEx_Lose="sounds/MusicEx_Lose",e.MusicEx_Win="sounds/MusicEx_Win",e.MusicEx_Welcome="sounds/MusicEx_Welcome",e.MusicEx_Normal="sounds/MusicEx_Normal",e.MusicEx_Normal2="sounds/MusicEx_Normal2",e.NoOrder_1="sounds/NoOrder_1",e.NoOrder="sounds/NoOrder",e.NoRob_1="sounds/NoRob_1",e.NoRob="sounds/NoRob",e.Rob1_1="sounds/Rob1_1",e.Rob1="sounds/Rob1",e.Rob2_1="sounds/Rob2_1",e.Rob2="sounds/Rob2",e.Rob3="sounds/Rob3",e.Rob3_1="sounds/Rob3_1",e.sandaiyi_1="sounds/sandaiyi_1",e.sandaiyi="sounds/sandaiyi",e.sandaiyidui_1="sounds/sandaiyidui_1",e.sandaiyidui="sounds/sandaiyidui",e.shunzi_1="sounds/shunzi_1",e.shunzi="sounds/shunzi",e.sidaier_1="sounds/sidaier_1",e.sidaier="sounds/sidaier",e.sidailiangdui_1="sounds/sidailiangdui_1",e.sidailiangdui="sounds/sidailiangdui",e.Special_alert="sounds/Special_alert",e.wangzha_1="sounds/wangzha_1",e.wangzha="sounds/wangzha",e.zhadan_1="sounds/zhadan_1",e.zhadan="sounds/zhadan",e.buyao3_1="sounds/buyao3_1",e.buyao2_1="sounds/buyao2_1"}(a.SOUNDS_NAME||(a.SOUNDS_NAME={})),function(e){e.nvA="sounds/en/nvA_en",e.nanA="sounds/en/nanA_en",e.nv2="sounds/en/nv2_en",e.nan2="sounds/en/nan2_en",e.nv3="sounds/en/nv3_en",e.nan3="sounds/en/nan3_en",e.nv4="sounds/en/nv4_en",e.nan4="sounds/en/nan4_en",e.nv5="sounds/en/nv5_en",e.nan5="sounds/en/nan5_en",e.nv6="sounds/en/nv6_en",e.nan6="sounds/en/nan6_en",e.nv7="sounds/en/nv7_en",e.nan7="sounds/en/nan7_en",e.nv8="sounds/en/nv8_en",e.nan8="sounds/en/nan8_en",e.nv9="sounds/en/nv9_en",e.nan9="sounds/en/nan9_en",e.nv10="sounds/en/nv10_en",e.nan10="sounds/en/nan10_en",e.nvJ="sounds/en/nvJ_en",e.nanJ="sounds/en/nanJ_en",e.nvQ="sounds/en/nvQ_en",e.nanQ="sounds/en/nanQ_en",e.nvK="sounds/en/nvK_en",e.nanK="sounds/en/nanK_en",e.nvxiaowang="sounds/en/nvxiaowang_en",e.nvdawang="sounds/en/nvdawang_en",e.nanxiaowang="sounds/en/nanxiaowang_en",e.nandawang="sounds/en/nandawang_en",e.baojing1_1="sounds/en/baojing1_1_en",e.baojing1="sounds/en/baojing1_en",e.baojing2_1="sounds/en/baojing2_1_en",e.baojing2="sounds/en/baojing2_en",e.buyao1="sounds/en/buyao1_en",e.buyao1_1="sounds/en/buyao1_1_en",e.buyao2="sounds/en/buyao2_en",e.buyao3="sounds/en/buyao3_en",e.buyao4="sounds/en/buyao4_en",e.buyao4_1="sounds/en/buyao4_1_en",e.DealFold="sounds/en/DealFold_en",e.dui1="sounds/en/dui1_en",e.dui2="sounds/en/dui2_en",e.dui3="sounds/en/dui3_en",e.dui4="sounds/en/dui4_en",e.dui5="sounds/en/dui5_en",e.dui6="sounds/en/dui6_en",e.dui7="sounds/en/dui7_en",e.dui8="sounds/en/dui8_en",e.dui9="sounds/en/dui9_en",e.dui10="sounds/en/dui10_en",e.dui11="sounds/en/dui11_en",e.dui12="sounds/en/dui12_en",e.dui13="sounds/en/dui13_en",e.dui1_1="sounds/en/dui1_1_en",e.dui2_1="sounds/en/dui2_1_en",e.dui3_1="sounds/en/dui3_1_en",e.dui4_1="sounds/en/dui4_1_en",e.dui5_1="sounds/en/dui5_1_en",e.dui6_1="sounds/en/dui6_1_en",e.dui7_1="sounds/en/dui7_1_en",e.dui8_1="sounds/en/dui8_1_en",e.dui9_1="sounds/en/dui9_1_en",e.dui10_1="sounds/en/dui10_1_en",e.dui11_1="sounds/en/dui11_1_en",e.dui12_1="sounds/en/dui12_1_en",e.dui13_1="sounds/en/dui13_1_en",e.feiji_1="sounds/en/feiji_1_en",e.feiji="sounds/en/feiji_en",e.liandui_1="sounds/en/liandui_1_en",e.liandui="sounds/en/liandui_en",e.MusicEx_Lose="sounds/en/MusicEx_Lose",e.MusicEx_Win="sounds/en/MusicEx_Win",e.MusicEx_Welcome="sounds/en/MusicEx_Welcome",e.MusicEx_Normal="sounds/en/MusicEx_Normal_en",e.MusicEx_Normal2="sounds/en/MusicEx_Normal2_en",e.NoOrder_1="sounds/en/NoOrder_1_en",e.NoOrder="sounds/en/NoOrder_en",e.NoRob_1="sounds/en/NoRob_1_en",e.NoRob="sounds/en/NoRob_en",e.Rob1_1="sounds/en/Rob1_1_en",e.Rob1="sounds/en/Rob1_en",e.Rob2_1="sounds/en/Rob2_1_en",e.Rob2="sounds/en/Rob2_en",e.Rob3="sounds/en/Rob3_en",e.Rob3_1="sounds/en/Rob3_1_en",e.sandaiyi_1="sounds/en/sandaiyi_1_en",e.sandaiyi="sounds/en/sandaiyi_en",e.sandaiyidui_1="sounds/en/sandaiyidui_1_en",e.sandaiyidui="sounds/en/sandaiyidui_en",e.shunzi_1="sounds/en/shunzi_1_en",e.shunzi="sounds/en/shunzi_en",e.sidaier_1="sounds/en/sidaier_1_en",e.sidaier="sounds/en/sidaier_en",e.sidailiangdui_1="sounds/en/sidailiangdui_1_en",e.sidailiangdui="sounds/en/sidailiangdui_en",e.Special_alert="sounds/en/Special_alert_en",e.wangzha_1="sounds/en/wangzha_1_en",e.wangzha="sounds/en/wangzha_en",e.zhadan_1="sounds/en/zhadan_1_en",e.zhadan="sounds/en/zhadan_en",e.buyao3_1="sounds/en/buyao3_1_en",e.buyao2_1="sounds/en/buyao2_1_en"}(a.SOUNDS_NAME_EN||(a.SOUNDS_NAME_EN={})),(a.BUNDLENAME||(a.BUNDLENAME={})).GAME="game_197001001",a.MAX_USER_COUNT=3,function(e){e[e.ToHall=0]="ToHall",e[e.nextGame=1]="nextGame"}(a.LeaveType197001001||(a.LeaveType197001001={})),function(e){e[e.TAG_1=6365250]="TAG_1",e[e.TAG_2=6365251]="TAG_2",e[e.TAG_3=6365252]="TAG_3",e[e.TAG_4=6365253]="TAG_4"}(a.GameTweenTag197001001||(a.GameTweenTag197001001={})),function(e){e[e.wait=0]="wait",e[e.ready=1]="ready",e[e.sendcard=2]="sendcard",e[e.banker=3]="banker",e[e.scramble_banker=4]="scramble_banker",e[e.play=5]="play",e[e.catch=6]="catch",e[e.deal_cards=7]="deal_cards",e[e.snatch_landlord=8]="snatch_landlord"}(a.GameState197001001||(a.GameState197001001={})),function(e){e[e.snatch_landlord=0]="snatch_landlord",e[e.play_cards=1]="play_cards"}(a.GameOperation197001001||(a.GameOperation197001001={})),cc._RF.pop()},{}],CustomButton197001001:[function(e,t,a){"use strict";cc._RF.push(t,"ebf53qr2h5KDYBVDA8Re8sw","CustomButton197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,s.executeInEditMode,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i],t)}(base.CustomButton));a.default=d,cc._RF.pop()},{}],CustomLabelShader197001001:[function(e,t,a){"use strict";cc._RF.push(t,"b8f58RsvItNoJCnXR3WyoGo","CustomLabelShader197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,s.menu),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i,d("197001001/CustomLabelShader197001001")],t)}(base.LabelShader);a.default=l,cc._RF.pop()},{}],DdzCardCfg:[function(e,t,a){"use strict";cc._RF.push(t,"377fduLe4pHVI0ANvmUtOj4","DdzCardCfg"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./DdzCardUtils"),r=e("./DdzCards"),o=e("./DdzCardPaser"),s=e("../Const/DdzConst"),i=e("./DdzCardParseInfo"),d=function(){function e(){}return e.getCardsType=function(e,t,a){if(null==e||e.length<=0)return s.DdzCardsType.CARD_TYPE_ERROR;var n=(new r.default).create(e),i=o.default.parseByType(n,t,a,!0);return i?i.type:s.DdzCardsType.CARD_TYPE_ERROR},e.autoSelected=function(e){if(null==e||e.length<=0)return[];var t=(new r.default).create(e);cc.log("\u667a\u80fd\u9009\u724c\u724c\u578b\u5206\u7c7b",t);var a=[];return function(){var e=t.line1,n=[],r=[];if(!(e.length<5)){for(var o=0,s=0;;s++){if(s>=e.length||e[s].point>=13){r.length>=5&&n.push(r);break}0==o||1==Math.abs(e[s].point-o)?r.push(e[s]):(r.length>=5&&n.push(r),(r=[]).push(e[s])),o=e[s].point}0!=n.length&&(1==n.length&&a.push(n[0]),2==n.length&&a.push(n[1].length>n[0].length?n[1]:n[0]),cc.log("\u6240\u9009\u724c\u4e2d\u6709\u987a\u5b50\uff0c\u957f\u5ea6:",n[0].length))}}(),function(){var e=t.line2,n=[],r=[];if(!(e.length<6)){for(var o=0,s=0;;s+=2){if(s>=e.length||e[s].point>=13){r.length>=6&&n.push(r);break}0==o||1==Math.abs(e[s].point-o)?(o=e[s].point,r.push(e[s]),r.push(e[s+1])):(r.length>=6&&n.push(r),(r=[]).push(e[s]),r.push(e[s+1])),o=e[s].point}0!=n.length&&(1==n.length&&a.push(n[0]),n.length>=2&&(n.sort(function(e,t){return t.length-e.length}),a.push(n[0])),cc.log("\u6240\u9009\u724c\u4e2d\u6709\u8fde\u5bf9\uff0c\u957f\u5ea6:",n[0].length))}}(),function(){var e=t.line3,n=[],o=[];if(!(e.length<6||0!=t.card4.length)){for(var s=0,i=0;;i+=3){if(i>=e.length||e[i].point>=13){o.length>=6&&n.push(o);break}0==s||1==Math.abs(e[i].point-s)?(s=e[i].point,o.push(e[i]),o.push(e[i+1]),o.push(e[i+2])):(o.length>=6&&n.push(o),(o=[]).push(e[i]),o.push(e[i+1]),o.push(e[i+2])),s=e[i].point}var d=[];if(0!=n.length){1==n.length&&(d=n[0]),n.length>=2&&(n.sort(function(e,t){return t.length-e.length}),d=n[0]);var l=[],c=0;for(i=0;i<t.allCards.length;i++)c<d.length&&t.allCards[i].point==d[c].point?c++:l.push(t.allCards[i]);var u=(new r.default).create(l);if(u.card2.length/2+u.card3.length/3>=d.length/3){for(p=(p=[]).concat(u.card2),i=0;i<u.card3.length/3;i++)p.push(u.card3[3*i]),p.push(u.card3[3*i+1]);var h=d.length/3;for(i=0;i<h;i++)d.push(p[2*i]),d.push(p[2*i+1]);return a.push(d),void cc.log("\u6240\u9009\u724c\u4e2d\u6709\u98de\u673a\u5e26\u5bf9\u5b50\uff0c\u957f\u5ea6:",d.length)}if(u.allCards.length-u.card4.length>=d.length/3){var p;for(p=(p=(p=(p=[]).concat(u.card1)).concat(u.card2)).concat(u.card3),h=d.length/3,i=0;i<h;i++)d.push(p[i]);return a.push(d),void cc.log("\u6240\u9009\u724c\u4e2d\u6709\u98de\u673a\u5e26\u5355\u5f20\uff0c\u957f\u5ea6:",d.length)}a.push(d),cc.log("\u6240\u9009\u724c\u4e2d\u6709\u98de\u673a\u4e0d\u5e26\uff0c\u957f\u5ea6:",d.length)}}}(),function(){if(!(t.allCards.length>8||0==t.card3.length)){for(var e=[],n=0;n<3;n++)e.push(t.card3[n]);t.card2.length>=2?(e.push(t.card2[0]),e.push(t.card2[1]),a.push(e)):t.card1.length>=1&&(e.push(t.card1[0]),a.push(e))}}(),function(){if(!(t.allCards.length>10||0==t.card4.length||8==t.card4.length)){for(var e=[],n=0;n<4;n++)e.push(t.card4[n]);if(t.card2.length/2+t.card3.length/3>=2){for(r=(r=[]).concat(t.card2),n=0;n<t.card3.length/3;n++)r.push(t.card3[3*n]),r.push(t.card3[3*n+1]);for(n=0;n<4;n++)e.push(r[n]);return a.push(e),void cc.log("\u6240\u9009\u724c\u4e2d\u6709\u56db\u5e26\u4e24\u5bf9\uff0c\u957f\u5ea6:",e.length)}if(t.card1.length+t.card2.length+t.card3.length>=2){var r;for(r=(r=(r=(r=[]).concat(t.card1)).concat(t.card2)).concat(t.card3),n=0;n<2;n++)e.push(r[n]);a.push(e),cc.log("\u6240\u9009\u724c\u4e2d\u6709\u56db\u5e26\u4e24\u5355\u5f20\uff0c\u957f\u5ea6:",e.length)}}}(),0==a.length?[]:1==a.length?a[0]:a.length>=2?(a.sort(function(e,t){return t.length-e.length}),a[0]):void 0},e.isCardLink=function(e,t){return 1==Math.abs(e.point-t.point)},e.isLimitFace=function(e,t){if(this.isSplitBomb)return!1;for(var a=0;a<e.card4.length;a+=4)if(t==e.card4[a].point)return!0;return!1},e.compareCardFace=function(e,t){return e.point>t.point?1:e.point<t.point?-1:0},e.compareCards=function(e,t,a){if(cc.log("\u6bd4\u8f83\u724c\u578b\u5927x\u5c0f",e,t,a),0==e.length)return-1;if(0==t.length)return-2;var n=(new r.default).create(e),i=o.default.parseTypes(n),d=null;if(0==i.length)return-1;if(1!=i.length&&a){for(var l in i)if(i[l].type==s.DdzCardsType.CARD_TYPE_BOMB){d=i[l];break}if(null==d)for(var l in i)if(i[l].type==a){d=i[l];break}}else d=i[0];if(null==d)return-1;if(d.type==s.DdzCardsType.CARD_TYPE_ERROR)return-1;var c=(new r.default).create(t),u=null;if(0==(i=o.default.parseTypes(c)).length)return-2;if(1!=i.length&&a){for(var l in i)if(i[l].type==a){u=i[l];break}}else u=i[0];return null==u?-2:this.compareCardsInfo(d,u)?0:1},e.compareCardsInfo=function(e,t){if(e.type==s.DdzCardsType.CARD_TYPE_ERROR||t.type==s.DdzCardsType.CARD_TYPE_ERROR)return!1;if(e.type==s.DdzCardsType.CARD_TYPE_ROCKET)return!0;if(t.type==s.DdzCardsType.CARD_TYPE_ROCKET)return!1;if(e.type==t.type){if(e.type==s.DdzCardsType.CARD_TYPE_BOMB&&e.len>t.len)return!0;if(e.len==t.len)return e.point>t.point}else if(e.type==s.DdzCardsType.CARD_TYPE_BOMB)return!0;return!1},e.createCardsInfo=function(){var e=new i.default,t=n.default.clone(e);return t.clear(),t},e.checkCardsInfo=function(e,t,a){var n=(new r.default).create(e);return o.default.parseByType(n,t,a,!1)||null},e}();a.default=d,cc._RF.pop()},{"../Const/DdzConst":"DdzConst","./DdzCardParseInfo":"DdzCardParseInfo","./DdzCardPaser":"DdzCardPaser","./DdzCardUtils":"DdzCardUtils","./DdzCards":"DdzCards"}],DdzCardItem:[function(e,t,a){"use strict";cc._RF.push(t,"789acUxEA9P/LINLMh3N2y3","DdzCardItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../Const/DdzConst"),i=cc._decorator,d=i.ccclass,l=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.card=null,t.dizhuFlag=null,t.cardId=0,t.suit=0,t.point=0,t._isChoosed=!1,t._selected=!1,t._tag=s.CardItemTagType.None,t}return r(t,e),Object.defineProperty(t.prototype,"isChoosed",{get:function(){return this._isChoosed},set:function(e){this._isChoosed=e,this._isChoosed?this.card.node.color=new cc.Color(100,100,100,255):this.card.node.color=new cc.Color(255,255,255,255)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tag",{get:function(){return this._tag},set:function(e){this._tag=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.dizhuFlag.active=!1},t.prototype.setCardSuitAndPoint=function(e,t){this.suit=e,this.point=t},t.prototype.setSpriteFrameOfCard=function(e){e&&(this.card.getComponent(cc.Sprite).spriteFrame=e)},t.prototype.showDizhuFlag=function(e){this.dizhuFlag.active=e},t.prototype.setCardPos=function(e){this.node.x=e.x,this.node.y=e.y},t.prototype.reset=function(){this.card.node.color=new cc.Color(255,255,255,255),this.dizhuFlag.color=new cc.Color(255,255,255,255),this.node.setScale(1),this.dizhuFlag.active=!1},o([l(cc.Sprite)],t.prototype,"card",void 0),o([l(cc.Node)],t.prototype,"dizhuFlag",void 0),o([d],t)}(cc.Component);a.default=c,cc._RF.pop()},{"../Const/DdzConst":"DdzConst"}],DdzCardParseInfo:[function(e,t,a){"use strict";cc._RF.push(t,"d1232VDMYZHwa7bWifdYA+h","DdzCardParseInfo"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../Const/DdzConst"),r=function(){function e(){this.len=0,this.type=0,this.point=0,this.wings=0,this.cardList=null}return e.prototype.clear=function(){this.len=0,this.wings=0,this.type=n.DdzCardsType.CARD_TYPE_ERROR,this.point=0},e}();a.default=r,cc._RF.pop()},{"../Const/DdzConst":"DdzConst"}],DdzCardPaser:[function(e,t,a){"use strict";cc._RF.push(t,"7d8baUmxmdP1oeEGEKrsIe0","DdzCardPaser"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./DdzCardCfg"),r=e("../Const/DdzConst"),o=function(){function e(){}return e.checkLine=function(e,t,a,o){if((null==a||null==a||a<=0)&&(a=0,o=e.length),0==e.length||e.length<o)return null;var s=1,i=e[a];if(null==i)return null;for(var d=i,l=t+a;l<o;l+=t){var c=e[l].point;if(!(n.default.isCardLink(i,e[l])&&c<r.DdzCardsFace.TWO))return null;s++,i=e[l]}return{point:d.point,len:s}},e.checkLineOK=function(e,t){if(e){if(1==t&&e.len>=5)return e.point;if(2==t&&e.len>=3)return e.point;if(3==t&&e.len>=2)return e.point}return null},e.parseByType=function(t,a,n,o){var s=e.parseTypes(t);if(!a||a==r.DdzCardsType.CARD_TYPE_ERROR)return s&&s.length>0?s[0]:null;for(var i in s)if(s[i].type==a){if(!(null!=n&&null!=n&&n>0))return s[i];if(s[i].point==n)return s[i]}if(o)for(var i in s)if(s[i].type==r.DdzCardsType.CARD_TYPE_BOMB)return s[i];return s.length>0?s[0]:null},e.parseTypes=function(e){var t=[],a=e.len;if(0==a)return t;if(1==a){var o=n.default.createCardsInfo();return t.push(o),o.len=a,o.wings=1,o.point=e.card1[0].point,o.type=r.DdzCardsType.CARD_TYPE_ONE,t}if(2==a){if(2==e.card2.length)return o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card2[0].point,o.type=r.DdzCardsType.CARD_TYPE_TWO,t;if(2==e.card1.length&&e.card1[0].point==r.DdzCardsFace.SMALL&&e.card1[1].point==r.DdzCardsFace.BIG)return o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card1[0].point,o.type=r.DdzCardsType.CARD_TYPE_ROCKET,t}else if(3==a){if(3==e.card3.length)return o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card3[0].point,o.type=r.DdzCardsType.CARD_TYPE_THREE,t}else if(4==a){if(4==e.card4.length)return o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card4[3].point,o.type=r.DdzCardsType.CARD_TYPE_BOMB,t;if(3==e.card3.length)return o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card3[0].point,o.type=r.DdzCardsType.CARD_TYPE_THREEWITHONE,t}else 5==a?3==e.card3.length&&2==e.card2.length&&(o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card3[2].point,o.type=r.DdzCardsType.CARD_TYPE_THREEWITHTWO):6==a?4==e.card4.length&&(o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card4[3].point,o.type=r.DdzCardsType.CARD_TYPE_FOURWITHONE):8==a&&4==e.card4.length&&4==e.card2.length&&(o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=1,o.point=e.card4[3].point,o.type=r.DdzCardsType.CARD_TYPE_FOURWITHTWO);if(a==e.card1.length){var s=this.checkLine(e.line1,1,0,e.line1.length);(c=this.checkLineOK(s,1))&&(o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=a,o.point=c,o.type=r.DdzCardsType.CARD_TYPE_ONELINE)}if(a==e.card2.length&&e.card2.length==e.line2.length&&(c=this.checkLineOK(this.checkLine(e.line2,2,0,0),2)))return o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=a/2,o.point=c,o.type=r.DdzCardsType.CARD_TYPE_TWOLINE,t;if(a==e.card3.length&&e.card3.length==e.line3.length&&(c=this.checkLineOK(this.checkLine(e.line3,3,0,0),3)))return o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=a/2,o.point=c,o.type=r.DdzCardsType.CARD_TYPE_THREELINE,t;if(e.line3.length>=6&&a%4==0&&0==e.card4.length)for(var i=a/4*3,d=e.line3.length,l=e.line3.length-i;d>=6&&l>=0&&l<d;l-=3,d-=3)if(s=this.checkLine(e.line3,3,l,d),c=this.checkLineOK(s,3)){o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=a/4,o.point=c,o.type=r.DdzCardsType.CARD_TYPE_PLANEWITHONE;break}if(e.card3.length>=6&&a%5==0&&0==e.card1.length&&0==e.card4.length)for(i=a/5*3,d=e.card3.length,l=e.card3.length-i;d>=6&&l>=0&&l<d;l-=3,d-=3){var c;if(s=this.checkLine(e.card3,3,l,d),c=this.checkLineOK(s,3)){o=n.default.createCardsInfo(),t.push(o),o.len=a,o.wings=a/5,o.point=c,o.type=r.DdzCardsType.CARD_TYPE_PLANEWITHWING;break}}return t},e}();a.default=o,cc._RF.pop()},{"../Const/DdzConst":"DdzConst","./DdzCardCfg":"DdzCardCfg"}],DdzCardUtils:[function(e,t,a){"use strict";cc._RF.push(t,"9d0168P7OVDl5T9KdvV0Kth","DdzCardUtils"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){}return e.calculateSuit=function(e){return 0==e?0:Math.floor(e/16)},e.calculatePoints=function(e){return 0==e?5:e%16},e.getPokerSpName=function(e,t){return 0!=e&&t>=1&&t<12?"chess_poker_"+e+"_"+(t+2):12==t?"chess_poker_"+e+"_1":13==t?"chess_poker_"+e+"_2":14==t?"chess_poker_"+e+"_2":15==t?"chess_poker_"+e+"_1":"chess_poker_0_5"},e.sortCardsUp=function(e){return null==e||e.length<2?e:(e.sort(function(e,t){return this.compareCardVal(e,t)}.bind(this)),e)},e.sortCardsDown=function(e){return null==e||e.length<2?e:(e.sort(function(e,t){return this.compareCardVal(t,e)}.bind(this)),e)},e.compareCardVal=function(e,t){return e.point>t.point?1:e.point<t.point?-1:e.suit>t.suit?1:e.suit<t.suit?-1:0},e.compareCardPoints=function(e,t){return e.point>t.point?1:e.point<t.point?-1:0},e.getHandCardsMargin=function(e){var t=52;return e<=17&&e>=15?t=57:e<15&&e>8?t=57:e<=8&&(t=57),t},e.getHandCardsOffset=function(e){var t=100;return e<=17&&(t=100+10*(e-17)),t>=0?t:0},e.ppRect=function(e,t){if(e==t){var a=new cc.Size(1e-4,1e-4);return cc.rect(e.x,e.y,a.width,a.height)}var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return cc.rect(n,r,Math.max(Math.abs(e.x-t.x),1e-4),Math.max(Math.abs(e.y-t.y),1e-4))},e.getIndexFromArray=function(e,t){if(null!=e&&e.length>0)for(var a=0;a<e.length;a++)if(e[a]===t)return a;return 0},e.isValue=function(e,t){return null!=e&&(t?null!=e[t]:null!=e)},e.isTable=function(t,a){return a?e.isValue(t,a)&&t[a].length>0:null!=t&&t.length>0},e.clone=function(e){if("object"!=typeof e||null==e)return e;var t={};for(var a in e.constructor==Array&&(t=[]),e)t[a]=this.clone(e[a]);return t},e}();a.default=n,cc._RF.pop()},{}],DdzCards:[function(e,t,a){"use strict";cc._RF.push(t,"f6de90vh4tHeZ5x5axYfN2r","DdzCards"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./DdzCardUtils"),r=function(){function e(){this.len=0,this.allCards=[],this.card1=[],this.card2=[],this.card3=[],this.card4=[],this.line1=[],this.line2=[],this.line3=[]}return e.prototype.clear=function(){this.allCards=[],this.len=0,this.card1=[],this.card2=[],this.card3=[],this.card4=[],this.line1=[],this.line2=[],this.line3=[]},e.prototype.parse=function(e){if(!n.default.isTable(e,null))return this;this.clear(),n.default.sortCardsUp(e),this.allCards=e,this.len=e.length;var t=0,a=0,r=e[0];for(a=1;a<=this.len;a++){var o=e[a],s=a==this.len;if(s||0!=n.default.compareCardPoints(r,o)){var i=t+1;if(0==t)this.card1.push(r),this.line1.push(r);else if(1==t){this.line1.push(e[a-i]);for(var d=0;d<2;++d){var l=e[a-i+d];this.card2.push(l),this.line2.push(l)}}else if(2==t){for(this.line1.push(e[a-i]),d=0;d<2;++d)l=e[a-i+d],this.line2.push(l),this.card3.push(l),this.line3.push(l);this.card3.push(e[a-1]),this.line3.push(e[a-1])}else if(t>=3){for(this.line1.push(e[a-i]),d=0;d<2;++d)l=e[a-i+d],this.line2.push(l),this.line3.push(l),this.card4.push(l);this.line3.push(e[a-2]),this.card4.push(e[a-2]),this.card4.push(e[a-1])}if(t=0,s)break}else t++;r=e[a]}return this},e.prototype.create=function(t){var a=new e,r=n.default.clone(a);if(r.clear(),n.default.isTable(t,null)){for(var o=[],s=0;s<t.length;s++)o.push(t[s]);r.parse(o)}return r},e}();a.default=r,cc._RF.pop()},{"./DdzCardUtils":"DdzCardUtils"}],DdzCard:[function(e,t,a){"use strict";cc._RF.push(t,"a183dWiOONN3agp1LqJkA5P","DdzCard"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("./DdzCardUtils"),r=function(){function e(){this.suit=0,this.point=5,this.value=5,this.val=0}return e.prototype.clear=function(){this.suit=0,this.point=5,this.value=5},e.prototype.parse=function(e){return n.default.isValue(e,null)?(this.value=e,this.suit=n.default.calculateSuit(e),this.point=n.default.calculatePoints(e),this.val=this.point+2,this):this},e.prototype.create=function(t){var a=new e,r=n.default.clone(a);return r.parse(t),r},e}();a.default=r,cc._RF.pop()},{"./DdzCardUtils":"DdzCardUtils"}],DdzConst:[function(e,t,a){"use strict";cc._RF.push(t,"71151zGGcxNH7rlSmnNrY1S","DdzConst"),Object.defineProperty(a,"__esModule",{value:!0}),a.DdzCardsType=a.DdzCardsSuit=a.DdzCardsFace=a.DdzCardState=a.DdzTipsType=a.DdzBtnClickedType=a.DdzGameState=a.CardItemTagType=void 0;var n=function(){function e(){}return e.INVAIL=-1,e.PLAYER_NUM=3,e.CARD_FACE_COUNT=15,e.CARD_COUNT_NORMAL=17,e.CARD_COUNT_MAX=20,e.CARD_FULL_COUNT=54,e.NaoZhong_Five=5,e.NaoZhong_Fifteen=15,e.CARD_WIDTH=114,e.CARD_HEIGHT=159,e.CARD_MARGIN=57,e.CardsPoolCount=20,e.OUTCARD_MARGIN=57,e.Seat0_HandCardPosY=-239,e.Seat0_OutCardPosY=0,e.Seat1_OutCardPosY=0,e.Seat1_OverCardPosY=130,e.PlayersSeatPos=[[-800,-210],[796,340],[-754,340]],e.NaoZhongPos=[[-220,-160],[600,118],[-600,118]],e.userInfoPos=[cc.v2(0,0),cc.v2(510,96),cc.v2(-512,96)],e}();a.default=n,function(e){e[e.None=0]="None",e[e.Bootom=1]="Bootom",e[e.Top=2]="Top"}(a.CardItemTagType||(a.CardItemTagType={})),function(e){e[e.GAME_READY=0]="GAME_READY",e[e.GAME_JIAO=1]="GAME_JIAO",e[e.GAME_QIANG=2]="GAME_QIANG",e[e.GAME_PLAYING=3]="GAME_PLAYING",e[e.GAME_END=4]="GAME_END"}(a.DdzGameState||(a.DdzGameState={})),function(e){e[e.Default=0]="Default",e[e.LeaveRoom=1]="LeaveRoom",e[e.Store=2]="Store",e[e.SetAudio=3]="SetAudio",e[e.SetHelp=4]="SetHelp",e[e.TuoGuan=5]="TuoGuan",e[e.TuoGuanNo=6]="TuoGuanNo",e[e.BuQiang=7]="BuQiang",e[e.JiaoFen1=8]="JiaoFen1",e[e.JiaoFen2=9]="JiaoFen2",e[e.JiaoFen3=10]="JiaoFen3",e[e.BuChu=11]="BuChu",e[e.TiShi=12]="TiShi",e[e.ChuPai=13]="ChuPai",e[e.YaoBuQi=14]="YaoBuQi",e[e.ChongZhi=15]="ChongZhi"}(a.DdzBtnClickedType||(a.DdzBtnClickedType={})),function(e){e[e.DefaultType=0]="DefaultType",e[e.BuJiaoType=1]="BuJiaoType",e[e.BuQiangType=2]="BuQiangType",e[e.BuChuType=3]="BuChuType",e[e.JiaoFen1Type=4]="JiaoFen1Type",e[e.JiaoFen2Type=5]="JiaoFen2Type",e[e.JiaoFen3Type=6]="JiaoFen3Type",e[e.YaoBuQi=7]="YaoBuQi"}(a.DdzTipsType||(a.DdzTipsType={})),function(e){e[e.NEW_CARD=1]="NEW_CARD",e[e.FOLLOW_CARD=2]="FOLLOW_CARD",e[e.PASS_CARD=3]="PASS_CARD",e[e.LAST_CARD=4]="LAST_CARD"}(a.DdzCardState||(a.DdzCardState={})),function(e){e[e.THREE=1]="THREE",e[e.FOUR=2]="FOUR",e[e.FIVE=3]="FIVE",e[e.SIX=4]="SIX",e[e.SEVEN=5]="SEVEN",e[e.EIGHT=6]="EIGHT",e[e.NINE=7]="NINE",e[e.TEN=8]="TEN",e[e.JACK=9]="JACK",e[e.QUEEN=10]="QUEEN",e[e.KING=11]="KING",e[e.ACE=12]="ACE",e[e.TWO=13]="TWO",e[e.SMALL=14]="SMALL",e[e.BIG=15]="BIG",e[e.FIRST=1]="FIRST",e[e.LAST=15]="LAST"}(a.DdzCardsFace||(a.DdzCardsFace={})),function(e){e[e.DIAMONDS=1]="DIAMONDS",e[e.CLUBS=2]="CLUBS",e[e.HEARTS=3]="HEARTS",e[e.SPADES=4]="SPADES",e[e.FIRST=1]="FIRST",e[e.LAST=4]="LAST"}(a.DdzCardsSuit||(a.DdzCardsSuit={})),function(e){e[e.CARD_TYPE_ERROR=0]="CARD_TYPE_ERROR",e[e.CARD_TYPE_ONE=1]="CARD_TYPE_ONE",e[e.CARD_TYPE_TWO=2]="CARD_TYPE_TWO",e[e.CARD_TYPE_THREE=3]="CARD_TYPE_THREE",e[e.CARD_TYPE_ONELINE=4]="CARD_TYPE_ONELINE",e[e.CARD_TYPE_TWOLINE=5]="CARD_TYPE_TWOLINE",e[e.CARD_TYPE_THREELINE=6]="CARD_TYPE_THREELINE",e[e.CARD_TYPE_THREEWITHONE=7]="CARD_TYPE_THREEWITHONE",e[e.CARD_TYPE_THREEWITHTWO=8]="CARD_TYPE_THREEWITHTWO",e[e.CARD_TYPE_PLANEWITHONE=9]="CARD_TYPE_PLANEWITHONE",e[e.CARD_TYPE_PLANEWITHWING=10]="CARD_TYPE_PLANEWITHWING",e[e.CARD_TYPE_FOURWITHONE=11]="CARD_TYPE_FOURWITHONE",e[e.CARD_TYPE_FOURWITHTWO=12]="CARD_TYPE_FOURWITHTWO",e[e.CARD_TYPE_BOMB=13]="CARD_TYPE_BOMB",e[e.CARD_TYPE_ROCKET=14]="CARD_TYPE_ROCKET"}(a.DdzCardsType||(a.DdzCardsType={})),cc._RF.pop()},{}],DdzMsgType:[function(e,t,a){"use strict";cc._RF.push(t,"c7bfdBvbK1GYZxf6qTMRyNf","DdzMsgType"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){}return e.DdzContinueGameEvent="DdzContinueGameEvent",e.DdzPushOtherInfoRespEvent="DdzPushOtherInfoRespEvent",e.DdzPushDeelCardRespEvent="DdzPushDeelCardRespEvent",e.DdzGmCardsRespEvent="DdzGmCardsRespEvent",e.DdzPushLandlordRespEvent="DdzPushLandlordRespEvent",e.DdzCallLordRespEvent="DdzCallLordRespEvent",e.DdzPushThreeCardsRespEvent="DdzPushThreeCardsResp",e.DdzPushMyTurnRespEvent="DdzPushMyTurnRespEvent",e.DdzHandleCardRespEvent="DdzHandleCardRespEvent",e.DdzAutoActionPushRespEvent="DdzAutoActionPushRespEvent",e.DdzRestoreRespEvent="DdzRestoreRespEvent",e.DdzPushGameOverRespEvent="DdzPushGameOverRespEvent",e.DdzPushOutBtnState="DdzPushOutBtnState",e.DdzCardTypeAnim="DdzCardTypeAnim",e.DdzPlayDizhuCardsAnim="DdzPlayDizhuCardsAnim",e.DdzUpdateGameBet="DdzUpdateGameBet",e.DdzShowYaoBuQiAnim="DdzShowYaoBuQiAnim",e.DdzSetNaozhongPosX="DdzSetNaozhongPosX",e.DdzShowNaoZhongTips="DdzShowNaoZhongTips",e.DdzNaozhongTimeOut="DdzNaozhongTimeOut",e.DdzPushOtherInfoRP="DdzPushOtherInfoRP",e.DdzPushDeelCardRP="DdzPushDeelCardRP",e.DdzGmCardsRP="DdzGmCardsRP",e.DdzPushLandlordRP="DdzPushLandlordRP",e.DdzCallLordRP="DdzCallLordRP",e.DdzPushThreeCardsRP="DdzPushThreeCardsRP",e.DdzPushMyTurnRP="DdzPushMyTurnRP",e.DdzHandleCardRP="DdzHandleCardRP",e.DdzAutoActionPushRP="DdzAutoActionPushRP",e.DdzRestoreRP="DdzRestoreRP",e.DdzPushGameOverRP="DdzPushGameOverRP",e}();a.default=n,cc._RF.pop()},{}],GM197001001:[function(e,t,a){"use strict";cc._RF.push(t,"da2d9j2IrFCcov+AWhFMS3b","GM197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i],t)}(base.GM));a.default=d,cc._RF.pop()},{}],GameEventNames197001001:[function(e,t,a){"use strict";cc._RF.push(t,"4c859If3g1OypOjJw0+IiBB","GameEventNames197001001"),Object.defineProperty(a,"__esModule",{value:!0}),a.GameEventNames197001001=void 0,function(e){e.Game_Msg_User_Operation="Game_Msg_User_Operation",e.Game_Msg_LandOperationResp="Game_Msg_LandOperationResp",e.Game_Msg_NextGame="Game_Msg_NextGame",e.Game_Msg_IsPlay="Game_Msg_IsPlay",e.Game_Msg_OnClick_TiShi="Game_Msg_OnClick_TiShi",e.Game_Msg_IS_TUOGUAN="Game_Msg_IS_TUOGUAN",e.Game_Msg_Clock_endCallBack="Game_Msg_Clock_endCallBack",e.Game_Msg_onEventResultClose="Game_Msg_onEventResultClose",e.Game_Msg_STATE="Game_Msg_STATE",e.Game_Msg_gameStateHandler="Game_Msg_gameStateHandler",e.Game_Msg_scrambleBanker="Game_Msg_scrambleBanker",e.canrobStateNotify="canrobStateNotify"}(a.GameEventNames197001001||(a.GameEventNames197001001={})),cc._RF.pop()},{}],GameResult197001001:[function(e,t,a){"use strict";cc._RF.push(t,"75826NnkmdHe7xxZj2m8LjR","GameResult197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../evnet/GameEventNames197001001"),i=e("../../global/CommonEnum197001001"),d=e("../../global/Global197001001"),l=cc._decorator,c=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_win=null,t.ui_lose=null,t.ui_playerItem=[],t.ui_titles=[],t.ui_closeBtn=null,t.ui_nextBtn=null,t.ui_infoPanel=null,t._slefIsbanker=!0,t}return r(t,e),t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.ui_win.active=!1,this.ui_lose.active=!1,this._slefIsbanker=d.default.getInstance().wChairID==d.default.getInstance().bankerPos,this.initUI()},t.prototype.initUI=function(){var e=this;this.ui_infoPanel.active=!1,this.ui_closeBtn.active=!1,this.ui_nextBtn.active=!1;var t,a;a=(t=d.default.getInstance().wChairID==d.default.getInstance().bankerPos)?i.SOUNDS_NAME.MusicEx_Win:i.SOUNDS_NAME.MusicEx_Lose,base.SoundManager.getInstance().stopAllMusic(),base.SoundManager.getInstance().playEffect(a,!1,i.BUNDLENAME.GAME,null,function(){var e=base.MathUtil.getIntRandom(0,1);base.SoundManager.getInstance().playMusic(0==e?i.SOUNDS_NAME.MusicEx_Normal:i.SOUNDS_NAME.MusicEx_Normal2,!0,i.BUNDLENAME.GAME)}),t?this.playWinAni():this.playLoseAni(),cc.tween(this.ui_titles[0]).delay(0).to(.2,{scale:1.2}).to(.2,{scale:1}).start(),cc.tween(this.ui_titles[1]).delay(.4).to(.2,{scale:1.2}).to(.2,{scale:1}).start(),cc.tween(this.ui_titles[2]).delay(.8).to(.2,{scale:1.2}).to(.2,{scale:1}).call(function(){e.ui_infoPanel.active=!0,e.ui_closeBtn.active=!0,e.ui_nextBtn.active=!0}).start(),this.ui_titles[0].getChildByName("ui_wangzhaLabel").getComponent(cc.Label).string="1",this.ui_titles[1].getChildByName("ui_zhadangLabel").getComponent(cc.Label).string="66",this.ui_titles[2].getChildByName("ui_chuntianLabel").getComponent(cc.Label).string="1";for(var n=d.default.getInstance().mUserList,r=0;r<n.length;r++){var o=d.default.getInstance().getViewChairID(r);this.ui_playerItem[o].getChildByName("ui_userName").getComponent(cc.Label).string=n[r].userName}Number(666),d.default.getInstance().bankerScore},t.prototype.playWinAni=function(){this.ui_win.active=!0;var e=this.ui_win.getChildByName("win").getComponent(sp.Skeleton),t=base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH?"zh_":"en_";t+=this._slefIsbanker?"d":"n",this.setSpineAnimation(e,t,!0)},t.prototype.playLoseAni=function(){this.ui_lose.active=!0;var e=this.ui_lose.getChildByName("lose").getComponent(sp.Skeleton),t=base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH?"lose_idle_zh":"lose_idle_en";t+=this._slefIsbanker?"2":"1",this.setSpineAnimation(e,t,!0)},t.prototype.onClickNextGame=function(){base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_NextGame),base.GUI.getInstance().close(this)},t.prototype.onClickClose=function(){base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_onEventResultClose),base.GUI.getInstance().close(this)},t.prototype.onClose=function(){},t.prototype.setSpineAnimation=function(e,t,a,n){e.setAnimation(0,t,a)&&!a&&e.setCompleteListener(function(){e.setCompleteListener(null),n&&n()})},o([u(cc.Node)],t.prototype,"ui_win",void 0),o([u(cc.Node)],t.prototype,"ui_lose",void 0),o([u(cc.Node)],t.prototype,"ui_playerItem",void 0),o([u(cc.Node)],t.prototype,"ui_titles",void 0),o([u(cc.Node)],t.prototype,"ui_closeBtn",void 0),o([u(cc.Node)],t.prototype,"ui_nextBtn",void 0),o([u(cc.Node)],t.prototype,"ui_infoPanel",void 0),o([c],t)}(base.PopupModel);a.default=h,cc._RF.pop()},{"../../evnet/GameEventNames197001001":"GameEventNames197001001","../../global/CommonEnum197001001":"CommonEnum197001001","../../global/Global197001001":"Global197001001"}],GameRule197001001:[function(e,t,a){"use strict";cc._RF.push(t,"e5384zImCdC5o+OIPCtYmQz","GameRule197001001"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){}return e.typeJudge=function(e){var t=e.length;switch(e.sort(function(e,t){return t.val-e.val}),t){case 1:return{cardKind:this.ONE,val:e[0].val,size:t};case 2:return this.isPairs(e)?{cardKind:this.PAIRS,val:e[0].val,size:t}:this.isKingBomb(e)?{cardKind:this.KING_BOMB,val:e[0].val,size:t}:null;case 3:return this.isThree(e)?{cardKind:this.THREE,val:e[0].val,size:t}:null;case 4:return this.isThreeWithOne(e)?{cardKind:this.THREE_WITH_ONE,val:this.getMaxVal(e,3),size:t}:this.isBomb(e)?{cardKind:this.BOMB,val:e[0].val,size:t}:null;default:return this.isProgression(e)?{cardKind:this.PROGRESSION,val:e[0].val,size:t}:this.isProgressionPairs(e)?{cardKind:this.PROGRESSION_PAIRS,val:e[0].val,size:t}:this.isThreeWithPairs(e)?{cardKind:this.THREE_WITH_PAIRS,val:this.getMaxVal(e,3),size:t}:this.isPlane(e)?{cardKind:this.PLANE,val:this.getMaxVal(e,3),size:t}:this.isPlaneWithOne(e)?{cardKind:this.PLANE_WITH_ONE,val:this.getMaxVal(e,3),size:t}:this.isPlaneWithPairs(e)?{cardKind:this.PLANE_WITH_PAIRS,val:this.getMaxVal(e,3),size:t}:this.isFourWithTwo(e)?{cardKind:this.FOUR_WITH_TWO,val:this.getMaxVal(e,4),size:t}:this.isFourWithPairs(e)?{cardKind:this.FOUR_WITH_TWO_PAIRS,val:this.getMaxVal(e,4),size:t}:null}},e.isPairs=function(e){return 2==e.length&&e[0].val===e[1].val},e.isThree=function(e){return 3==e.length&&e[0].val===e[1].val&&e[1].val===e[2].val},e.isThreeWithOne=function(e){if(4!=e.length)return!1;var t=this.valCount(e);return 2===t.length&&(3===t[0].count||3===t[1].count)},e.isThreeWithPairs=function(e){if(5!=e.length)return!1;var t=this.valCount(e);return 2===t.length&&(3===t[0].count||3===t[1].count)},e.isProgression=function(e){if(e.length<5||e.length>12)return!1;for(var t=e,a=0;a<t.length;a++)if(13==t[a].point||14==t[a].point||15==t[a].point)return!1;for(a=0;a<t.length&&a!==t.length-1;a++){var n=Number(t[a].point),r=Number(t[a+1].point);if(1!=Math.abs(n-r))return!1}return!0},e.isProgressionPairs=function(e){if(e.length<6||e.length>20||e.length%2)return!1;for(var t=0;t<e.length;t++)if(14==e[t].point||15==e[t].point||13==e[t].point)return!1;var a={};for(t=0;t<e.length;t++)a.hasOwnProperty(e[t].point)?a[e[t].point]++:a[e[t].point]=1;for(var n in a)if(2!=a[n])return!1;var r=Object.keys(a);if(r.length<3)return!1;for(t=0;t<r.length&&t!==r.length-1;t++){var o=Number(r[t]),s=Number(r[t+1]);if(1!=Math.abs(o-s))return!1}return!0},e.isPlane=function(e){if(e.length<6||e.length%3!=0||15===e[0].val)return!1;for(var t=0;t<e.length;t+=3)if(t!=e.length-3&&(e[t].val!=e[t+1].val||e[t].val!=e[t+2].val||e[t].val-1!=e[t+3].val))return!1;return!0},e.isPlaneWithOne=function(e){if(e.length<8||e.length%4!=0)return!1;for(var t=this.valCount(e),a=[],n=e.length/4,r=0;r<t.length;r++)3==t[r].count&&a.push(t[r]);if(a.length!=n||15===a[0].val)return!1;for(var o=0;o<a.length;o++)if(o!=a.length-1&&a[o].val-1!=a[o+1].val)return!1;return!0},e.isPlaneWithPairs=function(e){if(e.length<10||e.length%5!=0)return!1;for(var t=this.valCount(e),a=[],n=[],r=e.length/5,o=0;o<t.length;o++)if(3==t[o].count)a.push(t[o]);else{if(2!=t[o].count)return!1;n.push(t[o])}if(a.length!=r||n.length!=r||15===a[0].val)return!1;for(var s=0;s<a.length;s++)if(s!=a.length-1&&a[s].val-1!=a[s+1].val)return!1;return!0},e.isFourWithTwo=function(e){var t=this.valCount(e);if(6!=e.length||t.length>3)return!1;for(var a=0;a<t.length;a++)if(4===t[a].count)return!0;return!1},e.isFourWithPairs=function(e){if(8!=e.length)return!1;var t=this.valCount(e);if(3!=t.length)return!1;for(var a=0;a<t.length;a++)if(4!=t[a].count&&2!=t[a].count)return!1;return!0},e.isBomb=function(e){return 4===e.length&&e[0].val===e[1].val&&e[0].val===e[2].val&&e[0].val===e[3].val},e.isKingBomb=function(e){return 2===e.length&&5==e[0].suit&&5==e[1].suit},e.random=function(e,t){var a=(t=null==t?1:t)-(e=null==e?0:e)+1;return Math.floor(Math.random()*a+e)},e.valCount=function(e){for(var t=[],a=function(e,t){for(var a=0;a<e.length;a++)if(e[a].val==t)return void e[a].count++;e.push({val:t,count:1})},n=0;n<e.length;n++)a(t,e[n].val);return t},e.getMaxVal=function(e,t){for(var a=this.valCount(e),n=0,r=0;r<a.length;r++)a[r].count===t&&a[r].val>n&&(n=a[r].val);return n},e.ONE=1,e.PAIRS=2,e.THREE=3,e.THREE_WITH_ONE=4,e.THREE_WITH_PAIRS=5,e.PROGRESSION=6,e.PROGRESSION_PAIRS=7,e.PLANE=8,e.PLANE_WITH_ONE=9,e.PLANE_WITH_PAIRS=10,e.FOUR_WITH_TWO=11,e.FOUR_WITH_TWO_PAIRS=12,e.BOMB=13,e.KING_BOMB=14,e}();a.default=n,cc._RF.pop()},{}],Global197001001:[function(e,t,a){"use strict";cc._RF.push(t,"a09c3lW7YRG+6zHaShmNFgx","Global197001001"),Object.defineProperty(a,"__esModule",{value:!0});var n=e("../evnet/GameEventNames197001001"),r=e("../framework/Utils197001001"),o=e("./CommonEnum197001001"),s=function(){function e(){this.bankerPos=0,this.bankerScore=0,this.isFrontDesk=!0,this.isRueult=!1,this.headAtlas=null,this.cardsPokerAtlas=null,this.wChairID=0,this.mUserList=new Array,this.selfPoker=new Array,this.leaveType=o.LeaveType197001001.ToHall,this.mHandCard=new Array,this.mLandlordCard=new Array,this.mLallLandlordScore=0,this.lastCards=new Array,this.playCardsArr=new Array,this.playerRemainingNum=new Array,this.isTuoGuan=!1,this.isCardTouch=!1,this._stage=o.GameState197001001.wait,this._isPlay=!1}return e.getInstance=function(){return this._instance||(this._instance=new e,this._instance.init()),this._instance},e.prototype.init=function(){var e=this;cc.game.on(cc.game.EVENT_SHOW,function(){e.isFrontDesk=!0}),cc.game.on(cc.game.EVENT_HIDE,function(){e.isFrontDesk=!1})},e.prototype.reset=function(){this.wChairID=0,this.mUserList=new Array,this.mHandCard=new Array,this.mLandlordCard=new Array,this.mLallLandlordScore=0,this.isPlay=!1,this.lastCards=new Array,this.playCardsArr=new Array,this.isTuoGuan=!1,this.playerRemainingNum=[],this.isCardTouch=!1},Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},set:function(e){this._stage=e,base.MessageManager.getInstance().dispatchEvent(n.GameEventNames197001001.Game_Msg_STATE,this._stage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlay",{get:function(){return this._isPlay},set:function(e){this._isPlay=e,base.MessageManager.getInstance().dispatchEvent(n.GameEventNames197001001.Game_Msg_IsPlay,this._isPlay)},enumerable:!1,configurable:!0}),e.prototype.updateUserList=function(e,t){for(var a=-1,n=0;n<this.mUserList.length;n++)this.mUserList[n].pos!=e||(a=n);-1!=a&&(this.mUserList[a]=t)},e.prototype.getMyBringScores=function(){return this.getUserInfo(this.wChairID).bringScores},e.prototype.getUserInfoChairID=function(e){for(var t=0;t<this.mUserList.length;t++)if(this.mUserList[t].userId==e)return this.mUserList[t].pos;return null},e.prototype.getUserInfo=function(e){for(var t=0;t<this.mUserList.length;t++)if(this.mUserList[t].pos==e)return this.mUserList[t];return null},e.prototype.getViewChairID=function(e){return e},e.prototype.getUserSex=function(e){return this.getUserInfo(e).avatar%2!=0},e.prototype.updateHandCard=function(e,t){if(t){var a=r.default.clone(this.mHandCard),n=r.default.clone(e);this.mHandCard=a.concat(n)}else{a=r.default.clone(this.mHandCard);for(var o=0;o<e.length;o++)a.splice(a.indexOf(e[o]),1);this.mHandCard=a}},e.prototype.getRemainingNum=function(e){if(0==this.playerRemainingNum.length)return 0;for(var t=0;t<this.playerRemainingNum.length;t++)if(e==this.playerRemainingNum[t].pos)return this.playerRemainingNum[t].card.length;return 0},e.prototype.getUserID=function(e){for(var t=0;t<this.mUserList.length;t++)if(this.mUserList[t].pos==e)return this.mUserList[t].userId},e._instance=null,e}();a.default=s,cc._RF.pop()},{"../evnet/GameEventNames197001001":"GameEventNames197001001","../framework/Utils197001001":"Utils197001001","./CommonEnum197001001":"CommonEnum197001001"}],Hall197001001:[function(e,t,a){"use strict";cc._RF.push(t,"b5439VrYJBCYKbdmfsjRxSA","Hall197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../common/MController197001001"),i=e("../global/CommonEnum197001001"),d=e("../global/UIConfigData197001001"),l=cc._decorator,c=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_btnRoom=[],t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),this.resize(),cc.find("ui_tioRight/ui_btnHelp",this.node).on("click",this.onClick,this),cc.find("ui_tioRight/ui_btnSetting",this.node).on("click",this.onClick,this),cc.find("ui_tioRight/ui_btnBack",this.node).on("click",this.onClick,this),cc.find("ui_tioRight/ui_btnReport",this.node).on("click",this.onClick,this);for(var t=0;t<4;t++)this.ui_btnRoom[t].active=!1},t.prototype.onDestroy=function(){this.ui_btnRoom[0].off(cc.Node.EventType.TOUCH_START,this.onClickStartGame1,this),this.ui_btnRoom[1].off(cc.Node.EventType.TOUCH_START,this.onClickStartGame2,this),this.ui_btnRoom[2].off(cc.Node.EventType.TOUCH_START,this.onClickStartGame3,this),this.ui_btnRoom[3].off(cc.Node.EventType.TOUCH_START,this.onClickStartGame4,this),e.prototype.onDestroy&&e.prototype.onDestroy.call(this)},t.prototype.roomInfoResp=function(){for(var e=[{isLocked:!1,roomType:1,baseScores:.1,minEnterScores:5},{isLocked:!1,roomType:2,baseScores:1,minEnterScores:50},{isLocked:!0,roomType:3,baseScores:5,minEnterScores:150},{isLocked:!0,roomType:4,baseScores:10,minEnterScores:500}],t=0;t<4;t++){this.ui_btnRoom[t].active=!0;var a=e[t].roomType;1==a?(this.ui_btnRoom[0].getChildByName("ui_img").active=e[t].isLocked,this.ui_btnRoom[0].getChildByName("ui_ani").active=!e[t].isLocked,e[t].isLocked||this.ui_btnRoom[0].on(cc.Node.EventType.TOUCH_START,this.onClickStartGame1,this)):2==a?(this.ui_btnRoom[1].getChildByName("ui_ani").active=!e[t].isLocked,e[t].isLocked||this.ui_btnRoom[1].on(cc.Node.EventType.TOUCH_START,this.onClickStartGame2,this)):3==a?(this.ui_btnRoom[2].getChildByName("ui_ani").active=!e[t].isLocked,e[t].isLocked||this.ui_btnRoom[2].on(cc.Node.EventType.TOUCH_START,this.onClickStartGame3,this),this.ui_btnRoom[2].getChildByName("ui_mask").active=e[t].isLocked):4==a&&(this.ui_btnRoom[3].getChildByName("ui_img").active=e[t].isLocked,this.ui_btnRoom[3].getChildByName("ui_ani").active=!e[t].isLocked,e[t].isLocked||this.ui_btnRoom[3].on(cc.Node.EventType.TOUCH_START,this.onClickStartGame4,this),this.ui_btnRoom[3].getChildByName("ui_mask").active=e[t].isLocked),this.ui_btnRoom[t].getChildByName("antes").getComponent(cc.Label).string=base.LanguageManager.getInstance().getDstStr("197001001_tips_14",i.BUNDLENAME.GAME)+e[t].baseScores.toFixed(2),this.ui_btnRoom[t].getChildByName("access").getComponent(cc.Label).string=base.LanguageManager.getInstance().getDstStr("197001001_tips_13",i.BUNDLENAME.GAME)+":"+e[t].minEnterScores.toFixed(2)}},t.prototype.start=function(){e.prototype.start&&e.prototype.start.call(this),base.SoundManager.getInstance().playMusic(i.SOUNDS_NAME.MusicEx_Welcome,!0,i.BUNDLENAME.GAME),this.roomInfoResp()},t.prototype.onClick=function(e){var t=e.node.name;switch(base.SoundManager.getInstance().playEffect(i.SOUNDS_NAME.click,!1,i.BUNDLENAME.GAME),t){case"ui_btnHelp":base.GUI.getInstance().open(d.UIID197001001.UI_HELP,i.BUNDLENAME.GAME);break;case"ui_btnSetting":base.GUI.getInstance().open(d.UIID197001001.UI_SETTING,i.BUNDLENAME.GAME)}},t.prototype.onQuickStart=function(){var e=this;base.GUI.getInstance().openAsync(d.UIID197001001.UI_ROOM,i.BUNDLENAME.GAME).then(function(){base.GUI.getInstance().close(e)})},t.prototype.onClickStartGame1=function(e){var t=this.ui_btnRoom[0].convertToNodeSpaceAR(e.getLocation()),a=this.ui_btnRoom[0].getComponent(cc.Collider);a&&(cc.Intersection.pointInPolygon(t,a.world.points)?this.onQuickStart(1):e.target._touchListener.setSwallowTouches(!1))},t.prototype.onClickStartGame2=function(e){var t=this.ui_btnRoom[1].convertToNodeSpaceAR(e.getLocation()),a=this.ui_btnRoom[1].getComponent(cc.Collider);a&&(cc.Intersection.pointInPolygon(t,a.world.points)?this.onQuickStart(2):e.target._touchListener.setSwallowTouches(!1))},t.prototype.onClickStartGame3=function(e){var t=this.ui_btnRoom[2].convertToNodeSpaceAR(e.getLocation()),a=this.ui_btnRoom[2].getComponent(cc.Collider);a&&(cc.Intersection.pointInPolygon(t,a.world.points)?this.onQuickStart(3):e.target._touchListener.setSwallowTouches(!1))},t.prototype.onClickStartGame4=function(e){var t=this.ui_btnRoom[3].convertToNodeSpaceAR(e.getLocation()),a=this.ui_btnRoom[3].getComponent(cc.Collider);a&&(cc.Intersection.pointInPolygon(t,a.world.points)?this.onQuickStart(4):e.target._touchListener.setSwallowTouches(!1))},t.prototype.layoutLandscape=function(){e.prototype.layoutLandscape.call(this),this.node.getComponent(s.default).stateIndex=0},t.prototype.layoutPortrait=function(){e.prototype.layoutPortrait.call(this),this.node.getComponent(s.default).stateIndex=1},o([u(cc.Node)],t.prototype,"ui_btnRoom",void 0),o([c],t)}(base.MainViewModel);a.default=h,cc._RF.pop()},{"../common/MController197001001":"MController197001001","../global/CommonEnum197001001":"CommonEnum197001001","../global/UIConfigData197001001":"UIConfigData197001001"}],HandCard197001001:[function(e,t,a){"use strict";cc._RF.push(t,"df753kQD2FFx5AdbMHL4JfF","HandCard197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../evnet/GameEventNames197001001"),i=e("../../framework/AiLogic197001001"),d=e("../../framework/Cards/DdzCard"),l=e("../../framework/Cards/DdzCardCfg"),c=e("../../framework/Cards/DdzCardItem"),u=e("../../framework/Cards/DdzCardUtils"),h=e("../../framework/Const/DdzConst"),p=e("../../framework/GameRule197001001"),_=e("../../framework/Utils197001001"),f=e("../../global/CommonEnum197001001"),g=e("../../global/Global197001001"),v=cc._decorator,m=v.ccclass,C=v.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_cardAniNode=null,t.cardItemPerfab=null,t.m_handCardNode=null,t.ui_sendCardPos=[],t.m_handDdzCardItems=[],t.m_handCardVals=[],t.StandCardsArr=[],t._beginPos=null,t.allCards={},t.startTouchInPoker=!1,t._promptIndex=0,t.m_logic=null,t._promptList=null,t.m_HandCardPosY=0,t.showHandCardsAniIndex=-1,t}return r(t,e),t.prototype.onLoad=function(){base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.Game_Msg_OnClick_TiShi,this.onEventClickTiShi,this)},t.prototype.onDestroy=function(){this.unRegisterEvent(),base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.Game_Msg_OnClick_TiShi,this.onEventClickTiShi,this)},t.prototype.start=function(){this.registerEvent(),this.creatAPackCard()},t.prototype.reset=function(){for(var e in this.m_HandCardPosY=this.ui_sendCardPos[0].y,this.node.stopAllActions(),this.StandCardsArr=[],this.m_handDdzCardItems=[],this.m_handCardNode.children.forEach(function(e){e.removeFromParent()}),this.ui_cardAniNode.destroyAllChildren(),this.allCards)this.allCards[e].reset(),this.allCards[e].node.removeFromParent();this.m_handCardVals=[],this.m_handDdzCardItems.forEach(function(e){e.node.removeFromParent()}),this.m_handDdzCardItems.length=0,this.m_logic=null,this._promptList=null},t.prototype.updatePromptList=function(){for(var e=_.default.clone(g.default.getInstance().lastCards),t=[],a=0;a<e.length;a++){var n=(new d.default).create(e[a]);t.push(n)}var r=p.default.typeJudge(t);return this._promptList=this.m_logic.prompt(r),this._promptIndex=0,cc.log("\u4e0a\u8f6e\u51fa\u724c",e),cc.log("winCards",r),cc.log("\u7b97\u51fa\u7684\u724c",this._promptList),this._promptList},t.prototype.onEventClickTiShi=function(){this._promptList&&this.showTipsCard()},t.prototype.pushDizhuCard=function(e,t){for(var a in void 0===t&&(t=g.default.getInstance().isFrontDesk),t&&(t=this.node.active),e)if(!(e[a]<=0)){var n=(new d.default).create(e[a]);this.m_handCardVals.push(n)}var r=g.default.getInstance().bankerPos==g.default.getInstance().wChairID;this.m_logic.updateCards(this.m_handCardVals);for(var o=this.m_handCardVals.length,s=u.default.getHandCardsMargin(o),i=o-1;i>=o-3;i--){var l=this.getCardById(this.m_handCardVals[i].value);null!=l&&(this.m_handDdzCardItems.push(l),l.node.active=!1,l.showDizhuFlag(!1),l.node.parent=this.m_handCardNode)}for(var c=u.default.sortCardsDown(this.m_handDdzCardItems),h=c.length-1;h>=0;h--){var p=s*o/2-(o-h)*s+100,_=c[h];null!=_&&(_.setCardPos(cc.v2(p,this.m_HandCardPosY)),_.node.active=!0,_.node.zIndex=h,h==c.length-1&&_.showDizhuFlag(r),f(_.cardId)&&(t?(_.node.y=this.m_HandCardPosY+25,cc.tween(_.node).delay(.3).to(.4,{y:this.m_HandCardPosY}).start()):_.node.y=this.m_HandCardPosY))}function f(t){for(var a=0;a<e.length;a++)if(t==e[a])return!0;return!1}},t.prototype.updateSelfHandCardNodes=function(){var e=g.default.getInstance().bankerPos==g.default.getInstance().wChairID;this.m_handCardNode.removeAllChildren();for(var t=this.m_handCardVals.length,a=u.default.sortCardsDown(this.m_handDdzCardItems),n=u.default.getHandCardsMargin(t),r=u.default.getHandCardsOffset(t),o=a.length-1;o>=0;o--){var s=r+(o-(t-1)/2)*n,i=a[o];null!=i&&(i.showDizhuFlag(!1),i.setCardPos(cc.v2(s,this.m_HandCardPosY)),this.m_handCardNode.addChild(i.node,o),o==a.length-1&&i.showDizhuFlag(e))}},t.prototype.pushHandCards=function(e){var t=this;void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active);var a=g.default.getInstance().mHandCard;for(var n in a)if(!(a[n]<=0)){var r=(new d.default).create(a[n]);this.m_handCardVals.push(r)}this.m_logic=new i.default(this.m_handCardVals,g.default.getInstance().bankerPos==g.default.getInstance().wChairID),e?this.playSendCardAni(function(){t.playSendCardAni2(),t.showHandCards(e)}):this.showHandCards(e)},t.prototype.playSendCardAni2=function(){for(var e=this,t=0;t<this.ui_cardAniNode.children.length;t++)(function(t,a){cc.tween(t).to(.06*a,{position:_.default.convetOtherNodeSpaceAR(e.ui_sendCardPos[a%3],t.parent)}).call(function(){t.destroy()}).start()})(this.ui_cardAniNode.children[t],t)},t.prototype.playSendCardAni=function(e){this.ui_cardAniNode.destroyAllChildren(),base.SoundManager.getInstance().playEffect(f.SOUNDS_NAME.DealFold,!1,f.BUNDLENAME.GAME);for(var t=0;t<17;t++){var a=new cc.Node;a.scale=.7,a.addComponent(cc.Sprite).spriteFrame=g.default.getInstance().cardsPokerAtlas.getSpriteFrame("chess_poker_0_5"),this.ui_cardAniNode.addChild(a),a.zIndex=t;var n=17*h.default.CARD_MARGIN/2-17*h.default.CARD_MARGIN+100;a.setPosition(cc.v2(n,0)),function(t,a,n){cc.tween(t).to(.2,{x:a}).delay(.3).to(.2,{x:0}).call(function(){16==n&&e&&e()}).start()}(a,17*h.default.CARD_MARGIN/2-(17-t)*h.default.CARD_MARGIN+100,t)}},t.prototype.showTipsCard=function(){if(this.node.active){this.setStandCardDown();var e=this._promptList[this._promptIndex];g.default.getInstance().playCardsArr=[];for(var t=0;t<e.length;t++){var a=e[t],n=this.getCardById(a.value);n.selected=!0,this.setSelectCardsPos(n.node,!0),this.StandCardsArr.push(n),g.default.getInstance().playCardsArr.push(a.value)}this._promptIndex++,this._promptIndex>this._promptList.length-1&&(this._promptIndex=0),g.default.getInstance().isPlay=!0}},t.prototype.updateHandCardVals=function(e){for(var t in e)if(!(e[t]<=0)){for(var a=0;a<this.m_handCardVals.length;a++)this.m_handCardVals[a].value==e[t]&&this.m_handCardVals.splice(a,1);for(var n=0;n<this.m_handDdzCardItems.length;n++)this.m_handDdzCardItems[n].cardId==e[t]&&this.m_handDdzCardItems.splice(n,1)}this.m_logic.updateCards(this.m_handCardVals),this.updateSelfHandCardNodes()},t.prototype.showHandCards=function(e){void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active),e&&(e=g.default.getInstance().isFrontDesk);for(var t=this.m_handCardVals.length,a=u.default.getHandCardsMargin(t),n=0;n<t;n++){var r=this.getCardById(this.m_handCardVals[n].value);this.m_handDdzCardItems.push(r),r.node.parent=this.m_handCardNode,r.node.zIndex=n,r.node.active=!1;var o=a*t/2-(t-n)*a+100;r.setCardPos(cc.v2(o,this.m_HandCardPosY))}if(e)this.showHandCardsAniIndex=-1,this.schedule(this.showHandCardsAni3,.2);else for(var s=u.default.sortCardsDown(this.m_handDdzCardItems),i=s.length-1;i>=0;i--){o=a*t/2-(t-i)*a+100;var d=s[i];null!=d&&(d.setCardPos(cc.v2(o,this.m_HandCardPosY)),d.node.zIndex=i,d.node.active=!0)}},t.prototype.showHandCardsAni3=function(){var e=this;if(g.default.getInstance().isFrontDesk)if(this.showHandCardsAniIndex++,this.showHandCardsAniIndex>=5){this.unschedule(this.showHandCardsAni3);var t=u.default.getHandCardsMargin(this.m_handDdzCardItems.length),a=u.default.sortCardsDown(this.m_handDdzCardItems),n=this.m_handCardVals.length;for(l=a.length-1;l>=0;l--)(function(r){var o=t*n/2-(n-r)*t+100;cc.tween(a[r].node).to(.2,{x:0}).call(function(){for(var e=a.length-1;e>=0;e--){var t=a[e];null!=t&&(t.node.zIndex=e,t.node.active=!0)}}).delay(.2).to(.2,{x:o}).call(function(){0==r&&e.showBankerCard()}).start()})(l)}else{var r=[];0==this.showHandCardsAniIndex?r=[5,6,7,8]:1==this.showHandCardsAniIndex?r=[5,6,7,8,9,10,11,12]:2==this.showHandCardsAniIndex?r=[3,4,5,6,7,8,9,10,11,12,13,14]:4==this.showHandCardsAniIndex&&(r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]);for(var o=0;o<r.length;o++)this.m_handDdzCardItems[r[o]].node.active=!0}else{this.unschedule(this.showHandCardsAni3);for(var s=this.m_handCardVals.length,i=u.default.getHandCardsMargin(s),d=u.default.sortCardsDown(this.m_handDdzCardItems),l=d.length-1;l>=0;l--){var c=i*s/2-(s-l)*i+100,h=d[l];null!=h&&(h.setCardPos(cc.v2(c,this.m_HandCardPosY)),h.node.zIndex=l,h.node.active=!0)}}},t.prototype.getCardById=function(e){return this.allCards[e]?this.allCards[e]:(this.allCards[e]=this.createNewCards(e),this.allCards[e])},t.prototype.registerEvent=function(){this.m_handCardNode.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.m_handCardNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.m_handCardNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.m_handCardNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.unRegisterEvent=function(){this.m_handCardNode.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.m_handCardNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.m_handCardNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.m_handCardNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.onTouchBegan=function(e){if(!g.default.getInstance().isCardTouch)return!1;var t=e.getLocation(),a=this._beginPos=this.m_handCardNode.convertToNodeSpaceAR(t);this.startTouchInPoker=!1;for(var n=this.m_handDdzCardItems,r=n.length-1;r>=0;r--)if(n[r].node.getBoundingBox().contains(a))return this.startTouchInPoker=!0,n[r].isChoosed=!0,!0;return!0},t.prototype.onTouchMove=function(e){if(!g.default.getInstance().isCardTouch)return!1;if(!this.startTouchInPoker)return!1;for(var t=e.getLocation(),a=this.m_handCardNode.convertToNodeSpaceAR(t),n=Math.max(1,Math.abs(a.x-a.x)),r=Math.max(1,Math.abs(a.y-a.y)),o=Math.min(a.x,a.x),s=Math.min(a.y,a.y),i=cc.rect(o,s,n,r),d=this.m_handDdzCardItems,l=this.m_handDdzCardItems.length,c=l-1;c>=0;c--)if((m=d[c]).node.getBoundingBox().containsRect(i))return m.isChoosed=!0,!0;var u=this._beginPos,p=u.x<a.x?u:a,_=Math.abs(u.x-a.x),f=Math.abs(u.y-a.y),v=cc.rect(p.x,p.y,_,f);for(c=l-1;c>=0;c--){var m=this.m_handDdzCardItems[c];cc.Intersection.rectRect(m.node.getBoundingBox(),v)?p.x-m.node.x>=h.default.CARD_MARGIN&&c!=l-1&&(m.isChoosed=!1):m.isChoosed=!1}return!0},t.prototype.onTouchEnded=function(){if(!g.default.getInstance().isCardTouch)return!1;if(!this.startTouchInPoker)return this.setStandCardDown(),!1;var e=this.m_handDdzCardItems;this.StandCardsArr=[];for(var t=0,a=0,n=e;a<n.length;a++){var r=n[a];r.isChoosed&&(r.selected=!r.selected,this.setSelectCardsPos(r.node,r.selected),r.selected&&t++),r.selected&&this.StandCardsArr.push(r),r.isChoosed=!1}return this.StandCardsArr=u.default.sortCardsUp(this.StandCardsArr),this.StandCardsArr.length>0?(t>5&&this.autoSelectedPoker(),this.checkClickCards()):g.default.getInstance().isPlay=!1,!0},t.prototype.onTouchCancel=function(){},t.prototype.autoSelectedPoker=function(){var e=l.default.getCardsType(this.StandCardsArr,!1,-1);if(!(e&&e>0)){var t=l.default.autoSelected(this.StandCardsArr);if((t=u.default.sortCardsUp(t)).length>0)for(var a=0,n=0;n<this.StandCardsArr.length;n++)a<t.length&&this.StandCardsArr[n].cardId==t[a].cardId?a++:(this.StandCardsArr[n].selected=!1,this.setSelectCardsPos(this.StandCardsArr[n].node,!1));this.StandCardsArr=[];for(var r=this.m_handDdzCardItems,o=0;o<r.length;o++)r[o].selected&&this.StandCardsArr.push(r[o]),this.setSelectCardsPos(r[o].node,r[o].selected)}},t.prototype.checkClickCards=function(){if(console.log("StandCardsArr=>",this.StandCardsArr),g.default.getInstance().playCardsArr=[],0!=this.StandCardsArr.length){var e=g.default.getInstance().lastCards,t=l.default.getCardsType(this.StandCardsArr,!1,-1);if(console.log("StandCardsArr type=>",t),g.default.getInstance().isPlay=!1,!t||t<=0)g.default.getInstance().isPlay=!1;else if(0!=e.length){var a=[];for(s=0;s<e.length;s++){var n=(new d.default).create(e[s]);a.push(n)}var r=l.default.getCardsType(a,!1,-1);console.log("StandCardsArr lastCardType=>",r);var o=[];for(var s in this.StandCardsArr)this.StandCardsArr[s].cardId<=0||(n=(new d.default).create(this.StandCardsArr[s].cardId),o.push(n));if(0==l.default.compareCards(o,a,r)){for(s=0;s<this.StandCardsArr.length;s++)g.default.getInstance().playCardsArr.push(this.StandCardsArr[s].cardId);g.default.getInstance().isPlay=!0}}else{for(s=0;s<this.StandCardsArr.length;s++)g.default.getInstance().playCardsArr.push(this.StandCardsArr[s].cardId);g.default.getInstance().isPlay=!0}}else g.default.getInstance().isPlay=!1},t.prototype.showBankerCard=function(e){void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active),this.ui_cardAniNode.destroyAllChildren();for(var t=[-180,0,180],a=0;a<3;a++){var n=new cc.Node;n.scale=.8,n.addComponent(cc.Sprite).spriteFrame=g.default.getInstance().cardsPokerAtlas.getSpriteFrame("chess_poker_0_5"),this.ui_cardAniNode.addChild(n),n.setPosition(cc.v2(0,-50)),e?function(e,a){cc.tween(e).to(.2,{x:t[a]}).start()}(n,a):n.x=t[a]}},t.prototype.openBankerCard=function(e,t){var a=this;if(void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active),!e||0==this.ui_cardAniNode.childrenCount)return this.ui_cardAniNode.destroyAllChildren(),void(t&&t());var n=g.default.getInstance().mLandlordCard,r=[new cc.Vec3(-90,40,0),new cc.Vec3(0,40,0),new cc.Vec3(90,40,0)],o=[];for(var s in n){var i=(new d.default).create(n[s]);o.push(i)}for(s=0;s<this.ui_cardAniNode.children.length;s++)(function(e,n){cc.tween(e).to(.2,{scaleX:-1}).call(function(){var t=u.default.getPokerSpName(o[n].suit,o[n].point);e.getComponent(cc.Sprite).spriteFrame=g.default.getInstance().cardsPokerAtlas.getSpriteFrame(t)}).to(.2,{scaleX:1}).to(.3,{position:r[n],scale:.6}).delay(.8).call(function(){n==a.ui_cardAniNode.childrenCount-1&&t&&t(),e.destroy()}).start()})(this.ui_cardAniNode.children[s],s)},t.prototype.createNewCards=function(e){var t=u.default.calculateSuit(e),a=u.default.calculatePoints(e);if(-1==t||-1==a)return cc.log("\u521b\u5efa\u724c\u4e3a\u7a7a"),null;var n=cc.instantiate(this.cardItemPerfab).getComponent(c.default),r=u.default.getPokerSpName(t,a),o=g.default.getInstance().cardsPokerAtlas.getSpriteFrame(r);return n.setCardSuitAndPoint(t,a),n.cardId=e,n.setSpriteFrameOfCard(o),n},t.prototype.setStandCardDown=function(){for(var e=0;e<this.StandCardsArr.length;e++){var t=this.StandCardsArr[e];t.isChoosed=!1,t.node.stopAllActions(),t.selected&&(t.selected=!1,this.setSelectCardsPos(t.node,!1))}this.StandCardsArr=[],g.default.getInstance().playCardsArr=[],g.default.getInstance().isPlay=!1},t.prototype.creatAPackCard=function(){var e=this;[17,18,19,20,21,22,23,24,25,26,27,28,29,33,34,35,36,37,38,39,40,41,42,43,44,45,49,50,51,52,53,54,55,56,57,58,59,60,61,65,66,67,68,69,70,71,72,73,74,75,76,77,94,95].forEach(function(t){e.allCards[t]=e.createNewCards(t)})},t.prototype.getPlayCardsArr=function(){var e=[],t=this.updatePromptList();if(!t||0==t.length)return e;for(var a=t[0],n=0;n<a.length;n++)e.push(a[n].value);return e},t.prototype.setSelectCardsPos=function(e,t){cc.Tween.stopAllByTarget(e),cc.Tween.stopAllByTarget(e);var a=t?this.m_HandCardPosY+25:this.m_HandCardPosY;cc.tween(e).to(.15,{y:a}).start()},o([C(cc.Node)],t.prototype,"ui_cardAniNode",void 0),o([C(cc.Prefab)],t.prototype,"cardItemPerfab",void 0),o([C(cc.Node)],t.prototype,"m_handCardNode",void 0),o([C([cc.Node])],t.prototype,"ui_sendCardPos",void 0),o([m],t)}(cc.Component);a.default=y,cc._RF.pop()},{"../../evnet/GameEventNames197001001":"GameEventNames197001001","../../framework/AiLogic197001001":"AiLogic197001001","../../framework/Cards/DdzCard":"DdzCard","../../framework/Cards/DdzCardCfg":"DdzCardCfg","../../framework/Cards/DdzCardItem":"DdzCardItem","../../framework/Cards/DdzCardUtils":"DdzCardUtils","../../framework/Const/DdzConst":"DdzConst","../../framework/GameRule197001001":"GameRule197001001","../../framework/Utils197001001":"Utils197001001","../../global/CommonEnum197001001":"CommonEnum197001001","../../global/Global197001001":"Global197001001"}],HandCard_1_197001001:[function(e,t,a){"use strict";cc._RF.push(t,"538edzt3LFBB7xn+zckB5j8","HandCard_1_197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../evnet/GameEventNames197001001"),i=e("../../framework/AiLogic197001001"),d=e("../../framework/Cards/DdzCard"),l=e("../../framework/Cards/DdzCardCfg"),c=e("../../framework/Cards/DdzCardItem"),u=e("../../framework/Cards/DdzCardUtils"),h=e("../../framework/Const/DdzConst"),p=e("../../framework/GameRule197001001"),_=e("../../framework/Utils197001001"),f=e("../../global/CommonEnum197001001"),g=e("../../global/Global197001001"),v=cc._decorator,m=v.ccclass,C=v.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_cardAniNode=null,t.cardItemPerfab=null,t.m_handCardNode=null,t.ui_sendCardPos=[],t.m_handDdzCardItems=[],t.m_handCardVals=[],t.StandCardsArr=[],t._beginPos=null,t.allCards={},t.startTouchInPoker=!1,t._promptIndex=0,t.m_logic=null,t._promptList=null,t.m_HandCardPosY1=0,t.m_HandCardPosY2=0,t.showHandCardsAniIndex=-1,t}return r(t,e),t.prototype.onLoad=function(){base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.Game_Msg_OnClick_TiShi,this.onEventClickTiShi,this)},t.prototype.onDestroy=function(){this.unRegisterEvent(),base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.Game_Msg_OnClick_TiShi,this.onEventClickTiShi,this)},t.prototype.start=function(){this.registerEvent(),this.creatAPackCard()},t.prototype.updatePromptList=function(){for(var e=_.default.clone(g.default.getInstance().lastCards),t=[],a=0;a<e.length;a++){var n=(new d.default).create(e[a]);t.push(n)}var r=p.default.typeJudge(t);return this._promptList=this.m_logic.prompt(r),this._promptIndex=0,this._promptList},t.prototype.onEventClickTiShi=function(){this._promptList&&this.showTipsCard()},t.prototype.reset=function(){for(var e in this.m_HandCardPosY1=this.ui_sendCardPos[0].y+(h.default.CARD_HEIGHT>>2),this.m_HandCardPosY2=this.ui_sendCardPos[0].y-(h.default.CARD_HEIGHT>>2),this.unscheduleAllCallbacks(),this.node.stopAllActions(),this.StandCardsArr=[],this.m_handDdzCardItems=[],this.m_handCardNode.children.forEach(function(e){e.removeFromParent()}),this.ui_cardAniNode.destroyAllChildren(),this.allCards)this.allCards[e].node.removeFromParent(),this.allCards[e].reset();this.m_handCardVals=[],this.m_handDdzCardItems.forEach(function(e){e.node.removeFromParent()}),this.m_handDdzCardItems.length=0,this.m_logic=null,this._promptList=null},t.prototype.pushDizhuCard=function(e,t){for(var a in void 0===t&&(t=g.default.getInstance().isFrontDesk),t&&(t=this.node.active),e)if(!(e[a]<=0)){var n=(new d.default).create(e[a]);this.m_handCardVals.push(n)}var r=g.default.getInstance().bankerPos==g.default.getInstance().wChairID;this.m_logic.updateCards(this.m_handCardVals);for(var o=this.m_handCardVals.length,s=o-1;s>=o-3;s--){var i=this.getCardById(this.m_handCardVals[s].value);null!=i&&(this.m_handDdzCardItems.push(i),i.node.active=!1,i.showDizhuFlag(!1),i.node.parent=this.m_handCardNode)}var l=u.default.sortCardsDown(this.m_handDdzCardItems),c=[],p=[];o>9?(c=l.slice(0,10),p=l.slice(10)):c=l;for(var _=c.length-1;_>=0;_--)if(null!=(v=c[_])){v.tag=h.CardItemTagType.Top,v.node.active=!0;var f=50*(_-(c.length-1)/2);v.node.setPosition(cc.v2(f,this.m_HandCardPosY1)),v.node.zIndex=_,_==l.length-1&&0==p.length&&v.showDizhuFlag(r),t&&m(v.cardId)&&(v.node.y=this.m_HandCardPosY1+25,cc.tween(v.node).delay(.3).to(.4,{y:this.m_HandCardPosY1}).start())}for(_=p.length-1;_>=0;_--){var v;null!=(v=p[_])&&(v.tag=h.CardItemTagType.Bootom,v.node.active=!0,f=50*(_-(p.length-1)/2),v.node.setPosition(cc.v2(f,this.m_HandCardPosY2)),v.node.zIndex=100+_,_==l.length-1&&v.showDizhuFlag(r),t&&m(v.cardId)&&(v.node.y=this.m_HandCardPosY2+25,cc.tween(v.node).delay(.3).to(.4,{y:this.m_HandCardPosY2}).start()))}function m(t){for(var a=0;a<e.length;a++)if(t==e[a])return!0;return!1}},t.prototype.updateSelfHandCardNodes=function(){var e=g.default.getInstance().bankerPos==g.default.getInstance().wChairID;this.m_handCardNode.removeAllChildren();var t=this.m_handCardVals.length,a=u.default.sortCardsDown(this.m_handDdzCardItems),n=[],r=[];t>9?(n=a.slice(0,10),r=a.slice(10)):n=a;for(var o=n.length-1;o>=0;o--)if(null!=(i=n[o])){i.node.active=!0,i.tag=h.CardItemTagType.Top,this.m_handCardNode.addChild(i.node),i.showDizhuFlag(!1);var s=50*(o-(n.length-1)/2);i.node.setPosition(cc.v2(s,this.m_HandCardPosY1)),i.node.zIndex=o,o==a.length-1&&0==r.length&&i.showDizhuFlag(e)}for(o=r.length-1;o>=0;o--){var i;null!=(i=r[o])&&(i.node.active=!0,i.tag=h.CardItemTagType.Bootom,i.node.active=!0,s=50*(o-(r.length-1)/2),i.node.setPosition(cc.v2(s,this.m_HandCardPosY2)),i.node.zIndex=100+o,this.m_handCardNode.addChild(i.node),o==a.length-1&&i.showDizhuFlag(e))}},t.prototype.pushHandCards=function(e){var t=this;void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active);var a=g.default.getInstance().mHandCard;for(var n in a)if(!(a[n]<=0)){var r=(new d.default).create(a[n]);this.m_handCardVals.push(r)}this.m_logic=new i.default(this.m_handCardVals,g.default.getInstance().bankerPos==g.default.getInstance().wChairID),e?this.playSendCardAni(function(){t.playSendCardAni2(),t.showHandCards(e)}):this.showHandCards(e)},t.prototype.playSendCardAni2=function(){for(var e=this,t=0;t<this.ui_cardAniNode.children.length;t++)(function(t,a){cc.tween(t).to(.08*a,{position:_.default.convetOtherNodeSpaceAR(e.ui_sendCardPos[a%3],t.parent)}).call(function(){t.destroy()}).start()})(this.ui_cardAniNode.children[t],t)},t.prototype.playSendCardAni=function(e){this.ui_cardAniNode.destroyAllChildren(),base.SoundManager.getInstance().playEffect(f.SOUNDS_NAME.DealFold,!1,f.BUNDLENAME.GAME);for(var t=0;t<17;t++){var a=new cc.Node;a.scale=.5,a.addComponent(cc.Sprite).spriteFrame=g.default.getInstance().cardsPokerAtlas.getSpriteFrame("chess_poker_0_5"),this.ui_cardAniNode.addChild(a),a.zIndex=t,a.setPosition(cc.v2(-240,0)),function(t,a,n){cc.tween(t).to(.2,{x:a}).delay(.3).to(.2,{x:0}).call(function(){16==n&&e&&e()}).start()}(a,340-40*(17-t)+100,t)}},t.prototype.showTipsCard=function(){if(this.node.active){this.setStandCardDown();var e=this._promptList[this._promptIndex];g.default.getInstance().playCardsArr=[];for(var t=0;t<e.length;t++){var a=e[t],n=this.getCardById(a.value);n.selected=!0,this.setSelectCardsPos(n,!0),this.StandCardsArr.push(n),g.default.getInstance().playCardsArr.push(a.value)}this._promptIndex++,this._promptIndex>this._promptList.length-1&&(this._promptIndex=0),g.default.getInstance().isPlay=!0}},t.prototype.updateHandCardVals=function(e){for(var t in e)if(!(e[t]<=0)){for(var a=0;a<this.m_handCardVals.length;a++)this.m_handCardVals[a].value==e[t]&&this.m_handCardVals.splice(a,1);for(var n=0;n<this.m_handDdzCardItems.length;n++)this.m_handDdzCardItems[n].cardId==e[t]&&this.m_handDdzCardItems.splice(n,1)}this.m_logic.updateCards(this.m_handCardVals),this.updateSelfHandCardNodes()},t.prototype.showHandCards=function(e){void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active),e&&(e=g.default.getInstance().isFrontDesk);for(var t=this.m_handCardVals.length,a=0;a<t;a++){var n=this.getCardById(this.m_handCardVals[a].value);this.m_handDdzCardItems.push(n),n.node.parent=this.m_handCardNode,n.node.zIndex=a,n.node.active=!1;var r=50*t/2-50*(t-a)+100;n.setCardPos(cc.v2(r,h.default.Seat0_HandCardPosY))}var o=u.default.sortCardsDown(this.m_handDdzCardItems),s=[],i=[];t>9?(s=_.default.fisherYatesShuffle(o.slice(0,10)),i=_.default.fisherYatesShuffle(o.slice(10))):s=_.default.fisherYatesShuffle(o);for(var d=s.length-1;d>=0;d--)null!=(p=s[d])&&(r=50*(d-(s.length-1)/2),p.node.setPosition(cc.v2(r,this.m_HandCardPosY1)),p.node.zIndex=d);for(d=i.length-1;d>=0;d--)null!=(p=i[d])&&(r=50*(d-(i.length-1)/2),p.node.setPosition(cc.v2(r,this.m_HandCardPosY2)),p.node.zIndex=100+d);if(e)this.showHandCardsAniIndex=-1,this.schedule(this.showHandCardsAni3,.1);else{var l=[],c=[];for(t>9?(l=o.slice(0,10),c=o.slice(10)):l=o,d=l.length-1;d>=0;d--)null!=(p=l[d])&&(p.tag=h.CardItemTagType.Top,r=50*(d-(l.length-1)/2),p.node.setPosition(cc.v2(r,this.m_HandCardPosY1)),p.node.zIndex=d,p.node.active=!0);for(d=c.length-1;d>=0;d--){var p;null!=(p=c[d])&&(p.tag=h.CardItemTagType.Bootom,r=50*(d-(c.length-1)/2),p.node.setPosition(cc.v2(r,this.m_HandCardPosY2)),p.node.zIndex=100+d,p.node.active=!0)}}},t.prototype.showHandCardsAni3=function(){var e=this;if(g.default.getInstance().isFrontDesk)if(this.showHandCardsAniIndex++,this.showHandCardsAniIndex>=5){this.unschedule(this.showHandCardsAni3),s=u.default.sortCardsDown(this.m_handDdzCardItems),o=this.m_handCardVals.length;var t=[],a=[];for(o>9?(t=s.slice(0,10),a=s.slice(10)):t=s,l=t.length-1;l>=0;l--)null!=(p=t[l])&&function(a,n){var r=50*(a-(t.length-1)/2);cc.tween(n.node).to(.1,{x:0}).call(function(){n.node.zIndex=a,n.tag=h.CardItemTagType.Top}).delay(.1).to(.1,{x:r}).call(function(){0==a&&e.showBankerCard()}).start()}(l,p);for(l=a.length-1;l>=0;l--)null!=(p=a[l])&&function(e,t){var n=50*(e-(a.length-1)/2);cc.tween(t.node).to(.1,{x:0}).call(function(){t.node.zIndex=100+e,t.tag=h.CardItemTagType.Bootom}).delay(.1).to(.1,{x:n}).start()}(l,p)}else{var n=[];0==this.showHandCardsAniIndex?n=[5,6,7,8]:1==this.showHandCardsAniIndex?n=[5,6,7,8,9,10,11,12]:2==this.showHandCardsAniIndex?n=[3,4,5,6,7,8,9,10,11,12,13,14]:4==this.showHandCardsAniIndex&&(n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]);for(var r=0;r<n.length;r++)this.m_handDdzCardItems[n[r]].node.active=!0}else{var o,s=u.default.sortCardsDown(this.m_handDdzCardItems),i=[],d=[];(o=this.m_handCardVals.length)>9?(i=s.slice(0,10),d=s.slice(10)):i=s;for(var l=i.length-1;l>=0;l--)if(null!=(p=i[l])){p.tag=h.CardItemTagType.Top;var c=50*(l-(i.length-1)/2);p.node.setPosition(cc.v2(c,this.m_HandCardPosY1)),p.node.zIndex=l,p.node.active=!0}for(l=d.length-1;l>=0;l--){var p;null!=(p=d[l])&&(p.tag=h.CardItemTagType.Bootom,c=50*(l-(d.length-1)/2),p.node.setPosition(cc.v2(c,this.m_HandCardPosY2)),p.node.zIndex=100+l,p.node.active=!0)}}},t.prototype.getCardById=function(e){return this.allCards[e]?this.allCards[e]:(this.allCards[e]=this.createNewCards(e),this.allCards[e])},t.prototype.registerEvent=function(){this.m_handCardNode.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.m_handCardNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.m_handCardNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.m_handCardNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.unRegisterEvent=function(){this.m_handCardNode.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.m_handCardNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.m_handCardNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.m_handCardNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.onTouchBegan=function(e){if(!g.default.getInstance().isCardTouch)return!1;var t=e.getLocation(),a=this._beginPos=this.m_handCardNode.convertToNodeSpaceAR(t);this.startTouchInPoker=!1;for(var n=this.m_handDdzCardItems,r=n.length-1;r>=0;r--)if(n[r].node.getBoundingBox().contains(a))return this.startTouchInPoker=!0,n[r].isChoosed=!0,!0;return!0},t.prototype.onTouchMove=function(e){if(!g.default.getInstance().isCardTouch)return!1;if(!this.startTouchInPoker)return!1;for(var t=e.getLocation(),a=this.m_handCardNode.convertToNodeSpaceAR(t),n=Math.max(1,Math.abs(a.x-a.x)),r=Math.max(1,Math.abs(a.y-a.y)),o=Math.min(a.x,a.x),s=Math.min(a.y,a.y),i=cc.rect(o,s,n,r),d=this.m_handDdzCardItems,l=this.m_handDdzCardItems.length,c=l-1;c>=0;c--)if((m=d[c]).node.getBoundingBox().containsRect(i))return m.isChoosed=!0,!0;var u=this._beginPos,p=u.x<a.x?u:a,_=Math.abs(u.x-a.x),f=Math.abs(u.y-a.y),v=cc.rect(p.x,p.y,_,f);for(c=l-1;c>=0;c--){var m=this.m_handDdzCardItems[c];cc.Intersection.rectRect(m.node.getBoundingBox(),v)?p.x-m.node.x>=h.default.CARD_MARGIN&&c!=l-1&&(m.isChoosed=!1):m.isChoosed=!1}return!0},t.prototype.onTouchEnded=function(){if(!g.default.getInstance().isCardTouch)return!1;if(!this.startTouchInPoker)return this.setStandCardDown(),!1;var e=this.m_handDdzCardItems;this.StandCardsArr=[];for(var t=0,a=0,n=e;a<n.length;a++){var r=n[a];r.isChoosed&&(r.selected=!r.selected,this.setSelectCardsPos(r,r.selected),r.selected&&t++),r.selected&&this.StandCardsArr.push(r),r.isChoosed=!1}return this.StandCardsArr=u.default.sortCardsUp(this.StandCardsArr),this.StandCardsArr.length>0?(t>5&&this.autoSelectedPoker(),this.checkClickCards()):g.default.getInstance().isPlay=!1,!0},t.prototype.onTouchCancel=function(){},t.prototype.autoSelectedPoker=function(){var e=l.default.getCardsType(this.StandCardsArr,!1,-1);if(!(e&&e>0)){var t=l.default.autoSelected(this.StandCardsArr);if((t=u.default.sortCardsUp(t)).length>0)for(var a=0,n=0;n<this.StandCardsArr.length;n++)a<t.length&&this.StandCardsArr[n].cardId==t[a].cardId?a++:(this.StandCardsArr[n].selected=!1,this.setSelectCardsPos(this.StandCardsArr[n],!1));this.StandCardsArr=[];for(var r=this.m_handDdzCardItems,o=0;o<r.length;o++)r[o].selected&&this.StandCardsArr.push(r[o]),this.setSelectCardsPos(r[o],r[o].selected)}},t.prototype.checkClickCards=function(){if(console.log("StandCardsArr=>",this.StandCardsArr),g.default.getInstance().playCardsArr=[],0!=this.StandCardsArr.length){var e=g.default.getInstance().lastCards,t=l.default.getCardsType(this.StandCardsArr,!1,-1);if(console.log("StandCardsArr type=>",t),g.default.getInstance().isPlay=!1,!t||t<=0)g.default.getInstance().isPlay=!1;else if(g.default.getInstance().playCardsArr=[],0!=e.length){var a=[];for(s=0;s<e.length;s++){var n=(new d.default).create(e[s]);a.push(n)}var r=l.default.getCardsType(a,!1,-1);console.log("StandCardsArr lastCardType=>",r);var o=[];for(var s in this.StandCardsArr)this.StandCardsArr[s].cardId<=0||(n=(new d.default).create(this.StandCardsArr[s].cardId),o.push(n));if(0==l.default.compareCards(o,a,r)){for(s=0;s<this.StandCardsArr.length;s++)g.default.getInstance().playCardsArr.push(this.StandCardsArr[s].cardId);g.default.getInstance().isPlay=!0}}else{for(s=0;s<this.StandCardsArr.length;s++)g.default.getInstance().playCardsArr.push(this.StandCardsArr[s].cardId);g.default.getInstance().isPlay=!0}}else g.default.getInstance().isPlay=!1},t.prototype.showBankerCard=function(e){void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active),this.ui_cardAniNode.destroyAllChildren();for(var t=[-180,0,180],a=0;a<3;a++){var n=new cc.Node;n.scale=.8,n.addComponent(cc.Sprite).spriteFrame=g.default.getInstance().cardsPokerAtlas.getSpriteFrame("chess_poker_0_5"),this.ui_cardAniNode.addChild(n),n.setPosition(cc.v2(0,-50)),e?function(e,a){cc.tween(e).to(.2,{x:t[a]}).start()}(n,a):n.x=t[a]}},t.prototype.openBankerCard=function(e,t){var a=this;if(void 0===e&&(e=g.default.getInstance().isFrontDesk),e&&(e=this.node.active),!e||0==this.ui_cardAniNode.childrenCount)return this.ui_cardAniNode.destroyAllChildren(),void(t&&t());var n=g.default.getInstance().mLandlordCard,r=[new cc.Vec3(-90,40,0),new cc.Vec3(0,40,0),new cc.Vec3(90,40,0)],o=[];for(var s in n){var i=(new d.default).create(n[s]);o.push(i)}for(s=0;s<this.ui_cardAniNode.children.length;s++)(function(e,n){cc.tween(e).to(.2,{scaleX:-1}).call(function(){var t=u.default.getPokerSpName(o[n].suit,o[n].point);e.getComponent(cc.Sprite).spriteFrame=g.default.getInstance().cardsPokerAtlas.getSpriteFrame(t)}).to(.2,{scaleX:1}).to(.3,{position:r[n],scale:.6}).delay(.8).call(function(){n==a.ui_cardAniNode.childrenCount-1&&t&&t(),e.destroy()}).start()})(this.ui_cardAniNode.children[s],s)},t.prototype.createNewCards=function(e){var t=u.default.calculateSuit(e),a=u.default.calculatePoints(e);if(-1==t||-1==a)return cc.log("\u521b\u5efa\u724c\u4e3a\u7a7a"),null;var n=cc.instantiate(this.cardItemPerfab).getComponent(c.default),r=u.default.getPokerSpName(t,a),o=g.default.getInstance().cardsPokerAtlas.getSpriteFrame(r);return n.setCardSuitAndPoint(t,a),n.cardId=e,n.setSpriteFrameOfCard(o),n},t.prototype.setStandCardDown=function(){for(var e=0;e<this.StandCardsArr.length;e++){var t=this.StandCardsArr[e];t.isChoosed=!1,t.node.stopAllActions(),t.selected&&(t.selected=!1,this.setSelectCardsPos(t,!1))}this.StandCardsArr=[],g.default.getInstance().playCardsArr=[],g.default.getInstance().isPlay=!1},t.prototype.creatAPackCard=function(){var e=this;[17,18,19,20,21,22,23,24,25,26,27,28,29,33,34,35,36,37,38,39,40,41,42,43,44,45,49,50,51,52,53,54,55,56,57,58,59,60,61,65,66,67,68,69,70,71,72,73,74,75,76,77,94,95].forEach(function(t){e.allCards[t]=e.createNewCards(t)})},t.prototype.getPlayCardsArr=function(){var e=[],t=this.updatePromptList();if(console.log(t),!t||0==t.length)return e;for(var a=t[t.length-1],n=0;n<a.length;n++)e.push(a[n].value);return e},t.prototype.setSelectCardsPos=function(e,t){var a=g.default.getInstance().isFrontDesk;a&&(a=this.node.active),cc.Tween.stopAllByTarget(e.node);var n=0;n=e.tag==h.CardItemTagType.Top?this.m_HandCardPosY1:this.m_HandCardPosY2,t&&(n+=25),cc.tween(e.node).to(.15,{y:n}).start()},o([C(cc.Node)],t.prototype,"ui_cardAniNode",void 0),o([C(cc.Prefab)],t.prototype,"cardItemPerfab",void 0),o([C(cc.Node)],t.prototype,"m_handCardNode",void 0),o([C([cc.Node])],t.prototype,"ui_sendCardPos",void 0),o([m],t)}(cc.Component);a.default=y,cc._RF.pop()},{"../../evnet/GameEventNames197001001":"GameEventNames197001001","../../framework/AiLogic197001001":"AiLogic197001001","../../framework/Cards/DdzCard":"DdzCard","../../framework/Cards/DdzCardCfg":"DdzCardCfg","../../framework/Cards/DdzCardItem":"DdzCardItem","../../framework/Cards/DdzCardUtils":"DdzCardUtils","../../framework/Const/DdzConst":"DdzConst","../../framework/GameRule197001001":"GameRule197001001","../../framework/Utils197001001":"Utils197001001","../../global/CommonEnum197001001":"CommonEnum197001001","../../global/Global197001001":"Global197001001"}],HelpPopup197001001:[function(e,t,a){"use strict";cc._RF.push(t,"f25d36TwOtEqInY6mWWsndJ","HelpPopup197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../global/CommonEnum197001001"),i=cc._decorator,d=i.ccclass,l=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_cont=null,t.ui_content=[],t._selecteTag=1,t}return r(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad&&e.prototype.onLoad.call(this);for(var a=1;a<6;a++)this.ui_cont.getChildByName("ui_scrollView"+a).active=!1;var n=base.LanguageManager.getInstance().getCurLang();for(a=0;a<5;a++)(function(e){base.ResLoader.loadRes("textures/lang/"+n+"/help/help"+(e+1),cc.SpriteFrame,function(a,n){t.ui_content[e].height=n.getOriginalSize().height;var r=new cc.Node("items");r.addComponent(cc.Sprite).spriteFrame=n,t.ui_content[e].addChild(r)},s.BUNDLENAME.GAME)})(a)},t.prototype.onOpen=function(e){for(var t=this,a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];cc.find("BG_window_big/ui_btnClose",this.ui_cont).on("click",this.onClickClose,this),cc.find("ui_btnPanel",this.ui_cont).children.forEach(function(e){e.on("click",t.onClick,t)}),this.setButton()},t.prototype.onClose=function(){var e=this;cc.find("BG_window_big/ui_btnClose",this.ui_cont).off("click",this.onClickClose,this),cc.find("ui_btnPanel",this.ui_cont).children.forEach(function(t){t.off("click",e.onClick,e)})},t.prototype.onClickClose=function(){base.SoundManager.getInstance().playEffect(s.SOUNDS_NAME.click,!1,s.BUNDLENAME.GAME),base.GUI.getInstance().close(this)},t.prototype.onClick=function(e){var t=e.node.name.substring(11,12);Number(t)!=this._selecteTag&&(base.SoundManager.getInstance().playEffect(s.SOUNDS_NAME.click,!1,s.BUNDLENAME.GAME),this._selecteTag=Number(t),this.setButton())},t.prototype.setButton=function(){var e=this;cc.find("ui_btnPanel",this.ui_cont).children.forEach(function(t){t.active="02"!=t.name.substring(13),t.name.substring(11,12)==""+e._selecteTag&&(t.active=!0)});for(var t=1;t<6;t++)this.ui_cont.getChildByName("ui_scrollView"+t).active=this._selecteTag==t},o([l(cc.Node)],t.prototype,"ui_cont",void 0),o([l(cc.Node)],t.prototype,"ui_content",void 0),o([d],t)}(base.PopupModel);a.default=c,cc._RF.pop()},{"../../global/CommonEnum197001001":"CommonEnum197001001"}],LanguageLabel197001001:[function(e,t,a){"use strict";cc._RF.push(t,"33f06/kKldN9IvJ319c2fmF","LanguageLabel197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.LanguageLabel197001001=void 0;var s=e("../global/CommonEnum197001001"),i=cc._decorator,d=i.ccclass,l=(i.property,i.menu),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){this.setBundle(s.BUNDLENAME.GAME),e.prototype.onLoad.call(this)},o([d,l("197001001/LanguageLabel197001001")],t)}(base.LanguageLabel);a.LanguageLabel197001001=c,cc._RF.pop()},{"../global/CommonEnum197001001":"CommonEnum197001001"}],LanguageSprite197001001:[function(e,t,a){"use strict";cc._RF.push(t,"ff4c25x0QRCFIiuws3/K2M1","LanguageSprite197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.LanguageSprite197001001=void 0;var s=e("../global/CommonEnum197001001"),i=cc._decorator,d=i.ccclass,l=(i.property,i.menu),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){this.setBundle(s.BUNDLENAME.GAME),e.prototype.onLoad.call(this)},o([d,l("197001001/LanguageSprite197001001")],t)}(base.LanguageSprite);a.LanguageSprite197001001=c,cc._RF.pop()},{"../global/CommonEnum197001001":"CommonEnum197001001"}],LoadingPopup197001001:[function(e,t,a){"use strict";cc._RF.push(t,"c976c4aoBhOp6RpKYM+pO9T","LoadingPopup197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../global/CommonEnum197001001"),i=cc._decorator,d=i.ccclass,l=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),this.label.string=base.LanguageManager.getInstance().getDstStr("197001001_tips_25",s.BUNDLENAME.GAME)},t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];cc.Tween.stopAllByTarget(this.node),this.node.opacity=255,cc.tween(this.node).to(.5,{opacity:100}).to(1,{opacity:255}).union().repeatForever().start()},t.prototype.onClose=function(){cc.Tween.stopAllByTarget(this.node)},o([l(cc.Label)],t.prototype,"label",void 0),o([d],t)}(base.PopupModel);a.default=c,cc._RF.pop()},{"../../global/CommonEnum197001001":"CommonEnum197001001"}],Loger197001001:[function(e,t,a){"use strict";var n;cc._RF.push(t,"b4799a0qXFLMoWPj18FU0it","Loger197001001"),Object.defineProperty(a,"__esModule",{value:!0}),a.Loger197001001=a.LogType197001001=void 0,function(e){e[e.Net=1]="Net",e[e.Model=2]="Model",e[e.Business=4]="Business",e[e.View=8]="View",e[e.Config=16]="Config",e[e.Trace=32]="Trace"}(n=a.LogType197001001||(a.LogType197001001={}));var r={1:"\u7f51\u7edc\u65e5\u5fd7",2:"\u6570\u636e\u65e5\u5fd7",4:"\u4e1a\u52a1\u65e5\u5fd7",8:"\u89c6\u56fe\u65e5\u5fd7",16:"\u914d\u7f6e\u65e5\u5fd7",32:"\u6807\u51c6\u65e5\u5fd7"},o=function(){function e(){}return e.init=function(){this.tags=n.Net|n.Model|n.Business|n.View|n.Config|n.Trace},e.setTags=function(e){void 0===e&&(e=null),e&&(this.tags=e)},e.start=function(e){void 0===e&&(e="Time"),console.time(e)},e.end=function(e){void 0===e&&(e="Time"),console.timeEnd(e)},e.table=function(e){this.isOpen(n.Trace)&&console.table(e)},e.trace=function(e,t){void 0===t&&(t="color:#000000;"),this.isOpen(n.Trace)&&(console.log||cc.log).call(null,"%c%s%s",t,this.getDateString(),e)},e.logNet=function(e,t){this.orange(n.Net,e,t)},e.logModel=function(e,t){this.violet(n.Model,e,t)},e.logBusiness=function(e,t){this.blue(n.Business,e,t)},e.logView=function(e,t){this.green(n.View,e,t)},e.logConfig=function(e,t){this.gray(n.Config,e,t)},e.orange=function(e,t,a){this.print(e,t,"color:#ee7700;",a)},e.violet=function(e,t,a){this.print(e,t,"color:Violet;",a)},e.blue=function(e,t,a){this.print(e,t,"color:#3a5fcd;",a)},e.green=function(e,t,a){this.print(e,t,"color:green;",a)},e.gray=function(e,t,a){this.print(e,t,"color:gray;",a)},e.isOpen=function(e){return 0!=(this.tags&e)},e.print=function(e,t,a,n){if(this.isOpen(e)){var o=console.log||cc.log,s=r[e];n?o.call(null,"%c%s%s%s:%s%o",a,this.getDateString(),"["+s+"]",this.stack(5),n,t):o.call(null,"%c%s%s%s:%o",a,this.getDateString(),"["+s+"]",this.stack(5),t)}},e.stack=function(e){var t=(new Error).stack.split("\n"),a=[];t.forEach(function(e){var t,n=(e=e.substring(7)).split(" ");n.length<2?a.push(n[0]):a.push(((t={})[n[0]]=n[1],t))});var n,r=[],o=[];if(e<a.length-1)for(var s in a[e])if(2==(o=s.split(".")).length)r=o.concat();else{var i=(n=a[e][s]).lastIndexOf("/"),d=n.lastIndexOf(".");if(i>-1&&d>-1){var l=n.substring(i+1,d);r.push(l)}else r.push(n)}return 1==r.length?"["+r[0]+".ts]":2==r.length?"["+r[0]+".ts->"+r[1]+"]":""},e.getDateString=function(){var e=new Date,t=e.getHours().toString(),a="";return a+=(1==t.length?"0"+t:t)+":",a+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",a+=(1==(t=e.getSeconds().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),"["+(a+=t)+"]"},e.tags=0,e}();a.Loger197001001=o,o.init(),cc._RF.pop()},{}],MController197001001:[function(e,t,a){"use strict";cc._RF.push(t,"5e08cHc8l1IJYs6o57eT/X4","MController197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,s.executeInEditMode),l=s.menu,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i,d,l("197001001/MController197001001")],t)}(base.MController);a.default=c,cc._RF.pop()},{}],MControllerView197001001:[function(e,t,a){"use strict";cc._RF.push(t,"f9a3bEk0qlOtJqv1JhWheKm","MControllerView197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./MController197001001"),i=cc._decorator,d=i.ccclass,l=(i.property,i.menu),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),this.resize()},t.prototype.layoutLandscape=function(){e.prototype.layoutLandscape&&e.prototype.layoutLandscape.call(this),this.resizeHandle()},t.prototype.layoutPortrait=function(){e.prototype.layoutPortrait&&e.prototype.layoutPortrait.call(this),this.resizeHandle()},t.prototype.resizeHandle=function(){if(this.node&&cc.isValid(this.node)){var e=base.ComUtils.checkHorOrVec();this.node.getComponent(s.default).stateIndex=e?0:1}},o([d,l("197001001/MControllerView197001001")],t)}(base.BaseView);a.default=c,cc._RF.pop()},{"./MController197001001":"MController197001001"}],Main197001001:[function(e,t,a){"use strict";cc._RF.push(t,"b682dx2B0NDJpuS9Q0C0gZQ","Main197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("./global/CommonEnum197001001"),i=e("./global/UIConfigData197001001"),d=cc._decorator,l=d.ccclass,c=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this);var t=this;base.GUI.getInstance().addUIConf(i.UICF197001001,s.BUNDLENAME.GAME),base.GUI.getInstance().openAsync(i.UIID197001001.UI_Hall,s.BUNDLENAME.GAME).then(function(){t.node.destroy()})},t.prototype.start=function(){},o([l],t)}(base.MainViewModel));a.default=c,cc._RF.pop()},{"./global/CommonEnum197001001":"CommonEnum197001001","./global/UIConfigData197001001":"UIConfigData197001001"}],MainLayout197001001:[function(e,t,a){"use strict";cc._RF.push(t,"eef360Deq9JyYVeAyVY47WK","MainLayout197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i],t)}(cc.Component));a.default=d,cc._RF.pop()},{}],Menu197001001:[function(e,t,a){"use strict";cc._RF.push(t,"52ac0hYHEREU6/QYnrkfLE4","Menu197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i],t)}(cc.Component));a.default=d,cc._RF.pop()},{}],MenuItem197001001:[function(e,t,a){"use strict";cc._RF.push(t,"c1852WotS1JaJ8X5HcFS6Kq","MenuItem197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundIcon=[],t}return r(t,e),o([d({type:cc.SpriteFrame,tooltip:"\u58f0\u97f3\u5f00\u5173\u4e24\u5f20\u56fe"})],t.prototype,"soundIcon",void 0),o([i],t)}(cc.Component);a.default=l,cc._RF.pop()},{}],MingCard197001001:[function(e,t,a){"use strict";cc._RF.push(t,"0ea2fpQqN5LZbdSFCHkK+rj","MingCard197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../framework/Cards/DdzCardItem"),i=e("../framework/Cards/DdzCardUtils"),d=e("../global/Global197001001"),l=cc._decorator,c=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardItemPerfab=null,t.ui_cards=[],t.allCards={},t}return r(t,e),t.prototype.onLoad=function(){this.creatAPackCard()},t.prototype.refresh=function(){for(var e in this.allCards)this.allCards[e].reset(),this.allCards[e].node.removeFromParent();this.ui_cards.forEach(function(e){e.removeAllChildren()})},t.prototype.getCardById=function(e){return this.allCards[e]?this.allCards[e]:(this.allCards[e]=this.createNewCards(e),this.allCards[e])},t.prototype.setData=function(e){this.refresh();for(var t=0;t<e.length;t++){var a=d.default.getInstance().getViewChairID(e[t].pos);1==a&&this.pushCardUser1(e[t].card),2==a&&this.pushCardUser2(e[t].card)}},t.prototype.pushCardUser1=function(e){if(e&&0!=e.length&&0!=e[0]){for(var t=[],a=0;a<e.length;a++)(o=this.createNewCards(e[a])).node.setScale(.45),t.push(o);for(var n=i.default.sortCardsDown(t),r=n.length-1;r>=0;r--){var o,s=18*r;null!=(o=n[r])&&(o.setCardPos(cc.v2(s,0)),this.ui_cards[1].addChild(o.node,r))}}},t.prototype.pushCardUser2=function(e){if(e&&0!=e.length&&0!=e[0]){for(var t=[],a=0;a<e.length;a++)(o=this.createNewCards(e[a])).node.setScale(.45),t.push(o);for(var n=i.default.sortCardsUp(t),r=n.length-1;r>=0;r--){var o,s=18*-r;null!=(o=n[r])&&(o.node.zIndex=-100*r,o.setCardPos(cc.v2(s,0)),this.ui_cards[2].addChild(o.node))}}},t.prototype.creatAPackCard=function(){var e=this;[17,18,19,20,21,22,23,24,25,26,27,28,29,33,34,35,36,37,38,39,40,41,42,43,44,45,49,50,51,52,53,54,55,56,57,58,59,60,61,65,66,67,68,69,70,71,72,73,74,75,76,77,94,95].forEach(function(t){e.allCards[t]=e.createNewCards(t)})},t.prototype.createNewCards=function(e){var t=i.default.calculateSuit(e),a=i.default.calculatePoints(e);if(-1==t||-1==a)return cc.log("\u521b\u5efa\u724c\u4e3a\u7a7a"),null;var n=cc.instantiate(this.cardItemPerfab).getComponent(s.default),r=i.default.getPokerSpName(t,a),o=d.default.getInstance().cardsPokerAtlas.getSpriteFrame(r);return n.setCardSuitAndPoint(t,a),n.cardId=e,n.setSpriteFrameOfCard(o),n},o([u(cc.Prefab)],t.prototype,"cardItemPerfab",void 0),o([u(cc.Node)],t.prototype,"ui_cards",void 0),o([c],t)}(cc.Component);a.default=h,cc._RF.pop()},{"../framework/Cards/DdzCardItem":"DdzCardItem","../framework/Cards/DdzCardUtils":"DdzCardUtils","../global/Global197001001":"Global197001001"}],NodeUiConfig197001001:[function(e,t,a){"use strict";cc._RF.push(t,"758eeabriBEx5OHRk59V0EH","NodeUiConfig197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,s.menu),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i,d("197001001/NodeUiConfig197001001")],t)}(base.NodeUiConfig);a.default=l,cc._RF.pop()},{}],Operate197001001:[function(e,t,a){"use strict";cc._RF.push(t,"d6758UhSFRIxYxr1ssHDSRg","Operate197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../evnet/GameEventNames197001001"),i=e("../../global/CommonEnum197001001"),d=e("../../global/Global197001001"),l=cc._decorator,c=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_qiangdizhuNode=null,t.ui_TipsNode=null,t.ui_btn_No=null,t.ui_btn_Tishi=null,t.ui_btn_play=null,t.ui_btn_yaobuqi=null,t.ui_btnNextGame=null,t.ui_btn_CloseTuoguan=null,t.ui_yaoBuqiIcon=null,t.callLandlordScore=[],t}return r(t,e),t.prototype.onLoad=function(){base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.Game_Msg_IsPlay,this.onEvntPlayStatus,this),this.ui_qiangdizhuNode.getChildByName("ui_clock").removeComponent(cc.Sprite),this.ui_TipsNode.getChildByName("ui_clock").removeComponent(cc.Sprite);for(var e=0;e<3;e++){var t=this.ui_qiangdizhuNode.getChildByName("ui_btn_"+e).getChildByName("label").getComponent(cc.Label),a=base.LanguageManager.getInstance().getDstStr("197001001_tips_19",i.BUNDLENAME.GAME);t.string=""+(e+1)+a}},t.prototype.onDestroy=function(){base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.Game_Msg_IsPlay,this.onEvntPlayStatus,this)},t.prototype.showTuoGuan=function(e){this.ui_btn_CloseTuoguan.active=e},t.prototype.refresh=function(){this.showLandlordScore(),this.showTipsNode(),this.ui_btnNextGame.active=!1,this.ui_btn_CloseTuoguan.active=!1,this.showYaoBuqiTips(!1)},t.prototype.showLandlordScore=function(e,t){if(void 0===e&&(e=!1),this.ui_qiangdizhuNode.active=e,e){this.callLandlordScore=t;for(var a=0;a<3;a++)this.ui_qiangdizhuNode.getChildByName("ui_btn_"+a).active=t.indexOf(a+1)>0;this.ui_qiangdizhuNode.getComponent(cc.Layout).updateLayout()}},t.prototype.getScrambleBankerClock=function(){return d.default.getInstance().stage==i.GameState197001001.banker||d.default.getInstance().stage==i.GameState197001001.scramble_banker?this.ui_qiangdizhuNode.getChildByName("ui_clock"):d.default.getInstance().stage==i.GameState197001001.play||d.default.getInstance().stage==i.GameState197001001.catch?this.ui_TipsNode.getChildByName("ui_clock"):void 0},t.prototype.onClickQaingDiZhu=function(e,t){var a=Number(t);base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_LandOperationResp,a)},t.prototype.onclickCloseTuoguan=function(){base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_IS_TUOGUAN)},t.prototype.showTipsNode=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!0),this.ui_TipsNode.active=e,e){if(!t)return this.ui_btn_No.active=!1,this.ui_btn_yaobuqi.active=!0,this.ui_btn_Tishi.active=!1,this.ui_btn_play.active=!1,void this.ui_TipsNode.getComponent(cc.Layout).updateLayout();this.ui_btn_yaobuqi.active=!1,d.default.getInstance().stage==i.GameState197001001.play?(this.ui_btn_No.active=!1,this.ui_btn_Tishi.active=!1,this.ui_btn_play.active=!0):d.default.getInstance().stage==i.GameState197001001.catch&&(this.ui_btn_Tishi.active=!0,this.ui_btn_play.active=!0,this.ui_btn_No.active=!0),this.ui_TipsNode.getComponent(cc.Layout).updateLayout()}},t.prototype.onEvntPlayStatus=function(e,t){this.ui_btn_play.getComponent(cc.Button).interactable=t,this.ui_btn_play.getChildByName("label0").active=t,this.ui_btn_play.getChildByName("label1").active=!t},t.prototype.showNextGameBtn=function(e){this.ui_btnNextGame.active=e},t.prototype.onClickPlay=function(){0!=d.default.getInstance().playCardsArr.length&&base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_User_Operation,d.default.getInstance().playCardsArr)},t.prototype.onClickNoPlay=function(){d.default.getInstance().playCardsArr=[],base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_User_Operation,d.default.getInstance().playCardsArr)},t.prototype.onClickTishi=function(){base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_OnClick_TiShi)},t.prototype.onClickNextGame=function(){base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_NextGame)},t.prototype.showYaoBuqiTips=function(e){this.ui_yaoBuqiIcon.active=e,cc.Tween.stopAllByTarget(this.ui_yaoBuqiIcon),this.ui_yaoBuqiIcon.opacity=255,e&&cc.tween(this.ui_yaoBuqiIcon).blink(2,1).union().repeatForever().start()},o([u(cc.Node)],t.prototype,"ui_qiangdizhuNode",void 0),o([u(cc.Node)],t.prototype,"ui_TipsNode",void 0),o([u(cc.Node)],t.prototype,"ui_btn_No",void 0),o([u(cc.Node)],t.prototype,"ui_btn_Tishi",void 0),o([u(cc.Node)],t.prototype,"ui_btn_play",void 0),o([u(cc.Node)],t.prototype,"ui_btn_yaobuqi",void 0),o([u(cc.Node)],t.prototype,"ui_btnNextGame",void 0),o([u(cc.Node)],t.prototype,"ui_btn_CloseTuoguan",void 0),o([u(cc.Node)],t.prototype,"ui_yaoBuqiIcon",void 0),o([c],t)}(cc.Component);a.default=h,cc._RF.pop()},{"../../evnet/GameEventNames197001001":"GameEventNames197001001","../../global/CommonEnum197001001":"CommonEnum197001001","../../global/Global197001001":"Global197001001"}],OutCard197001001:[function(e,t,a){"use strict";cc._RF.push(t,"96223HQW11Nlq9y4VahCuzt","OutCard197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../global/Global197001001"),i=e("../../framework/Cards/DdzCard"),d=e("../../framework/Cards/DdzCardItem"),l=e("../../framework/Cards/DdzCardUtils"),c=e("../../framework/Cards/DdzCardCfg"),u=e("../../framework/Const/DdzConst"),h=e("../../global/UIConfigData197001001"),p=e("../../global/CommonEnum197001001"),_=cc._decorator,f=_.ccclass,g=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardItemPerfab=null,t.outCardsNs=[],t.tipsNodes=[],t.ui_ani=[],t.ui_com=[],t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.refresh=function(){this.clearAllOutCard(),this.clearAni(),this.clearAllTips()},t.prototype.clearAni=function(){this.ui_com.forEach(function(e){e.children.forEach(function(e){e.active=!1})}),this.ui_ani.forEach(function(e){e.node.active=!1})},t.prototype.clearAllOutCard=function(){for(var e=0;e<this.outCardsNs.length;e++)this.outCardsNs[e].destroyAllChildren()},t.prototype.clearAllTips=function(){for(var e=0;e<this.tipsNodes.length;e++)for(var t=0;t<this.tipsNodes[e].children.length;t++)this.tipsNodes[e].children[t].active=!1},t.prototype.showOutCards=function(e,t,a,n){if(void 0===a&&(a=!1),void 0===n&&(n=s.default.getInstance().isFrontDesk),0!=t.length){var r=s.default.getInstance().getViewChairID(e),o=s.default.getInstance().bankerPos==e;this.clearOutCards(e);var d=.8,h=[],p=[];for(var _ in t)if(!(t[_]<=0)){var f=(new i.default).create(t[_]);h.push(f)}var g=t.length;for(g>8&&(d=.6),a&&(d=.6),_=0;_<h.length;_++)(D=this.createNewCards(h[_].value)).node.setScale(d),p.push(D);var v=l.default.sortCardsDown(p),m=c.default.getCardsType(v,!1,-1),C=this.sortOutCard(v,m),y=this.outCardsNs[r],N=u.default.CARD_WIDTH/2*d-5,E=-u.default.CARD_HEIGHT/2*d;if(0==r){if(a)return;var b=[],I=[];g>9?(b=C.slice(0,10),I=C.slice(10)):b=C;for(var S=b.length-1;S>=0;S--)if(null!=(D=b[S])){var A=(S-(b.length-1)/2)*N;D.node.setPosition(cc.v2(A,0)),y.addChild(D.node,S),D.node.zIndex=S,S==b.length-1&&0==I.length&&D.showDizhuFlag(o)}for(S=I.length-1;S>=0;S--)null!=(D=I[S])&&(A=(S-(I.length-1)/2)*N,D.node.setPosition(cc.v2(A,E)),y.addChild(D.node,S),D.node.zIndex=100+S,S==I.length-1&&D.showDizhuFlag(o))}else if(1==r){for(S=g-1;S>=0;S--)if(null!=(D=C[S])){A=0;var R=0;S>9?(A=N+(S-10)*N,R=E):A=N+S*N,D.node.setPosition(cc.v2(A,a?R+114:R)),y.addChild(D.node,S),D.node.zIndex=S,S==C.length-1&&D.showDizhuFlag(o)}}else if(2==r){var O=C;for(cc.sys.platform!=cc.sys.ANDROID&&(O=C.toReversed()),b=[],I=[],g>9?(I=O.slice(0,O.length-10),b=O.slice(O.length-10)):b=O,S=0;S<b.length;S++)null!=(D=b[S])&&(A=-N-S*N,D.node.setPosition(cc.v2(A,a?114:0)),y.addChild(D.node,S),D.node.zIndex=-100*S,0==S&&0==I.length&&D.showDizhuFlag(o));var P=I;for(cc.sys.platform!=cc.sys.ANDROID&&(P=I.toReversed()),S=0;S<P.length;S++){var D;null!=(D=P[S])&&(A=-10*N+S*N,D.node.setPosition(cc.v2(A,a?114+E:E)),y.addChild(D.node,S),D.node.zIndex=100*S,S==P.length-1&&D.showDizhuFlag(o))}}!a&&n&&(this.showOutCardType(m,r),this.playCardSound(C,m,e))}},t.prototype.showOutCardType=function(e,t){if(e&&e!=u.DdzCardsType.CARD_TYPE_ERROR){(e==u.DdzCardsType.CARD_TYPE_BOMB||u.DdzCardsType.CARD_TYPE_ROCKET||u.DdzCardsType.CARD_TYPE_ONELINE||u.DdzCardsType.CARD_TYPE_THREELINE||u.DdzCardsType.CARD_TYPE_PLANEWITHONE||u.DdzCardsType.CARD_TYPE_PLANEWITHWING)&&base.GUI.getInstance().open(h.UIID197001001.CardTypeEffects,p.BUNDLENAME.GAME,[e]);var a="";switch(e){case u.DdzCardsType.CARD_TYPE_PLANEWITHONE:case u.DdzCardsType.CARD_TYPE_PLANEWITHWING:a="Airplane_with_wings";break;case u.DdzCardsType.CARD_TYPE_THREELINE:a="Airplane";break;case u.DdzCardsType.CARD_TYPE_TWOLINE:a="pair";break;case u.DdzCardsType.CARD_TYPE_ONELINE:a="Shun_Zi"}if(""!=a){this.clearAni();var n=this.ui_ani[t],r=this.ui_com[t];n.node.active=!0,r.getChildByName(a).active=!0,this.setSpineAnimation(n,"text",!1,function(){n.node.active=!1,r.getChildByName(a).active=!1})}}},t.prototype.sortOutCard=function(e,t){if(!(null==e||null==e||e.length<=0)){var a=!1;if(t==u.DdzCardsType.CARD_TYPE_THREEWITHONE||u.DdzCardsType.CARD_TYPE_THREEWITHTWO||u.DdzCardsType.CARD_TYPE_PLANEWITHONE||u.DdzCardsType.CARD_TYPE_PLANEWITHWING?a=!0:(u.DdzCardsType.CARD_TYPE_FOURWITHONE||u.DdzCardsType.CARD_TYPE_FOURWITHTWO)&&(a=!0),!a)return e;if(a){var n=[],r=0;l.default.sortCardsUp(e);for(var o=[],s=[],i=e[0],d=1;d<=e.length;d++){var c=e[d],h=d==e.length;if(h||0!=l.default.compareCardPoints(i,c)){var p=r+1;if(0==r)s.push(i);else if(1==r)for(var _=0;_<2;++_){var f=e[d-p+_];s.push(f)}else if(2==r){for(_=0;_<2;++_)f=e[d-p+_],o.push(f);o.push(e[d-1])}else if(r>=3){for(_=0;_<2;++_)f=e[d-p+_],o.push(f);o.push(e[d-2]),o.push(e[d-1])}if(r=0,h)break}else r++;i=e[d]}o.length>0&&l.default.sortCardsDown(o),s.length>0&&l.default.sortCardsDown(s);for(var g=0;g<o.length;g++)n.push(o[g]);for(g=0;g<s.length;g++)n.push(s[g]);return n}}},t.prototype.clearOutCards=function(e){for(var t=s.default.getInstance().getViewChairID(e),a=0;a<this.tipsNodes[t].children.length;a++)this.tipsNodes[t].children[a].active=!1;this.outCardsNs[t].destroyAllChildren()},t.prototype.showTips=function(e,t){var a=s.default.getInstance().getViewChairID(e),n=base.LanguageManager.getInstance().getDstStr("197001001_tips_16",p.BUNDLENAME.GAME),r=base.LanguageManager.getInstance().getDstStr("197001001_tips_17",p.BUNDLENAME.GAME),o=base.LanguageManager.getInstance().getDstStr("197001001_tips_19",p.BUNDLENAME.GAME),i=base.LanguageManager.getInstance().getDstStr("197001001_tips_18",p.BUNDLENAME.GAME);if(s.default.getInstance().stage==p.GameState197001001.banker)if(0==t){(l=this.tipsNodes[a].getChildByName("red")).active=!0;var d=s.default.getInstance().stage==p.GameState197001001.scramble_banker?n:r;l.getComponent(cc.Label).string=d}else(l=this.tipsNodes[a].getChildByName("green")).active=!0,l.getComponent(cc.Label).string=t+o;else if(s.default.getInstance().stage==p.GameState197001001.play||s.default.getInstance().stage==p.GameState197001001.catch){var l;(l=this.tipsNodes[a].getChildByName("red")).active=!0,l.getComponent(cc.Label).string=i}},t.prototype.getClockNodePos=function(e){var t=s.default.getInstance().getViewChairID(e);return this.node.getChildByName("pos"+t).getPosition()},t.prototype.createNewCards=function(e){var t=l.default.calculateSuit(e),a=l.default.calculatePoints(e);if(-1==t||-1==a)return cc.log("\u521b\u5efa\u724c\u4e3a\u7a7a"),null;var n=cc.instantiate(this.cardItemPerfab).getComponent(d.default),r=l.default.getPokerSpName(t,a),o=s.default.getInstance().cardsPokerAtlas.getSpriteFrame(r);return n.setCardSuitAndPoint(t,a),n.cardId=e,n.setSpriteFrameOfCard(o),n},t.prototype.setSpineAnimation=function(e,t,a,n){e.setAnimation(0,t,a)&&!a&&e.setCompleteListener(function(){e.setCompleteListener(null),n&&n()})},t.prototype.playCardSound=function(e,t,a){if(!(t<=0)){var n="",r=s.default.getInstance().getUserSex(a);if(base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH){if(t==u.DdzCardsType.CARD_TYPE_ONE)switch(e[0].point){case 1:n=r?p.SOUNDS_NAME.nan3:p.SOUNDS_NAME.nv3;break;case 2:n=r?p.SOUNDS_NAME.nan4:p.SOUNDS_NAME.nv4;break;case 3:n=r?p.SOUNDS_NAME.nan5:p.SOUNDS_NAME.nv5;break;case 4:n=r?p.SOUNDS_NAME.nan6:p.SOUNDS_NAME.nv6;break;case 5:n=r?p.SOUNDS_NAME.nan7:p.SOUNDS_NAME.nv7;break;case 6:n=r?p.SOUNDS_NAME.nan8:p.SOUNDS_NAME.nv8;break;case 7:n=r?p.SOUNDS_NAME.nan9:p.SOUNDS_NAME.nv9;break;case 8:n=r?p.SOUNDS_NAME.nan10:p.SOUNDS_NAME.nv10;break;case 9:n=r?p.SOUNDS_NAME.nanJ:p.SOUNDS_NAME.nvJ;break;case 10:n=r?p.SOUNDS_NAME.nanQ:p.SOUNDS_NAME.nvQ;break;case 11:n=r?p.SOUNDS_NAME.nanK:p.SOUNDS_NAME.nvK;break;case 12:n=r?p.SOUNDS_NAME.nanA:p.SOUNDS_NAME.nvA;break;case 13:n=r?p.SOUNDS_NAME.nan2:p.SOUNDS_NAME.nv2;break;case 14:n=r?p.SOUNDS_NAME.nanxiaowang:p.SOUNDS_NAME.nvxiaowang;break;case 15:n=r?p.SOUNDS_NAME.nandawang:p.SOUNDS_NAME.nvdawang}else if(t==u.DdzCardsType.CARD_TYPE_TWO)switch(e[0].point){case 1:n=r?p.SOUNDS_NAME.dui3_1:p.SOUNDS_NAME.dui3;break;case 2:n=r?p.SOUNDS_NAME.dui4_1:p.SOUNDS_NAME.dui4;break;case 3:n=r?p.SOUNDS_NAME.dui5_1:p.SOUNDS_NAME.dui5;break;case 4:n=r?p.SOUNDS_NAME.dui6_1:p.SOUNDS_NAME.dui6;break;case 5:n=r?p.SOUNDS_NAME.dui7_1:p.SOUNDS_NAME.dui7;break;case 6:n=r?p.SOUNDS_NAME.dui8_1:p.SOUNDS_NAME.dui8;break;case 7:n=r?p.SOUNDS_NAME.dui9_1:p.SOUNDS_NAME.dui9;break;case 8:n=r?p.SOUNDS_NAME.dui10_1:p.SOUNDS_NAME.dui10;break;case 9:n=r?p.SOUNDS_NAME.dui11_1:p.SOUNDS_NAME.dui11;break;case 10:n=r?p.SOUNDS_NAME.dui12_1:p.SOUNDS_NAME.dui12;break;case 11:n=r?p.SOUNDS_NAME.dui13_1:p.SOUNDS_NAME.dui13;break;case 12:n=r?p.SOUNDS_NAME.dui1_1:p.SOUNDS_NAME.dui1;break;case 13:n=r?p.SOUNDS_NAME.dui2_1:p.SOUNDS_NAME.dui2}else t==u.DdzCardsType.CARD_TYPE_ONELINE?n=r?p.SOUNDS_NAME.shunzi_1:p.SOUNDS_NAME.shunzi:t==u.DdzCardsType.CARD_TYPE_TWOLINE?n=r?p.SOUNDS_NAME.liandui_1:p.SOUNDS_NAME.liandui:t==u.DdzCardsType.CARD_TYPE_THREELINE?n=r?p.SOUNDS_NAME.feiji:p.SOUNDS_NAME.feiji_1:t==u.DdzCardsType.CARD_TYPE_THREEWITHONE?n=r?p.SOUNDS_NAME.sandaiyi_1:p.SOUNDS_NAME.sandaiyi:t==u.DdzCardsType.CARD_TYPE_THREEWITHTWO?n=r?p.SOUNDS_NAME.sandaiyidui_1:p.SOUNDS_NAME.sandaiyidui:t==u.DdzCardsType.CARD_TYPE_PLANEWITHONE?n=r?p.SOUNDS_NAME.feiji:p.SOUNDS_NAME.feiji_1:t==u.DdzCardsType.CARD_TYPE_PLANEWITHWING?n=r?p.SOUNDS_NAME.feiji:p.SOUNDS_NAME.feiji_1:t==u.DdzCardsType.CARD_TYPE_FOURWITHONE?n=r?p.SOUNDS_NAME.sidaier:p.SOUNDS_NAME.sidaier_1:t==u.DdzCardsType.CARD_TYPE_FOURWITHTWO?n=r?p.SOUNDS_NAME.sidailiangdui:p.SOUNDS_NAME.sidailiangdui_1:t==u.DdzCardsType.CARD_TYPE_BOMB?n=r?p.SOUNDS_NAME.zhadan_1:p.SOUNDS_NAME.zhadan:t==u.DdzCardsType.CARD_TYPE_ROCKET&&(n=r?p.SOUNDS_NAME.wangzha:p.SOUNDS_NAME.wangzha_1);var o=s.default.getInstance().getRemainingNum(a)-e.length,i=function(){if(0!=e.length&&!(o<=0)){var t="";1==o?(t=r?p.SOUNDS_NAME.baojing1_1:p.SOUNDS_NAME.baojing1,base.SoundManager.getInstance().playEffect(t,!1,p.BUNDLENAME.GAME)):2==o&&(t=r?p.SOUNDS_NAME.baojing2_1:p.SOUNDS_NAME.baojing2,base.SoundManager.getInstance().playEffect(t,!1,p.BUNDLENAME.GAME))}};""!=n?base.SoundManager.getInstance().playEffect(n,!1,p.BUNDLENAME.GAME,null,i):i()}else{if(t==u.DdzCardsType.CARD_TYPE_ONE)switch(e[0].point){case 1:n=r?p.SOUNDS_NAME_EN.nan3:p.SOUNDS_NAME_EN.nv3;break;case 2:n=r?p.SOUNDS_NAME_EN.nan4:p.SOUNDS_NAME_EN.nv4;break;case 3:n=r?p.SOUNDS_NAME_EN.nan5:p.SOUNDS_NAME_EN.nv5;break;case 4:n=r?p.SOUNDS_NAME_EN.nan6:p.SOUNDS_NAME_EN.nv6;break;case 5:n=r?p.SOUNDS_NAME_EN.nan7:p.SOUNDS_NAME_EN.nv7;break;case 6:n=r?p.SOUNDS_NAME_EN.nan8:p.SOUNDS_NAME_EN.nv8;break;case 7:n=r?p.SOUNDS_NAME_EN.nan9:p.SOUNDS_NAME_EN.nv9;break;case 8:n=r?p.SOUNDS_NAME_EN.nan10:p.SOUNDS_NAME_EN.nv10;break;case 9:n=r?p.SOUNDS_NAME_EN.nanJ:p.SOUNDS_NAME_EN.nvJ;break;case 10:n=r?p.SOUNDS_NAME_EN.nanQ:p.SOUNDS_NAME_EN.nvQ;break;case 11:n=r?p.SOUNDS_NAME_EN.nanK:p.SOUNDS_NAME_EN.nvK;break;case 12:n=r?p.SOUNDS_NAME_EN.nanA:p.SOUNDS_NAME_EN.nvA;break;case 13:n=r?p.SOUNDS_NAME_EN.nan2:p.SOUNDS_NAME_EN.nv2;break;case 14:n=r?p.SOUNDS_NAME_EN.nanxiaowang:p.SOUNDS_NAME_EN.nvxiaowang;break;case 15:n=r?p.SOUNDS_NAME_EN.nandawang:p.SOUNDS_NAME_EN.nvdawang}else if(t==u.DdzCardsType.CARD_TYPE_TWO)switch(e[0].point){case 1:n=r?p.SOUNDS_NAME_EN.dui3_1:p.SOUNDS_NAME_EN.dui3;break;case 2:n=r?p.SOUNDS_NAME_EN.dui4_1:p.SOUNDS_NAME_EN.dui4;break;case 3:n=r?p.SOUNDS_NAME_EN.dui5_1:p.SOUNDS_NAME_EN.dui5;break;case 4:n=r?p.SOUNDS_NAME_EN.dui6_1:p.SOUNDS_NAME_EN.dui6;break;case 5:n=r?p.SOUNDS_NAME_EN.dui7_1:p.SOUNDS_NAME_EN.dui7;break;case 6:n=r?p.SOUNDS_NAME_EN.dui8_1:p.SOUNDS_NAME_EN.dui8;break;case 7:n=r?p.SOUNDS_NAME_EN.dui9_1:p.SOUNDS_NAME_EN.dui9;break;case 8:n=r?p.SOUNDS_NAME_EN.dui10_1:p.SOUNDS_NAME_EN.dui10;break;case 9:n=r?p.SOUNDS_NAME_EN.dui11_1:p.SOUNDS_NAME_EN.dui11;break;case 10:n=r?p.SOUNDS_NAME_EN.dui12_1:p.SOUNDS_NAME_EN.dui12;break;case 11:n=r?p.SOUNDS_NAME_EN.dui13_1:p.SOUNDS_NAME_EN.dui13;break;case 12:n=r?p.SOUNDS_NAME_EN.dui1_1:p.SOUNDS_NAME_EN.dui1;break;case 13:n=r?p.SOUNDS_NAME_EN.dui2_1:p.SOUNDS_NAME_EN.dui2}else t==u.DdzCardsType.CARD_TYPE_ONELINE?n=r?p.SOUNDS_NAME_EN.shunzi_1:p.SOUNDS_NAME_EN.shunzi:t==u.DdzCardsType.CARD_TYPE_TWOLINE?n=r?p.SOUNDS_NAME_EN.liandui_1:p.SOUNDS_NAME_EN.liandui:t==u.DdzCardsType.CARD_TYPE_THREELINE?n=r?p.SOUNDS_NAME_EN.feiji:p.SOUNDS_NAME_EN.feiji_1:t==u.DdzCardsType.CARD_TYPE_THREEWITHONE?n=r?p.SOUNDS_NAME_EN.sandaiyi_1:p.SOUNDS_NAME_EN.sandaiyi:t==u.DdzCardsType.CARD_TYPE_THREEWITHTWO?n=r?p.SOUNDS_NAME_EN.sandaiyidui_1:p.SOUNDS_NAME_EN.sandaiyidui:t==u.DdzCardsType.CARD_TYPE_PLANEWITHONE?n=r?p.SOUNDS_NAME_EN.feiji:p.SOUNDS_NAME_EN.feiji_1:t==u.DdzCardsType.CARD_TYPE_PLANEWITHWING?n=r?p.SOUNDS_NAME_EN.feiji:p.SOUNDS_NAME_EN.feiji_1:t==u.DdzCardsType.CARD_TYPE_FOURWITHONE?n=r?p.SOUNDS_NAME_EN.sidaier:p.SOUNDS_NAME_EN.sidaier_1:t==u.DdzCardsType.CARD_TYPE_FOURWITHTWO?n=r?p.SOUNDS_NAME_EN.sidailiangdui:p.SOUNDS_NAME_EN.sidailiangdui_1:t==u.DdzCardsType.CARD_TYPE_BOMB?n=r?p.SOUNDS_NAME_EN.zhadan_1:p.SOUNDS_NAME_EN.zhadan:t==u.DdzCardsType.CARD_TYPE_ROCKET&&(n=r?p.SOUNDS_NAME_EN.wangzha:p.SOUNDS_NAME_EN.wangzha_1);o=s.default.getInstance().getRemainingNum(a)-e.length,i=function(){if(0!=e.length&&!(o<=0)){var t="";1==o?(t=r?p.SOUNDS_NAME_EN.baojing1_1:p.SOUNDS_NAME_EN.baojing1,base.SoundManager.getInstance().playEffect(t,!1,p.BUNDLENAME.GAME)):2==o&&(t=r?p.SOUNDS_NAME_EN.baojing2_1:p.SOUNDS_NAME_EN.baojing2,base.SoundManager.getInstance().playEffect(t,!1,p.BUNDLENAME.GAME))}},""!=n?base.SoundManager.getInstance().playEffect(n,!1,p.BUNDLENAME.GAME,null,i):i()}}},o([g(cc.Prefab)],t.prototype,"cardItemPerfab",void 0),o([g([cc.Node])],t.prototype,"outCardsNs",void 0),o([g([cc.Node])],t.prototype,"tipsNodes",void 0),o([g([sp.Skeleton])],t.prototype,"ui_ani",void 0),o([g([cc.Node])],t.prototype,"ui_com",void 0),o([f],t)}(cc.Component);a.default=v,cc._RF.pop()},{"../../framework/Cards/DdzCard":"DdzCard","../../framework/Cards/DdzCardCfg":"DdzCardCfg","../../framework/Cards/DdzCardItem":"DdzCardItem","../../framework/Cards/DdzCardUtils":"DdzCardUtils","../../framework/Const/DdzConst":"DdzConst","../../global/CommonEnum197001001":"CommonEnum197001001","../../global/Global197001001":"Global197001001","../../global/UIConfigData197001001":"UIConfigData197001001"}],PlayerHead197001001:[function(e,t,a){"use strict";cc._RF.push(t,"e4df9Pg/h9EZaI/fWAcjvgr","PlayerHead197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),o([i],t)}(cc.Component));a.default=d,cc._RF.pop()},{}],PlayerItem197001001:[function(e,t,a){"use strict";cc._RF.push(t,"7eba31Uga9BDqRosO2us8JL","PlayerItem197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../global/CommonEnum197001001"),i=e("../../global/Global197001001"),d=cc._decorator,l=d.ccclass,c=d.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_avatarNode=null,t.ui_avatar=null,t.ui_username=null,t.ui_scores=null,t.ui_ani=[],t.ui_bei=null,t}return r(t,e),t.prototype.onLoad=function(){this.refresh()},t.prototype.refresh=function(){this.ui_ani.forEach(function(e){e.active=!1}),this.ui_avatarNode.active=!1,this.node.active=!1,this.ui_bei&&(this.ui_bei.active=!1,this.ui_bei.getChildByName("ui_ani").active=!1)},t.prototype.getHeadIcon=function(e){this.ui_avatar.getComponent(cc.Sprite).spriteFrame=i.default.getInstance().headAtlas.getSpriteFrame(e)},t.prototype.initUserInfo=function(e){this.getHeadIcon(e.avatarUrl),this.ui_username.string=e.userName,this.ui_scores.string=Number(e.socre).toFixed(2),i.default.getInstance().stage==s.GameState197001001.ready||i.default.getInstance().stage==s.GameState197001001.deal_cards||i.default.getInstance().stage==s.GameState197001001.banker||i.default.getInstance().stage==s.GameState197001001.scramble_banker?this.ui_avatarNode.active=!0:(this.ui_ani[0].active=!i.default.getInstance().bankerPos==e.pos,this.ui_ani[1].active=i.default.getInstance().bankerPos==e.pos),this.node.active=!0},t.prototype.updateRemainingNum=function(e){this.ui_bei&&(this.ui_bei.active=!0,this.ui_bei.getChildByName("ui_number").getComponent(cc.Label).string=e.toString(),e<=5&&(this.ui_bei.getChildByName("ui_ani").active=!0))},t.prototype.hideRemainingNum=function(){this.ui_bei&&(this.ui_bei.active=!1,this.ui_bei.getChildByName("ui_ani").active=!1)},t.prototype.bankerTransform=function(e,t){if(!e)return this.ui_avatarNode.active=!1,this.ui_ani[0].active=!t,void(this.ui_ani[1].active=t);var a=this,n=new cc.Node,r=n.addComponent(base.AnimationExtend),o=new base.AniParam(base.ANIMATION_TYPE.SPRITE_FRAMES_CLIP,"textures/clip/yun",s.BUNDLENAME.GAME,"clip_yun");r.init(o),r.play("clip_yun",!1,base.Handler.create(this,function(){n.destroy(),a.ui_ani[0].active=!t,a.ui_ani[1].active=t})),this.node.addChild(n),this.ui_avatarNode.active=!1},t.prototype.setResult=function(e){this.ui_scores.string=Number(e).toFixed(2),this.ui_ani.forEach(function(e){e.active=!1}),this.ui_avatarNode.active=!0},o([c(cc.Node)],t.prototype,"ui_avatarNode",void 0),o([c(cc.Node)],t.prototype,"ui_avatar",void 0),o([c(cc.Label)],t.prototype,"ui_username",void 0),o([c(cc.Label)],t.prototype,"ui_scores",void 0),o([c(cc.Node)],t.prototype,"ui_ani",void 0),o([c({type:cc.Node,tooltip:"\u5269\u4f59\u6251\u514b"})],t.prototype,"ui_bei",void 0),o([l],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../../global/CommonEnum197001001":"CommonEnum197001001","../../global/Global197001001":"Global197001001"}],PlayerManager197001001:[function(e,t,a){"use strict";cc._RF.push(t,"9007bSFqaBPEowHGkFJbnY/","PlayerManager197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../global/Global197001001"),i=e("./PlayerItem197001001"),d=cc._decorator,l=d.ccclass,c=d.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_player=[],t.m_player=[],t}return r(t,e),t.prototype.onLoad=function(){for(var e=0;e<this.ui_player.length;e++)this.m_player[e]=this.ui_player[e].getComponent(i.default)},t.prototype.refresh=function(){for(var e=0;e<this.m_player.length;e++)this.m_player[e].refresh()},t.prototype.initUserInfo=function(){for(var e=s.default.getInstance().mUserList,t=0;t<e.length;t++){var a=e[t],n=s.default.getInstance().getViewChairID(a.pos);this.m_player[n].initUserInfo(a)}},t.prototype.hideRemainingNum=function(){for(var e=0;e<this.m_player.length;e++)this.m_player[e].hideRemainingNum()},t.prototype.updateRemainingNum2=function(e,t){var a=s.default.getInstance().getViewChairID(e);0!=a&&this.m_player[a].updateRemainingNum(t)},t.prototype.updateRemainingNum=function(e){for(var t=0;t<this.m_player.length;t++)0!=t&&this.m_player[t].updateRemainingNum(e[t])},t.prototype.bankerTransform=function(e){void 0===e&&(e=s.default.getInstance().isFrontDesk);for(var t=s.default.getInstance().getViewChairID(s.default.getInstance().bankerPos),a=0;a<this.m_player.length;a++)this.m_player[a].bankerTransform(e,t==a)},t.prototype.setResult=function(){},o([c(cc.Node)],t.prototype,"ui_player",void 0),o([l],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../../global/Global197001001":"Global197001001","./PlayerItem197001001":"PlayerItem197001001"}],PreloadAniMsg197001001:[function(e,t,a){"use strict";cc._RF.push(t,"e627bu6sl9OS7IMMNm5+Hnu","PreloadAniMsg197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../global/CommonEnum197001001"),i=e("./MController197001001"),d=cc._decorator,l=d.ccclass,c=d.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ui_progressBar=null,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),this.resize(),this.ui_progressBar.progress=0,this.bundleName=s.BUNDLENAME.GAME,this.load()},t.prototype.loadCompleteCallBack=function(){var e=base.ResLoader.get("prefabs/main",cc.Prefab,this.bundleName);if(!e)return cc.error("prefabs/main.prefab is not find!");var t=cc.instantiate(e);cc.find("Canvas").addChild(t),this.node.destroy()},t.prototype.loadProgress=function(e){this.ui_progressBar.progress=e},t.prototype.layoutLandscape=function(){e.prototype.layoutLandscape.call(this),this.node.getComponent(i.default).stateIndex=0},t.prototype.layoutPortrait=function(){e.prototype.layoutPortrait.call(this),this.node.getComponent(i.default).stateIndex=1},o([c(cc.ProgressBar)],t.prototype,"ui_progressBar",void 0),o([l],t)}(base.LoadingModel);a.default=u,cc._RF.pop()},{"../global/CommonEnum197001001":"CommonEnum197001001","./MController197001001":"MController197001001"}],RandNumber197001001:[function(e,t,a){"use strict";cc._RF.push(t,"3a8adNZ46RFa5aUhQqovfqI","RandNumber197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=s.property,l=s.menu,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=0,t.max=0,t}return r(t,e),t.prototype.onLoad=function(){this.updateNum()},t.prototype.updateNum=function(){},o([d()],t.prototype,"min",void 0),o([d()],t.prototype,"max",void 0),o([i,l("197001001/RandNumber197001001")],t)}(cc.Component);a.default=c,cc._RF.pop()},{}],Room197001001:[function(e,t,a){"use strict";cc._RF.push(t,"981d5IC6+VFdrZZIyQ9HVRl","Room197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../evnet/GameEventNames197001001"),i=e("../global/CommonEnum197001001"),d=e("../global/Global197001001"),l=e("ddzServers"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._endTimestamp=0,t.m_isUserOut=!0,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),this.resize()},t.prototype.addEventListener=function(){e.prototype.addEventListener.call(this),l.addEventListener(),base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.Game_Msg_User_Operation,this.sendOperationResp,this),base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.Game_Msg_LandOperationResp,this.sendCallLandlordScoreOperationResp,this),base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.Game_Msg_NextGame,this.nextGame,this),base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.Game_Msg_scrambleBanker,this.scrambleBanker,this),base.MessageManager.getInstance().addEventListener(s.GameEventNames197001001.canrobStateNotify,this.canrobStateNotify,this)},t.prototype.removeEventListener=function(){e.prototype.removeEventListener.call(this),l.removeEventListener(),base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.Game_Msg_NextGame,this.nextGame,this),base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.Game_Msg_User_Operation,this.sendOperationResp,this),base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.Game_Msg_LandOperationResp,this.sendCallLandlordScoreOperationResp,this),base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.Game_Msg_scrambleBanker,this.scrambleBanker,this),base.MessageManager.getInstance().removeEventListener(s.GameEventNames197001001.canrobStateNotify,this.canrobStateNotify,this)},t.prototype.startGame=function(){base.MessageManager.getInstance().dispatchEvent(s.GameEventNames197001001.Game_Msg_gameStateHandler,2),d.default.getInstance().stage=i.GameState197001001.wait},t.prototype.sendCallLandlordScoreOperationResp=function(){},t.prototype.operationPush=function(e,t){this.hideClockTime();var a=t.operation.pos;switch(d.default.getInstance().wChairID,t.operation.op){case i.GameOperation197001001.snatch_landlord:break;case i.GameOperation197001001.play_cards:this.playCardsPush(a,t.operation.diff.landlord.outCard)}},t.prototype.hideClockTime=function(){base.MessageManager.getInstance().dispatchEvent(base.EventMessage.GAME_mess_clockHide)},t.prototype.updateClockTime=function(e){var t=this,a=new base.ClockParamType;a.countDown=e,a.crucialSecond=3,a.completeFunction=function(){t.completeFunction()},base.MessageManager.getInstance().dispatchEvent(base.EventMessage.GAME_mess_clockStart,a)},t.prototype.completeFunction=function(){},t.prototype.refresh=function(){},t.prototype.messLeaveRoomResp=function(e,t,a){d.default.getInstance().leaveType==i.LeaveType197001001.nextGame?(d.default.getInstance().isRueult=!0,this.nextGame()):a()},t.prototype.nextGame=function(){},t.prototype.scrambleBanker=function(){},t.prototype.syncRoomStagePlay=function(){},t.prototype.syncRoomStageCatch=function(){},t.prototype.playCardsPush=function(){},t.prototype.syncRoomStageClose=function(){},t.prototype.getCardList=function(){return l.getCardList()},t.prototype.geUserList=function(){return l.geUserList()},t.prototype.sendQiangdizhu=function(){l.gameStateHandler("",4)},t.prototype.canrobStateNotify=function(e,t){var a=t.uid;0==t.jiaodizhu&&(a=d.default.getInstance().getUserID(base.MathUtil.getIntRandom(1,2))),l.canrobStateNotify(a),l.gameStateHandler("",5)},t.prototype.gameStateHandler5666=function(){l.gameStateHandler("",6)},t.prototype.sendOperationResp=function(e,t){var a=d.default.getInstance().getUserID(0);l.setarr({userId:a,_cards:t}),0!=t.length&&t||this.nextPlayerNotify(a)},t.prototype.nextPlayerNotify=function(e){l.nextPlayerNotify(e)},t.prototype.getNextPlayerID=function(e){return 0==e?1:1==e?2:2==e?0:void 0},o([u],t)}(base.MainViewModel));a.default=h,cc._RF.pop()},{"../evnet/GameEventNames197001001":"GameEventNames197001001","../global/CommonEnum197001001":"CommonEnum197001001","../global/Global197001001":"Global197001001",ddzServers:"ddzServers"}],RoomGui197001001:[function(e,t,a){"use strict";cc._RF.push(t,"87f4ekCqutNS5V/i2RnUK0v","RoomGui197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../common/MController197001001"),i=e("../evnet/GameEventNames197001001"),d=e("../framework/Utils197001001"),l=e("../global/CommonEnum197001001"),c=e("../global/Global197001001"),u=e("../global/UIConfigData197001001"),h=e("./MingCard197001001"),p=e("./Room197001001"),_=e("./card/HandCard197001001"),f=e("./card/HandCard_1_197001001"),g=e("./card/OutCard197001001"),v=e("./operate/Operate197001001"),m=e("./player/PlayerManager197001001"),C=e("./recorder/CardRecorder197001001"),y=cc._decorator,N=y.ccclass,E=y.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardsPokerAtlas=null,t.headAtlas=null,t.ui_baseScore=null,t.ui_multiple=null,t.ui_clock=null,t.ui_chuntianAniNode=null,t.m_mingCard=null,t.m_outCard=null,t.m_operate=null,t.m_playerManager=null,t.m_recorder=null,t.m_handCard_0=null,t.m_handCard_1=null,t.m_currentUser=0,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),c.default.getInstance().headAtlas=this.headAtlas,c.default.getInstance().cardsPokerAtlas=this.cardsPokerAtlas,this.m_recorder=cc.find("ui_control/ui_recorder",this.node).getComponent(C.default),this.m_handCard_0=cc.find("ui_control/ui_handCard_0",this.node).getComponent(_.default),this.m_handCard_1=cc.find("ui_control/ui_handCard_1",this.node).getComponent(f.default),this.m_playerManager=cc.find("ui_control/ui_players",this.node).getComponent(m.default),this.m_operate=cc.find("ui_control/ui_operate",this.node).getComponent(v.default),this.m_outCard=cc.find("ui_control/ui_outCard",this.node).getComponent(g.default);var t=base.MathUtil.getIntRandom(0,1);base.SoundManager.getInstance().playMusic(0==t?l.SOUNDS_NAME.MusicEx_Normal:l.SOUNDS_NAME.MusicEx_Normal2,!0,l.BUNDLENAME.GAME),this.refresh()},t.prototype.addEventListener=function(){e.prototype.addEventListener.call(this),base.MessageManager.getInstance().addEventListener(i.GameEventNames197001001.Game_Msg_IS_TUOGUAN,this.setBtnTuoGuan,this),base.MessageManager.getInstance().addEventListener(i.GameEventNames197001001.Game_Msg_Clock_endCallBack,this.onEventClockEndCallBack,this),base.MessageManager.getInstance().addEventListener(i.GameEventNames197001001.Game_Msg_onEventResultClose,this.onEventResultClose,this),base.MessageManager.getInstance().addEventListener(i.GameEventNames197001001.Game_Msg_STATE,this.syncRoomStagePush,this),base.MessageManager.getInstance().addEventListener("change_master_notify",this.change_master_notify,this),base.MessageManager.getInstance().addEventListener("selfPlayAHandNotify",this.selfPlayAHandNotify,this),base.MessageManager.getInstance().addEventListener("rootPlayAHandNotify",this.rootPlayAHandNotify,this),base.MessageManager.getInstance().addEventListener("gameover_langd",this.gameover_langd,this)},t.prototype.removeEventListener=function(){e.prototype.removeEventListener.call(this),base.MessageManager.getInstance().removeEventListener(i.GameEventNames197001001.Game_Msg_IS_TUOGUAN,this.setBtnTuoGuan,this),base.MessageManager.getInstance().removeEventListener(i.GameEventNames197001001.Game_Msg_Clock_endCallBack,this.onEventClockEndCallBack,this),base.MessageManager.getInstance().removeEventListener(i.GameEventNames197001001.Game_Msg_onEventResultClose,this.onEventResultClose,this),base.MessageManager.getInstance().removeEventListener(i.GameEventNames197001001.Game_Msg_STATE,this.syncRoomStagePush,this),base.MessageManager.getInstance().removeEventListener("change_master_notify",this.change_master_notify,this),base.MessageManager.getInstance().removeEventListener("selfPlayAHandNotify",this.selfPlayAHandNotify,this),base.MessageManager.getInstance().removeEventListener("rootPlayAHandNotify",this.rootPlayAHandNotify,this),base.MessageManager.getInstance().removeEventListener("gameover_langd",this.gameover_langd,this)},t.prototype.onEventResultClose=function(){this.m_operate.showNextGameBtn(!0)},t.prototype.refresh=function(){this.m_currentUser=0,c.default.getInstance().reset(),this.m_playerManager.refresh(),this.m_recorder.refresh(),this.m_operate.refresh(),this.m_outCard.refresh(),this.m_mingCard.refresh(),this.ui_baseScore.string="",this.ui_multiple.string="",this.showChunTianAni(),this.m_handCard_0.reset(),this.m_handCard_1.reset(),this.m_isUserOut=!0,c.default.getInstance().isPlay=!1,base.GUI.getInstance().open(u.UIID197001001.Loading,l.BUNDLENAME.GAME)},t.prototype.start=function(){e.prototype.start&&e.prototype.start.call(this),this.startGame()},t.prototype.syncRoomStagePush=function(e,t){switch(t){case l.GameState197001001.wait:this.scheduleOnce(function(){c.default.getInstance().stage=l.GameState197001001.ready},2);break;case l.GameState197001001.ready:this.enterRoomPush();break;case l.GameState197001001.sendcard:this._endTimestamp=3,this.dealCardsPush("");break;case l.GameState197001001.banker:case l.GameState197001001.scramble_banker:this._endTimestamp=10;break;case l.GameState197001001.play:this.m_outCard.clearAllTips(),this.m_outCard.refresh(),c.default.getInstance().lastCards=[],this._endTimestamp=10;break;case l.GameState197001001.catch:this._endTimestamp=10}},t.prototype.enterRoomPush=function(){var e=this.geUserList();this.refresh(),base.GUI.getInstance().remove(u.UIID197001001.Loading,l.BUNDLENAME.GAME),console.log("roleList==>",e),c.default.getInstance().wChairID=0,c.default.getInstance().mUserList=e,this.setBaseScore(0),this.m_playerManager.initUserInfo(),this.scheduleOnce(function(){c.default.getInstance().stage=l.GameState197001001.sendcard},1)},t.prototype.syncRoomStagePlay=function(e){c.default.getInstance().isCardTouch=!0;var t=this;this.m_outCard.refresh(),c.default.getInstance().bankerScore=e.diff.landlord.landlordScore,this.setBaseScore(e.diff.landlord.double),this.m_playerManager.updateRemainingNum(e.diff.landlord.playerRemainingCard),this.m_mingCard.setData(e.diff.landlord.playerRemainingCard),c.default.getInstance().playerRemainingNum=e.diff.landlord.playerRemainingCard,c.default.getInstance().lastCards=[];var a=e.diff.landlord.opp;if(this.m_currentUser=a,this.m_outCard.clearOutCards(a),a==c.default.getInstance().wChairID&&(this.m_isUserOut=!1),0==c.default.getInstance().mLandlordCard.length&&0==c.default.getInstance().mLallLandlordScore&&e.diff.landlord.three.length>0)return c.default.getInstance().mLallLandlordScore=e.diff.landlord.landlordScore,c.default.getInstance().mLandlordCard=e.diff.landlord.three,c.default.getInstance().bankerPos=e.diff.landlord.opp,this.setBaseScore(e.diff.landlord.double),this.m_playerManager.bankerTransform(),void(base.ComUtils.checkHorOrVec()?(this.m_handCard_1.openBankerCard(!1),this.m_handCard_0.openBankerCard(c.default.getInstance().isFrontDesk,function(){if(t.m_recorder.setLandlordCard(),t.m_recorder.showRecorder(!0),c.default.getInstance().bankerPos==c.default.getInstance().wChairID){c.default.getInstance().updateHandCard(e.diff.landlord.three,!0),t.m_handCard_0.pushDizhuCard(e.diff.landlord.three),t.m_handCard_1.pushDizhuCard(e.diff.landlord.three,!1);var n=t.m_operate.getScrambleBankerClock();t.m_operate.showTipsNode(!0),t.ui_clock.setPosition(d.default.convetOtherNodeSpaceAR(n,t.node))}else t.ui_clock.setPosition(t.m_outCard.getClockNodePos(a));t.updateClockTime(t._endTimestamp),t.m_recorder.updateRecorder(e.diff.landlord.noteCards),t.m_recorder.setBtnTuoGuan(!0)})):(this.m_handCard_0.openBankerCard(!1),this.m_handCard_1.openBankerCard(c.default.getInstance().isFrontDesk,function(){if(t.m_recorder.setLandlordCard(),t.m_recorder.showRecorder(!0),c.default.getInstance().bankerPos==c.default.getInstance().wChairID){c.default.getInstance().updateHandCard(e.diff.landlord.three,!0),t.m_handCard_0.pushDizhuCard(e.diff.landlord.three),t.m_handCard_1.pushDizhuCard(e.diff.landlord.three);var n=t.m_operate.getScrambleBankerClock();t.m_operate.showTipsNode(!0),t.ui_clock.setPosition(d.default.convetOtherNodeSpaceAR(n,t.node))}else t.ui_clock.setPosition(t.m_outCard.getClockNodePos(a));t.updateClockTime(t._endTimestamp),t.m_recorder.updateRecorder(e.diff.landlord.noteCards),t.m_recorder.setBtnTuoGuan(!0)})));if(this.m_handCard_0.openBankerCard(!1),this.m_handCard_1.openBankerCard(!1),this.m_recorder.updateRecorder(e.diff.landlord.noteCards),a==c.default.getInstance().wChairID){if(c.default.getInstance().isTuoGuan){var n=this.m_handCard_0.getPlayCardsArr();return void base.MessageManager.getInstance().dispatchEvent(i.GameEventNames197001001.Game_Msg_User_Operation,n)}var r=this.m_operate.getScrambleBankerClock();this.m_operate.showTipsNode(!0),this.ui_clock.setPosition(d.default.convetOtherNodeSpaceAR(r,this.node)),base.ComUtils.checkHorOrVec()?this.m_handCard_0.checkClickCards():this.m_handCard_1.checkClickCards()}else this.ui_clock.setPosition(this.m_outCard.getClockNodePos(a));this.updateClockTime(this._endTimestamp)},t.prototype.syncRoomStageCatch=function(e){var t=e.diff.landlord.opp;if(t==c.default.getInstance().wChairID&&(this.m_isUserOut=!1),this.m_outCard.clearOutCards(t),this.setBaseScore(e.diff.landlord.double),this.m_playerManager.updateRemainingNum(e.diff.landlord.playerRemainingCard),this.m_mingCard.setData(e.diff.landlord.playerRemainingCard),c.default.getInstance().playerRemainingNum=e.diff.landlord.playerRemainingCard,this.m_recorder.updateRecorder(e.diff.landlord.noteCards),this.m_currentUser=t,t==c.default.getInstance().wChairID){if(c.default.getInstance().isTuoGuan){var a=this.m_handCard_0.getPlayCardsArr();return void this.sendOperationResp("",a)}var n=this.m_operate.getScrambleBankerClock(),r=this.m_handCard_0.updatePromptList();this.m_handCard_1.updatePromptList(),this.m_operate.showTipsNode(!0,r.length>0),this.m_operate.showYaoBuqiTips(0==r.length),this.ui_clock.setPosition(d.default.convetOtherNodeSpaceAR(n,this.node));var o=base.ComUtils.checkHorOrVec();0!=r.length&&(o?this.m_handCard_0.checkClickCards():this.m_handCard_1.checkClickCards())}else this.ui_clock.setPosition(this.m_outCard.getClockNodePos(t));this.updateClockTime(this._endTimestamp)},t.prototype.scrambleBanker=function(e,t){if(this.m_currentUser=t,t==c.default.getInstance().wChairID){this.m_operate.showLandlordScore(!0,[1,2,3]);var a=this.m_operate.getScrambleBankerClock();this.ui_clock.setPosition(d.default.convetOtherNodeSpaceAR(a,this.node))}else this.ui_clock.setPosition(this.m_outCard.getClockNodePos(t));this.updateClockTime(this._endTimestamp)},t.prototype.snatchLandlordPush=function(e,t){this.m_operate.showLandlordScore(!1),this.m_outCard.showTips(e,t);var a="",n=c.default.getInstance().getUserSex(e);base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH?0==t?a=c.default.getInstance().stage==l.GameState197001001.banker?n?l.SOUNDS_NAME.NoOrder_1:l.SOUNDS_NAME.NoOrder:n?l.SOUNDS_NAME.NoRob:l.SOUNDS_NAME.NoRob_1:1==t?a=n?l.SOUNDS_NAME.Rob1_1:l.SOUNDS_NAME.Rob1:2==t?a=n?l.SOUNDS_NAME.Rob2_1:l.SOUNDS_NAME.Rob2:3==t&&(a=n?l.SOUNDS_NAME.Rob3:l.SOUNDS_NAME.Rob3_1):0==t?a=c.default.getInstance().stage==l.GameState197001001.banker?n?l.SOUNDS_NAME_EN.NoOrder_1:l.SOUNDS_NAME_EN.NoOrder:n?l.SOUNDS_NAME_EN.NoRob:l.SOUNDS_NAME_EN.NoRob_1:1==t?a=n?l.SOUNDS_NAME_EN.Rob1_1:l.SOUNDS_NAME_EN.Rob1:2==t?a=n?l.SOUNDS_NAME_EN.Rob2_1:l.SOUNDS_NAME_EN.Rob2:3==t&&(a=n?l.SOUNDS_NAME_EN.Rob3:l.SOUNDS_NAME_EN.Rob3_1),""!=a&&base.SoundManager.getInstance().playEffect(a,!1,l.BUNDLENAME.GAME)},t.prototype.change_master_notify=function(e,t){var a=this,n=this;this.m_operate.refresh(),this.hideClockTime();var r=c.default.getInstance().getUserInfoChairID(t.masterId);c.default.getInstance().mLallLandlordScore=3,c.default.getInstance().mLandlordCard=t.cards,c.default.getInstance().bankerPos=r,console.log("bankerPos==>",r),this.m_playerManager.bankerTransform(),base.ComUtils.checkHorOrVec()?(this.m_handCard_1.openBankerCard(!1),this.m_handCard_0.openBankerCard(c.default.getInstance().isFrontDesk,function(){n.m_recorder.setLandlordCard(),n.m_recorder.showRecorder(!0),c.default.getInstance().bankerPos==c.default.getInstance().wChairID&&(c.default.getInstance().updateHandCard(t.cards,!0),n.m_handCard_0.pushDizhuCard(t.cards),n.m_handCard_1.pushDizhuCard(t.cards,!1))})):(this.m_handCard_0.openBankerCard(!1),this.m_handCard_1.openBankerCard(c.default.getInstance().isFrontDesk,function(){n.m_recorder.setLandlordCard(),n.m_recorder.showRecorder(!0),c.default.getInstance().bankerPos==c.default.getInstance().wChairID&&(c.default.getInstance().updateHandCard(t.cards,!0),n.m_handCard_0.pushDizhuCard(t.cards),n.m_handCard_1.pushDizhuCard(t.cards))})),this.scheduleOnce(function(){c.default.getInstance().stage=l.GameState197001001.play,a.gameStateHandler5666(),n.m_recorder.setBtnTuoGuan(!0)},2)},t.prototype.playCardsPush=function(e,t){if(this.m_operate.showTipsNode(),this.m_operate.showYaoBuqiTips(!1),e==c.default.getInstance().wChairID&&(this.m_handCard_0.setStandCardDown(),this.m_handCard_1.setStandCardDown(),this.m_isUserOut||base.MessageManager.getInstance().dispatchEvent(i.GameEventNames197001001.Game_Msg_IS_TUOGUAN,!0)),0==t.length){this.m_outCard.showTips(e,0);var a="",n=c.default.getInstance().getUserSex(e),r=base.MathUtil.getIntRandom(0,3);base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH?0==r?a=n?l.SOUNDS_NAME.buyao1_1:l.SOUNDS_NAME.buyao1:1==r?a=n?l.SOUNDS_NAME.buyao3:l.SOUNDS_NAME.buyao2:2==r?a=n?l.SOUNDS_NAME.buyao4_1:l.SOUNDS_NAME.buyao4:3==r&&(a=n?l.SOUNDS_NAME.buyao2_1:l.SOUNDS_NAME.buyao3_1):0==r?a=n?l.SOUNDS_NAME_EN.buyao1_1:l.SOUNDS_NAME_EN.buyao1:1==r?a=n?l.SOUNDS_NAME_EN.buyao3:l.SOUNDS_NAME_EN.buyao2:2==r?a=n?l.SOUNDS_NAME_EN.buyao4_1:l.SOUNDS_NAME_EN.buyao4:3==r&&(a=n?l.SOUNDS_NAME_EN.buyao2_1:l.SOUNDS_NAME_EN.buyao3_1),""!=a&&base.SoundManager.getInstance().playEffect(a,!1,l.BUNDLENAME.GAME)}else c.default.getInstance().lastCards=t,this.m_outCard.showOutCards(e,t,!1),e==c.default.getInstance().wChairID&&(c.default.getInstance().playCardsArr=[],this.m_handCard_0.updateHandCardVals(t),this.m_handCard_1.updateHandCardVals(t),c.default.getInstance().updateHandCard(t,!1))},t.prototype.dealCardsPush=function(e,t){var a=this;t=this.getCardList(),console.log("\u53d1\u724c\u63a8\u9001==>",t),this.m_recorder.openMenu(!1),this.m_handCard_0.reset(),this.m_handCard_1.reset(),this.m_operate.refresh(),this.m_outCard.clearAllTips(),c.default.getInstance().mHandCard=t,this.m_handCard_0.pushHandCards(),this.m_handCard_1.pushHandCards(),base.ComUtils.checkHorOrVec()?this.m_handCard_1.showBankerCard(!1):this.m_handCard_0.showBankerCard(!1),this.scheduleOnce(function(){c.default.getInstance().stage=l.GameState197001001.banker,a.sendQiangdizhu()},3)},t.prototype.settleAccountsPush=function(e,t){var a=this;c.default.getInstance().isCardTouch=!1,this.m_handCard_0.setStandCardDown(),this.m_handCard_1.setStandCardDown(),this.m_mingCard.refresh();for(var n=t.diff.total.landlord.roleSettle,r=0;r<n.length;r++){var o=n[r].remainingCard;this.m_playerManager.updateRemainingNum2(n[r].pos,o.length)}this.showChunTianAni(t.diff.total.landlord.spring),this.scheduleOnce(function(){a.showResult(t)},2)},t.prototype.showResult=function(e){c.default.getInstance().isRueult=!0,this.m_recorder.showExitBtn(!0),this.m_operate.showTuoGuan(!1),this.m_recorder.showRecorder(!1),this.m_outCard.refresh();for(var t=e.diff.total.landlord.roleSettle,a=0;a<t.length;a++){var n=t[a].remainingCard;this.m_outCard.showOutCards(t[a].pos,n,!0),this.m_playerManager.setResult(t[a])}this.m_playerManager.hideRemainingNum(),base.GUI.getInstance().open(u.UIID197001001.GameResult,l.BUNDLENAME.GAME,[e])},t.prototype.setBaseScore=function(e){void 0===e&&(e=0),this.ui_baseScore.string=base.LanguageManager.getInstance().getDstStr("197001001_tips_14",l.BUNDLENAME.GAME)+3,this.ui_multiple.string=base.LanguageManager.getInstance().getDstStr("197001001_tips_03",l.BUNDLENAME.GAME)+":3"},t.prototype.showChunTianAni=function(e){if(void 0===e&&(e=!1),e){var t=new cc.Node,a=t.addComponent(base.AnimationExtend),n=base.LanguageManager.getInstance().getCurLang()==base.LanguageType.ZH?"animation_zh":"animation_en",r=new base.AniParam(base.ANIMATION_TYPE.SKELETON,"skeleton/chuntian/chuntian",l.BUNDLENAME.GAME,n);a.init(r),a.play(n,!1,base.Handler.create(this,function(){t.destroy()})),this.ui_chuntianAniNode.addChild(t)}else this.ui_chuntianAniNode.destroyAllChildren()},t.prototype.setBtnTuoGuan=function(e,t){var a=c.default.getInstance().stage,n=c.default.getInstance().isTuoGuan;if(this.m_currentUser==c.default.getInstance().wChairID)if(n)a==l.GameState197001001.play||l.GameState197001001.catch;else if(!t){var r=this.m_handCard_0.getPlayCardsArr();a==l.GameState197001001.play||l.GameState197001001.catch,this.sendOperationResp("",r)}c.default.getInstance().isTuoGuan=!n,this.m_recorder.setBtnTuoGuan(n),this.m_operate.showTuoGuan(!n)},t.prototype.layout=function(){e.prototype.layout&&e.prototype.layout.call(this),this.node&&this.m_handCard_0&&(this.m_handCard_0.setStandCardDown(),this.m_handCard_1.setStandCardDown())},t.prototype.layoutLandscape=function(){e.prototype.layoutLandscape&&e.prototype.layoutLandscape.call(this),this.node.getComponent(s.default).stateIndex=0,this.m_handCard_0&&(this.m_handCard_0.setStandCardDown(),this.m_handCard_1.setStandCardDown()),this.updateCurrentPos()},t.prototype.layoutPortrait=function(){e.prototype.layoutPortrait&&e.prototype.layoutPortrait.call(this),this.node.getComponent(s.default).stateIndex=1,this.m_handCard_0&&(this.m_handCard_0.setStandCardDown(),this.m_handCard_1.setStandCardDown()),this.updateCurrentPos()},t.prototype.updateCurrentPos=function(){if(0!=this.m_currentUser&&this.ui_clock.active){var e=c.default.getInstance().stage;if(e==l.GameState197001001.banker||e==l.GameState197001001.scramble_banker||e==l.GameState197001001.play||e==l.GameState197001001.catch)if(this.m_currentUser==c.default.getInstance().wChairID){var t=this.m_operate.getScrambleBankerClock();this.ui_clock.setPosition(d.default.convetOtherNodeSpaceAR(t,this.node))}else this.ui_clock.setPosition(this.m_outCard.getClockNodePos(this.m_currentUser))}},t.prototype.onEventClockEndCallBack=function(){var e=c.default.getInstance().stage;e!=l.GameState197001001.play&&e!=l.GameState197001001.catch||(console.log(this.m_currentUser),this.m_currentUser==c.default.getInstance().wChairID&&base.MessageManager.getInstance().dispatchEvent(i.GameEventNames197001001.Game_Msg_IS_TUOGUAN))},t.prototype.completeFunction=function(){switch(c.default.getInstance().stage){case l.GameState197001001.wait:case l.GameState197001001.ready:case l.GameState197001001.sendcard:break;case l.GameState197001001.banker:return void this.sendCallLandlordScoreOperationResp("",0);case l.GameState197001001.scramble_banker:case l.GameState197001001.play:case l.GameState197001001.catch:}this.m_operate.refresh();var e=this.m_handCard_0.getPlayCardsArr();base.MessageManager.getInstance().dispatchEvent(i.GameEventNames197001001.Game_Msg_User_Operation,e)},t.prototype.sendCallLandlordScoreOperationResp=function(e,t){var a=this;this.hideClockTime(),this.snatchLandlordPush(0,t),this.m_operate.refresh(),this.ui_clock.setPosition(this.m_outCard.getClockNodePos(1)),this.updateClockTime(this._endTimestamp);var n=base.MathUtil.getIntRandom(3,7);this.scheduleOnce(function(){a.hideClockTime(),a.m_outCard.clearAllTips(),a.canrobStateNotify("",{uid:c.default.getInstance().getUserID(0),jiaodizhu:t})},n)},t.prototype.selfPlayAHandNotify=function(e,t){if(c.default.getInstance().isCardTouch=!0,this.m_operate.showTipsNode(),this.m_operate.showYaoBuqiTips(!1),this.m_handCard_0.setStandCardDown(),this.m_handCard_1.setStandCardDown(),this.m_playerManager.updateRemainingNum(t.cardList),c.default.getInstance().playerRemainingNum=t.cardList,this.m_currentUser=0,this.m_outCard.clearOutCards(0),c.default.getInstance().isTuoGuan){var a=this.m_handCard_0.getPlayCardsArr();base.MessageManager.getInstance().dispatchEvent(i.GameEventNames197001001.Game_Msg_User_Operation,a)}else{if(t.type){c.default.getInstance().stage=l.GameState197001001.catch;var n=this.m_handCard_0.updatePromptList();this.m_handCard_1.updatePromptList(),this.m_operate.showTipsNode(!0,n.length>0),this.m_operate.showYaoBuqiTips(0==n.length)}else c.default.getInstance().stage=l.GameState197001001.play,c.default.getInstance().lastCards=[],this.m_operate.showTipsNode(!0);var r=this.m_operate.getScrambleBankerClock();this.ui_clock.setPosition(d.default.convetOtherNodeSpaceAR(r,this.node)),base.ComUtils.checkHorOrVec()?this.m_handCard_0.checkClickCards():this.m_handCard_1.checkClickCards(),this.updateClockTime(this._endTimestamp)}},t.prototype.rootPlayAHandNotify=function(e,t){var a=this,n=c.default.getInstance().getUserInfoChairID(t.userId);this.m_currentUser=n,c.default.getInstance().stage=t.type?l.GameState197001001.catch:l.GameState197001001.play,this.m_playerManager.updateRemainingNum(t.cardList),c.default.getInstance().playerRemainingNum=t.cardList,this.m_outCard.clearOutCards(n),this.ui_clock.setPosition(this.m_outCard.getClockNodePos(n)),this.updateClockTime(this._endTimestamp);var r=base.MathUtil.getIntRandom(2,6);this.scheduleOnce(function(){a.hideClockTime(),a.playCardsPush(n,t.cards),a.scheduleOnce(function(){a.nextPlayerNotify(t.userId)},.5)},r)},t.prototype.gameover_langd=function(e,t){var a=this;console.log("\u7ed3\u7b97\u63a8\u9001==>",t),c.default.getInstance().isCardTouch=!1,this.m_handCard_0.setStandCardDown(),this.m_handCard_1.setStandCardDown();for(var n=t,r=0;r<n.length;r++)this.m_playerManager.updateRemainingNum2(r,n[r].length);this.scheduleOnce(function(){c.default.getInstance().isRueult=!0,a.m_recorder.showExitBtn(!0),a.m_operate.showTuoGuan(!1),a.m_recorder.showRecorder(!1),a.m_outCard.refresh();for(var e=0;e<n.length;e++)a.m_outCard.showOutCards(e,n[e],!0);a.m_playerManager.hideRemainingNum(),base.GUI.getInstance().open(u.UIID197001001.GameResult,l.BUNDLENAME.GAME)},2)},t.prototype.sendOperationResp=function(t,a){var n=this;this.m_operate.refresh(),this.hideClockTime(),this.playCardsPush(0,a),this.scheduleOnce(function(){e.prototype.sendOperationResp.call(n,t,a)},.5)},t.prototype.nextGame=function(){var e=this;this.refresh(),this.scheduleOnce(function(){e.startGame()},2)},t.prototype.test11111111111111111=function(){base.GUI.getInstance().open(u.UIID197001001.GM,l.BUNDLENAME.GAME)},o([E(cc.SpriteAtlas)],t.prototype,"cardsPokerAtlas",void 0),o([E(cc.SpriteAtlas)],t.prototype,"headAtlas",void 0),o([E({type:cc.Label,tooltip:"\u5e95\u5206"})],t.prototype,"ui_baseScore",void 0),o([E({type:cc.Label,tooltip:"\u500d\u6570"})],t.prototype,"ui_multiple",void 0),o([E({type:cc.Node,tooltip:"\u95f9\u949f\u7236\u8282\u70b9"})],t.prototype,"ui_clock",void 0),o([E({type:cc.Node,tooltip:"\u6625\u5929\u52a8\u753b\u8282\u70b9"})],t.prototype,"ui_chuntianAniNode",void 0),o([E({type:h.default,tooltip:"\u660e\u724c\u5bf9\u8c61"})],t.prototype,"m_mingCard",void 0),o([N],t)}(p.default);a.default=b,cc._RF.pop()},{"../common/MController197001001":"MController197001001","../evnet/GameEventNames197001001":"GameEventNames197001001","../framework/Utils197001001":"Utils197001001","../global/CommonEnum197001001":"CommonEnum197001001","../global/Global197001001":"Global197001001","../global/UIConfigData197001001":"UIConfigData197001001","./MingCard197001001":"MingCard197001001","./Room197001001":"Room197001001","./card/HandCard197001001":"HandCard197001001","./card/HandCard_1_197001001":"HandCard_1_197001001","./card/OutCard197001001":"OutCard197001001","./operate/Operate197001001":"Operate197001001","./player/PlayerManager197001001":"PlayerManager197001001","./recorder/CardRecorder197001001":"CardRecorder197001001"}],RoundId197001001:[function(e,t,a){"use strict";cc._RF.push(t,"7c5balqXNJIH5SzXLWx4o7W","RoundId197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,i=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.resize()},t.prototype.layoutLandscape=function(){e.prototype.layoutLandscape.call(this)},t.prototype.layoutPortrait=function(){e.prototype.layoutPortrait.call(this)},o([i],t)}(base.BaseView));a.default=d,cc._RF.pop()},{}],SettingPopup197001001:[function(e,t,a){"use strict";cc._RF.push(t,"9f735hdeAtFpbIpxIGXxvfQ","SettingPopup197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=e("../../global/CommonEnum197001001"),i=e("./SliderItem197001001"),d=cc._decorator,l=d.ccclass,c=d.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBtn=null,t.musicSlider=null,t.effectSlider=null,t.scaleNode=null,t.scaleL=1,t.scaleP=1,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.resize()},t.prototype.start=function(){this.initView()},t.prototype.layoutLandscape=function(){cc.isValid(this.scaleNode)&&(this.scaleNode.scale=this.scaleL)},t.prototype.layoutPortrait=function(){cc.isValid(this.scaleNode)&&(this.scaleNode.scale=this.scaleP)},t.prototype.initView=function(){this.musicSlider.getComponent(i.default).initView(i.SET_TYPE197001001.MUSIC),this.effectSlider.getComponent(i.default).initView(i.SET_TYPE197001001.EFFECT)},t.prototype.onEnable=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.closeView,this)},t.prototype.onDisable=function(){this.closeBtn.off(cc.Node.EventType.TOUCH_END,this.closeView,this)},t.prototype.closeView=function(){base.SoundManager.getInstance().playEffect(s.SOUNDS_NAME.click,!1,s.BUNDLENAME.GAME),base.GUI.getInstance().close(this)},o([c(cc.Node)],t.prototype,"closeBtn",void 0),o([c(cc.Node)],t.prototype,"musicSlider",void 0),o([c(cc.Node)],t.prototype,"effectSlider",void 0),o([c({type:cc.Node,tooltip:"\u6574\u4f53\u7f29\u653e\u8282\u70b9\uff0c\u4e0d\u80fd\u8bbe\u4e3a\u9884\u5236\u6839\u8282\u70b9"})],t.prototype,"scaleNode",void 0),o([c({type:cc.Float,tooltip:"\u6a2a\u7248\u7f29\u653e\u503c"})],t.prototype,"scaleL",void 0),o([c({type:cc.Float,tooltip:"\u7ad6\u7248\u7f29\u653e\u503c"})],t.prototype,"scaleP",void 0),o([l],t)}(base.PopupModel);a.default=u,cc._RF.pop()},{"../../global/CommonEnum197001001":"CommonEnum197001001","./SliderItem197001001":"SliderItem197001001"}],SliderItem197001001:[function(e,t,a){"use strict";cc._RF.push(t,"244c0ti8fFP551L+Kup/D9N","SliderItem197001001");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(s=(o<3?r(s):o>3?r(t,a,s):r(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.SET_TYPE197001001=void 0;var s,i=cc._decorator,d=i.ccclass,l=i.property;(function(e){e.MUSIC="MUSIC",e.EFFECT="EFFECT"})(s=a.SET_TYPE197001001||(a.SET_TYPE197001001={}));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t.slider=null,t.onBtn=null,t.offBtn=null,t.volume=0,t.sliderMaxW=0,t}return r(t,e),t.prototype.onLoad=function(){this.slider.getComponent(cc.Sprite).type=cc.Sprite.Type.SLICED,this.slider.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM},t.prototype.initView=function(e){this.type=e,this.sliderMaxW=this.slider.width,this.type===s.MUSIC?this.volume=base.SoundManager.getInstance().getMusicVolume():this.volume=base.SoundManager.getInstance().getEffectVolume(),this.setVolume(this.volume)},t.prototype.onEnable=function(){this.node.on("slide",this.onSlider,this),this.onBtn&&this.onBtn.on(cc.Node.EventType.TOUCH_END,this.onBtnClick,this),this.offBtn&&this.offBtn.on(cc.Node.EventType.TOUCH_END,this.offBtnClick,this)},t.prototype.onBtnClick=function(){this.setVolume(0)},t.prototype.offBtnClick=function(){this.volume=0==this.volume?.5:this.volume,this.setVolume(this.volume)},t.prototype.setVolume=function(e){this.type===s.MUSIC?base.SoundManager.getInstance().setMusicVolume(e):base.SoundManager.getInstance().setEffectVolume(e),this.upView(),this.node.getComponent(cc.Slider).progress=e,this.slider.width=this.sliderMaxW*e+.001},t.prototype.onDisable=function(){this.node.off("slide",this.onSlider,this),this.onBtn&&this.onBtn.off(cc.Node.EventType.TOUCH_END,this.onBtnClick,this),this.offBtn&&this.offBtn.off(cc.Node.EventType.TOUCH_END,this.offBtnClick,this)},t.prototype.onSlider=function(e){this.setVolume(e.progress),this.updata()},t.prototype.updata=function(){this.type===s.MUSIC?this.volume=base.SoundManager.getInstance().getMusicVolume():this.volume=base.SoundManager.getInstance().getEffectVolume(),0==this.volume&&(this.volume=.5)},t.prototype.upView=function(){this.offBtn&&(this.offBtn.active=!1,this.onBtn.active=!0,this.type===s.MUSIC?0===base.SoundManager.getInstance().getMusicVolume()&&(this.offBtn.active=!0,this.onBtn.active=!1):0===base.SoundManager.getInstance().getEffectVolume()&&(this.offBtn.active=!0,this.onBtn.active=!1))},o([l(cc.Node)],t.prototype,"slider",void 0),o([l(cc.Node)],t.prototype,"onBtn",void 0),o([l(cc.Node)],t.prototype,"offBtn",void 0),o([d],t)}(cc.Component);a.default=c,cc._RF.pop()},{}],UIConfigData197001001:[function(e,t,a){"use strict";var n;cc._RF.push(t,"8b13bX+HehP14ROJUq8cc18","UIConfigData197001001"),Object.defineProperty(a,"__esModule",{value:!0}),a.UICF197001001=a.UIID197001001=void 0;var r,o=e("./CommonEnum197001001");(function(e){e[e.CardTypeEffects=1e3]="CardTypeEffects",e[e.GameRoomMenu=1001]="GameRoomMenu",e[e.Loading=1002]="Loading",e[e.GameResult=1003]="GameResult",e[e.UI_HELP=1004]="UI_HELP",e[e.UI_ROOM=1005]="UI_ROOM",e[e.GM=1006]="GM",e[e.UI_SETTING=1007]="UI_SETTING",e[e.UI_Hall=1008]="UI_Hall"})(r=a.UIID197001001||(a.UIID197001001={})),a.UICF197001001=((n={})[r.UI_Hall]={layer:base.LayerType.UI,prefab:"prefabs/hall/hall",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!0},n[r.UI_HELP]={layer:base.LayerType.PopUp,prefab:"prefabs/popup/common/help",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!1},n[r.UI_ROOM]={layer:base.LayerType.UI,prefab:"prefabs/room/room",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!0},n[r.GM]={layer:base.LayerType.PopUp,prefab:"prefabs/gm/gm",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!1},n[r.UI_SETTING]={layer:base.LayerType.PopUp,prefab:"prefabs/popup/common/setting",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!1},n[r.CardTypeEffects]={layer:base.LayerType.PopUp,prefab:"prefabs/popup/room/cardTypeEffectsPopup",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!1},n[r.GameRoomMenu]={layer:base.LayerType.PopUp,prefab:"prefabs/popup/room/roomMenu",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!1},n[r.Loading]={layer:base.LayerType.PopUp,prefab:"prefabs/popup/loading/loading",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!1},n[r.GameResult]={layer:base.LayerType.PopUp,prefab:"prefabs/popup/room/gameResult",bundle:o.BUNDLENAME.GAME,isDestroy:!0,isTouch:!1},n),cc._RF.pop()},{"./CommonEnum197001001":"CommonEnum197001001"}],Utils197001001:[function(e,t,a){"use strict";cc._RF.push(t,"0810eb09ChOdrUXcgtXEc7k","Utils197001001"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(){}return e.clone=function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var a in e.constructor===Array&&(t=[]),e)e.hasOwnProperty(a)&&(t[a]=this.clone(e[a]));return t},e.convetOtherNodeSpaceAR=function(e,t,a){if(void 0===a&&(a=new cc.Vec2(0,0)),!e||!t)return null;var n=this.localConvertWorldPointAR(e,a);return this.worldConvertLocalPointAR(t,n)},e.localConvertWorldPointAR=function(e,t){return e?e.convertToWorldSpaceAR(t):null},e.worldConvertLocalPointAR=function(e,t){return e?e.convertToNodeSpaceAR(t):null},e.fisherYatesShuffle=function(e){for(var t=e.length;t;){var a=Math.floor(Math.random()*t--),n=e[t];e[t]=e[a],e[a]=n}return e},e}();a.default=n,cc._RF.pop()},{}],carder:[function(e,t){"use strict";cc._RF.push(t,"88d041m3LVPdqFsLu/b9zmX","carder");var n=function(e,t,a){var n={index:-1};return e&&(n.value=e,n.val=e+2),t&&(n.shape=t),null!=a&&(n.king=a,n.value=a,n.val=a+2,n.shape=0),n},r={A:12,2:13,3:1,4:2,5:3,6:4,7:5,8:6,9:7,10:8,J:9,Q:10,K:11},o={S:1,H:2,C:3,D:4},s={kx:14,Kd:15};t.exports=function(){var e={card_list:[]},t=function(){for(var t=e.card_list.length-1;t>=0;t--){var a=Math.floor(Math.random()*(t+1)),n=e.card_list[a];e.card_list[a]=e.card_list[t],e.card_list[t]=n}return e.card_list},i=function(){for(var a in e.card_list=[],r)for(var i in o){var d=n(r[a],o[i],void 0);d.index=e.card_list.length,e.card_list.push(d)}for(var l in s){var c=n(void 0,void 0,s[l]);c.index=e.card_list.length,e.card_list.push(c)}t()};e.splitThreeCards=function(){i();for(var t={},a=0;a<17;a++)for(var n=0;n<3;n++)t.hasOwnProperty(n)?t[n].push(e.card_list.pop()):t[n]=[e.card_list.pop()];return[t[0],t[1],t[2],e.card_list]};var d=function(e){return 1===e.length},l=function(e){return 2==e.length&&null!=e[0].card_data.value&&e[0].card_data.value==e[1].card_data.value},c=function(e){return 3==e.length&&null!=e[0].card_data.value&&null!=e[1].card_data.value&&e[0].card_data.value==e[1].card_data.value&&e[0].card_data.value==e[2].card_data.value&&e[1].card_data.value==e[2].card_data.value},u=function(e){return 4==e.length&&null!=e[1].card_data.value&&null!=e[2].card_data.value&&(e[0].card_data.value==e[1].card_data.value&&e[1].card_data.value==e[2].card_data.value||e[1].card_data.value==e[2].card_data.value&&e[2].card_data.value==e[3].card_data.value)},h=function(e){if(5!=e.length)return!1;if(e[0].card_data.value==e[1].card_data.value&&e[1].card_data.value==e[2].card_data.value){if(e[3].card_data.value==e[4].card_data.value)return!0}else if(e[2].card_data.value==e[3].card_data.value&&e[3].card_data.value==e[4].card_data.value&&e[0].card_data.value==e[1].card_data.value)return!0;return!1},p=function(e){if(4!=e.length)return!1;for(var t={},a=0;a<e.length;a++)t.hasOwnProperty(e[a].card_data.value)?t[e[a].card_data.value]++:t[e[a].card_data.value]=1;return 1==Object.keys(t).length},_=function(e){return 2==e.length&&null!=e[0].card_data.king&&null!=e[1].card_data.king},f=function(e){if(6!=e.length)return!1;for(var t={},a=0;a<e.length;a++)t.hasOwnProperty(e[a].card_data.value)?t[e[a].card_data.value]++:t[e[a].card_data.value]=1;var n=Object.keys(t);if(console.log("IsPlan keys"+n),2==n.length){for(var r in t)if(3!=t[r])return!1;var o=Number(n[0]),s=Number(n[1]);return 1==Math.abs(o-s)}return!1},g=function(e){if(8!=e.length)return!1;for(var t={},a=0;a<e.length;a++)t.hasOwnProperty(e[a].card_data.value)?t[e[a].card_data.value]++:t[e[a].card_data.value]=1;var n=Object.keys(t);if(console.log("IsPlan keys"+n),4!=n.length)return!1;var r=[],o=0;for(var a in t)3==t[a]?r.push(a):1==t[a]&&o++;if(2!=r.length||2!=o)return!1;var s=Number(r[0]),i=Number(r[1]);return 1==Math.abs(s-i)},v=function(e){if(10!=e.length)return!1;for(var t={},a=0;a<e.length;a++)t.hasOwnProperty(e[a].card_data.value)?t[e[a].card_data.value]++:t[e[a].card_data.value]=1;if(4!=Object.keys(t).length)return!1;var n=[],r=0;for(var a in t)3==t[a]?n.push(a):2==t[a]&&r++;if(2!=n.length||2!=r)return!1;var o=Number(n[0]),s=Number(n[1]);return 1==Math.abs(o-s)},m=function(e){if(e.length<5||e.length>12)return!1;for(var t=e,a=0;a<t.length;a++)if(13==t[a].card_data.value||14==t[a].card_data.value||15==t[a].card_data.value)return!1;for(t.sort(function(e,t){return Number(e.card_data.value)-Number(t.card_data.value)}),a=0;a<t.length&&a+1!=t.length;a++){var n=Number(t[a].card_data.value),r=Number(t[a+1].card_data.value);if(1!=Math.abs(n-r))return!1}return!0},C=function(e){if(e.length<6||e.length>24)return!1;for(var t=0;t<e.length;t++)if(14==e[t].card_data.value||15==e[t].card_data.value||13==e[t].card_data.value)return!1;var a={};for(t=0;t<e.length;t++)a.hasOwnProperty(e[t].card_data.value)?a[e[t].card_data.value]++:a[e[t].card_data.value]=1;for(var n in a)if(2!=a[n])return!1;var r=Object.keys(a);if(r.length<3)return!1;for(r.sort(function(e,t){return Number(e)-Number(t)}),t=0;t<r.length&&t+1!=r.length;t++){var o=Number(r[t]),s=Number(r[t+1]);if(1!=Math.abs(o-s))return!1}return!0},y={one:{name:"One",value:1},double:{name:"Double",value:1},three:{name:"Three",value:1},boom:{name:"Boom",value:2},threeWithOne:{name:"ThreeWithOne",value:1},threeWithTwo:{name:"ThreeWithTwo",value:1},plane:{name:"Plane",value:1},planeWithOne:{name:"PlaneWithOne",value:1},planeWithTwo:{name:"PlaneWithTwo",value:1},scroll:{name:"Scroll",value:1},doubleScroll:{name:"DoubleScroll",value:1},kingboom:{name:"kingboom",value:3}},N=function(e,t){return console.log("compareOne"),!((null==e[0].card_data.value?e[0].card_data.king:e[0].card_data.value)>=(null==t[0].card_data.value?t[0].card_data.king:t[0].card_data.value))},E=function(e,t){return console.log("compareDouble"),N(e,t)},b=function(e,t){return console.log("compareThree"),N(e,t)},I=function(e,t){console.log("compareBoom");var a=!1;return 4==e.length&&4==t.length&&(a=N(e,t)),a},S=function(e,t){return 2==t.length},A=function(e,t){for(var a=[],n=[],r={},o=0;o<e.length;o++)r.hasOwnProperty(e.card_data.value)?a.push(e):r[e.card_data.value]=1;for(o=0;o<t.length;o++)r.hasOwnProperty(t.card_data.value)?n.push(t):r[t.card_data.value]=1;return N(e,t)},R=function(e,t){for(var a={},n={},r=0;r<e.length;r++)a.hasOwnProperty(e[r].card_data.value)?a[e[r].card_data.value].push(e[r]):a[e[r].card_data.value]=[e[r]];for(r=0;r<t.length;r++)n.hasOwnProperty(t[r].card_data.value)?n[t[r].card_data.value].push(t[r]):n[t[r].card_data.value]=[t[r]];var o=[];for(var r in a)3===a[r].length&&(o=a[r]);var s=[];for(var r in n)3===n[r].length&&(s=n[r]);return N(o,s)},O=function(e,t){for(var a={},n=0;n<e.length;n++)a.hasOwnProperty(e[n].card_data.value)?a[e[n].card_data.value].push(e[n]):a[e[n].card_data.value]=[e[n]];var r=[],o=16;for(var n in a)Number(n)<o&&(o=Number(n),r=a[n]);var s={};for(n=0;n<t.length;n++)s.hasOwnProperty(t[n].card_data.value)?s[t[n].card_data.value].push(t[n]):s[t[n].card_data.value]=[t[n]];o=16;var i=[];for(var n in s)Number(n)<o&&(o=Number(n),i=s[n]);return b(r,i)},P=function(e,t){for(var a={},n=[],r=0;r<e.length;r++)a.hasOwnProperty(e[r].card_data.value)?n.push(e[r]):a[e[r].card_data.value]=[e[r]];var o={},s=[];for(r=0;r<t.length;r++)o.hasOwnProperty(t[r].card_data.value)?s.push(t[r]):o[t[r].card_data.value]=[t[r]];return O(n,s)},D=function(e,t){for(var a={},n=0;n<e.length;n++)a.hasOwnProperty(e[n].card_data.value)?a[e[n].card_data.value].push(e[n]):a[e[n].card_data.value]=[e[n]];var r={};for(n=0;n<t.length;n++)r.hasOwnProperty(t[n].card_data.value)?r[t[n].card_data.value].push(t[n]):r[t[n].card_data.value]=[t[n]];var o=[];for(var n in a)if(3===a[n].length)for(var s=0;s<a[n].length;s++)o.push(a[n][s]);console.log("list a = "+JSON.stringify(o));var i=[];for(var n in r)if(3===r[n].length)for(s=0;s<r[n].length;s++)i.push(r[n][s]);return O(o,i)},T=function(e,t){if(console.log("compareScroll"),e.length!=t.length)return!1;for(var a=100,n=0;n<e.length;n++)e[n].card_data.value<a&&(a=e[n].card_data.value);for(var r=100,o=0;o<t.length;o++)t[o].card_data.value<r&&(r=t[o].card_data.value);return console.log("min a = "+a),console.log("min b = "+r),a<=r},M=function(e,t){for(var n={},r=[],o=0;o<e.length;o++)n.hasOwnProperty(e[o].card_data.value)||(n[e[o].card_data.value]=!0,r.push(a[o]));var s={},i=[];for(o=0;o<t.length;o++)s.hasOwnProperty(t[o].card_data.value)||(s[t[o].card_data.value]=!0,i.push(t[o]));return console.log("list a = "+JSON.stringify(r)),console.log("list b = "+JSON.stringify(i)),T(r,i)},L=function(e,t,a){var n=!1;switch(a.name){case y.one.name:n=N(e,t);break;case y.double.name:n=E(e,t);break;case y.three.name:n=b(e,t);break;case y.boom.name:n=I(e,t);break;case y.kingboom.name:n=S(0,t);break;case y.planeWithOne.name:n=A(e,t);break;case y.planeWithTwo.name:n=R(e,t);break;case y.plane.name:n=O(e,t);break;case y.planeWithOne.name:n=P(e,t);break;case y.planeWithTwo.name:n=D(e,t);break;case y.scroll.name:n=T(e,t);break;case y.doubleScroll.name:n=M(e,t);break;default:console.log("no found card value!"),n=!1}return n};e.compareWithCard=function(e,t){return console.log("last_cards"+JSON.stringify(e)),console.log("current_cards"+JSON.stringify(t)),card_last_value=G(e),card_current_value=G(t),e.value<t.value?(console.log("compareWithCard less"),!0):e.value==t.value&&card_last_value.name==card_current_value.name&&L(e,t,card_last_value)},e.IsCanPushs=function(e){return d(e)?(console.log("isOneCard sucess"),y.one):l(e)?(console.log("IsDoubleCard sucess"),y.double):c(e)?(console.log("Isthree sucess"),y.three):u(e)?(console.log("IsThreeAndOne sucess"),y.threeWithOne):h(e)?(console.log("IsThreeAndTwo sucess"),y.threeWithTwo):p(e)?(console.log("IsBoom sucess"),y.boom):_(e)?(console.log("IsKingBoom sucess"),y.kingboom):f(e)?(console.log("IsPlan sucess"),y.plane):g(e)?(console.log("IsPlanWithSing sucess"),y.planeWithOne):v(e)?(console.log("IsPlanWithDouble sucess"),y.planeWithTwo):m(e)?(console.log("IsShunzi sucess"),y.scroll):C(e)?(console.log("IsLianDui sucess"),y.DoubleScroll):void 0};var G=e.IsCanPushs;return e}(),cc._RF.pop()},{}],ddzConstants:[function(e,t){"use strict";cc._RF.push(t,"565aa+R5elEbb57MI8SE1wE","ddzConstants"),t.exports={gameState:{INVALID:-1,WAITREADY:1,GAMESTART:2,PUSHCARD:3,ROBSTATE:4,SHOWBOTTOMCARD:5,PLAYING:6,GAMEEND:7},_pokersFrame:null,_chipsFrame:null},cc._RF.pop()},{}],ddzData:[function(e,t){"use strict";cc._RF.push(t,"b6269ep6GBFk6+3TD4AFSOM","ddzData"),t.exports={gameState:-1},cc._RF.pop()},{}],ddzServers:[function(e,t,a){"use strict";cc._RF.push(t,"3d22cCOPZhImIVw0MWW7QY+","ddzServers"),a.__esModule=!0,a.default=void 0;var n,r=(n=e("./player.js"))&&n.__esModule?n:{default:n},o=e("gameRule"),s={};s.playerData=(0,r.default)();var i=e("ddzConstants"),d=e("ddzData"),l=e("carder"),c=e("AILogic"),u={playersData:{},landlordIndex:0,landlordNum:0,robplayer:[],landlordId:"",roundWinId:"",winCards:null,addEventListener:function(){base.MessageManager.getInstance().addEventListener("Game_Msg_gameStateHandler",this.gameStateHandler,this),window.G=window.G||{gameRule:new o}},removeEventListener:function(){base.MessageManager.getInstance().removeEventListener("Game_Msg_gameStateHandler",this.gameStateHandler,this)},getCardIndex:function(e){return 15==e.king?94:14==e.king?95:1==e.shape?e.value+64:2==e.shape?e.value+48:3==e.shape?e.value+32:4==e.shape?e.value+16:void 0},geUserList:function(){return s.playerData.rootList},getCardList:function(){for(var e=s.playerData.rootList,t=this.playersData[e[0].userId].cardList,a=[],n=0;n<t.length;n++)a[n]=this.getCardIndex(t[n]);return a},gameStateHandler:function(e,t){var a,n=this,r=i.gameState;switch(t){case r.INVALID:break;case r.WAITREADY:this.roundWinId="",this.winCards=null;break;case r.GAMESTART:this.playersData=this.initPlayerList(),console.log("==>",this.playersData),setTimeout(function(){n.setGameState(r.PUSHCARD)},0);break;case r.PUSHCARD:window.$socket.emit("pushcard_notify",this.playersData[u].cardList),setTimeout(function(){n.setGameState(r.ROBSTATE)},3);break;case r.ROBSTATE:this.landlordIndex=base.MathUtil.getIntRandom(0,2),this.playersData.players[this.landlordIndex],this.landlordId="",this.robplayer=[],this.landlordNum=0,base.MessageManager.getInstance().dispatchEvent("Game_Msg_scrambleBanker",0);break;case r.SHOWBOTTOMCARD:for(var o=this.playersData[this.landlordId],d=this.playersData.cards,l=[],c=0;c<d.length;c++)l[c]=this.getCardIndex(d[c]);o.isLandlord=!0,o.cardList=o.cardList.concat(d),base.MessageManager.getInstance().dispatchEvent("change_master_notify",{masterId:this.landlordId,cards:l}),setTimeout(function(){n.setGameState(r.PLAYING)},0);break;case r.PLAYING:this.playCard(this.playersData[this.landlordId]);break;case r.GAMEEND:var u=s.playerData.userId,h=this.playersData[this.roundWinId],p=h.nextPlayer,_=p.nextPlayer,f=this.roundWinId===u||h.isLandlord===this.playersData[u].isLandlord;window.$socket.emit("gameEndNotify",{isWin:f,otherPlayerCards:(a={},a[p.userId]=p.cardList,a[_.userId]=_.cardList,a)})}},setGameState:function(e){d.gameState=e},initPlayerList:function(){var e,t=s.playerData.rootList,a=t[0].userId,n=t[1].userId,r=t[2].userId,o=l.splitThreeCards();console.log("\u65b0\u724c",o);var i=((e={players:[a,n,r],cards:o[3]})[a]={isLandlord:!1,userId:a,cardList:o[0]},e[n]={isLandlord:!1,userId:n,cardList:o[1]},e[r]={isLandlord:!1,userId:r,cardList:o[2]},e);return i[a].nextPlayer=i[n],i[n].nextPlayer=i[r],i[r].nextPlayer=i[a],i},canrobStateNotify:function(e){this.landlordId=e,this.setGameState(i.gameState.SHOWBOTTOMCARD)},nextPlayerNotify:function(e){this.playCard(this.playersData[e].nextPlayer)},playCard:function(e){if(this.roundWinId&&!this.playersData[this.roundWinId].cardList.length){this.setGameState(i.gameState.GAMEEND);var t=[];t[0]=this.playersData[d].cardList,t[1]=this.playersData[l].cardList,t[2]=this.playersData[u].cardList;for(var a=[],n=0;n<t.length;n++){a[n]=[];for(var r=0;r<t[n].length;r++)a[n][r]=this.getCardIndex(t[n][r])}base.MessageManager.getInstance().dispatchEvent("gameover_langd",a)}else{var o=s.playerData.rootList,d=o[0].userId,l=o[1].userId,u=o[2].userId,h=new c(e),p=[];if(p[0]=this.playersData[d].cardList.length,p[1]=this.playersData[l].cardList.length,p[2]=this.playersData[u].cardList.length,e.userId===o[0].userId){var _=this.roundWinId&&this.roundWinId!==e.userId?this.winCards:null;console.log(_?"\u73a9\u5bb6\u8ddf\u724c":"\u73a9\u5bb6\u51fa\u724c");var f=h.prompt(_);base.MessageManager.getInstance().dispatchEvent("selfPlayAHandNotify",{type:_,cardList:p,promptList:f})}else{var g=null,v=!1;if(this.roundWinId&&this.roundWinId!==e.userId){var m=this.playersData[this.roundWinId],C=o[0].userId===this.landlordId;g=h.follow(this.winCards,C,m.cardList.length),console.log(e.userId,"AI\u8ddf\u724c",g),v=!0}else g=h.play(this.playersData[this.landlordId].cardList.length),console.log(e.userId,"AI\u51fa\u724c",g),v=!1;for(var y=g?g.cardList:[],N=[],E=0;E<y.length;E++)N[E]=this.getCardIndex(y[E]);if(base.MessageManager.getInstance().dispatchEvent("rootPlayAHandNotify",{type:v,cardList:p,userId:e.userId,cards:N}),g){for(var b=0;b<g.cardList.length;b++)for(var I=0;I<e.cardList.length;I++)if(e.cardList[I].val===g.cardList[b].val&&e.cardList[I].shape===g.cardList[b].shape){e.cardList.splice(I,1);break}this.roundWinId=e.userId,delete g.cardList,this.winCards=g}}}},calculateSuit:function(e){return 0==e?0:Math.floor(e/16)},calculatePoints:function(e){return 0==e?5:e%16},getCardItems:function(e){if(94==e)return{index:0,value:14,val:16,king:14,shape:0};if(95==e)return{index:0,value:15,val:17,king:15,shape:0};var t=0,a=this.calculateSuit(e);1==a&&(t=4),2==a&&(t=3),3==a&&(t=2),4==a&&(t=1);var n=this.calculatePoints(e);return{index:0,value:n,val:n+2,shape:t}},setarr:function(e){for(var t=e.userId,a=e._cards,n=[],r=0;r<a.length;r++)n[r]=this.getCardItems(a[r]);this.playAHandNotify({userId:t,cards:n})},playAHandNotify:function(e,t){var a=e.userId,n=e.cards;console.log(n);var r=this.getReadyCardsKind(n);if(console.log("\u51fa\u724c\u724c\u578b=>",r),r){this.winCards=r,this.roundWinId=a,t&&t({state:1});for(var o=this.playersData[a].cardList,s=0;s<n.length;s++)for(var i=0;i<o.length;i++)n[s].val===o[i].val&&n[s].shape===o[i].shape&&o.splice(i,1);this.nextPlayerNotify(a)}else t&&t({state:0})},getReadyCardsKind:function(e){if(void 0===e&&(e=[]),!e.length)return null;var t,a,n=s.playerData.rootList,r=G.gameRule.typeJudge(e);return r?this.roundWinId&&this.roundWinId!==n[0].userId?(t=this.winCards,(a=r).cardKind===G.gameRule.KING_BOMB||a.cardKind===G.gameRule.BOMB&&t.cardKind!=G.gameRule.BOMB||a.cardKind===t.cardKind&&a.size===t.size&&a.val>t.val?r:null):r:null}};a.default=u,t.exports=a.default,cc._RF.pop()},{"./player.js":"player",AILogic:"AILogic",carder:"carder",ddzConstants:"ddzConstants",ddzData:"ddzData",gameRule:"gameRule"}],gameRule:[function(e,t){"use strict";cc._RF.push(t,"f4073jWKFZA26/5I+fAE6h1","gameRule");var a=function(){};a.prototype.typeJudge=function(e){var t=e.length;switch(e.sort(function(e,t){return t.val-e.val}),t){case 1:return{cardKind:this.ONE,val:e[0].val,size:t};case 2:return this.isPairs(e)?{cardKind:this.PAIRS,val:e[0].val,size:t}:this.isKingBomb(e)?{cardKind:this.KING_BOMB,val:e[0].val,size:t}:null;case 3:return this.isThree(e)?{cardKind:this.THREE,val:e[0].val,size:t}:null;case 4:return this.isThreeWithOne(e)?{cardKind:this.THREE_WITH_ONE,val:this.getMaxVal(e,3),size:t}:this.isBomb(e)?{cardKind:this.BOMB,val:e[0].val,size:t}:null;default:return this.isProgression(e)?{cardKind:this.PROGRESSION,val:e[0].val,size:t}:this.isProgressionPairs(e)?{cardKind:this.PROGRESSION_PAIRS,val:e[0].val,size:t}:this.isThreeWithPairs(e)?{cardKind:this.THREE_WITH_PAIRS,val:this.getMaxVal(e,3),size:t}:this.isPlane(e)?{cardKind:this.PLANE,val:this.getMaxVal(e,3),size:t}:this.isPlaneWithOne(e)?{cardKind:this.PLANE_WITH_ONE,val:this.getMaxVal(e,3),size:t}:this.isPlaneWithPairs(e)?{cardKind:this.PLANE_WITH_PAIRS,val:this.getMaxVal(e,3),size:t}:this.isFourWithTwo(e)?{cardKind:this.FOUR_WITH_TWO,val:this.getMaxVal(e,4),size:t}:this.isFourWithPairs(e)?{cardKind:this.FOUR_WITH_TWO_PAIRS,val:this.getMaxVal(e,4),size:t}:null}},a.prototype.isPairs=function(e){return 2==e.length&&e[0].val===e[1].val},a.prototype.isThree=function(e){return 3==e.length&&e[0].val===e[1].val&&e[1].val===e[2].val},a.prototype.isThreeWithOne=function(e){if(4!=e.length)return!1;var t=this.valCount(e);return 2===t.length&&(3===t[0].count||3===t[1].count)},a.prototype.isThreeWithPairs=function(e){if(5!=e.length)return!1;var t=this.valCount(e);return 2===t.length&&(3===t[0].count||3===t[1].count)},a.prototype.isProgression=function(e){if(e.length<5||e.length>12)return!1;for(var t=e,a=0;a<t.length;a++)if(13==t[a].value||14==t[a].value||15==t[a].value)return!1;for(a=0;a<t.length&&a!==t.length-1;a++){var n=Number(t[a].value),r=Number(t[a+1].value);if(1!=Math.abs(n-r))return!1}return!0},a.prototype.isProgressionPairs=function(e){if(e.length<6||e.length>20||e.length%2)return!1;for(var t=0;t<e.length;t++)if(14==e[t].value||15==e[t].value||13==e[t].value)return!1;var a={};for(t=0;t<e.length;t++)a.hasOwnProperty(e[t].value)?a[e[t].value]++:a[e[t].value]=1;for(var n in a)if(2!=a[n])return!1;var r=Object.keys(a);if(r.length<3)return!1;for(t=0;t<r.length&&t!==r.length-1;t++){var o=Number(r[t]),s=Number(r[t+1]);if(1!=Math.abs(o-s))return!1}return!0},a.prototype.isPlane=function(e){if(e.length<6||e.length%3!=0||15===e[0].val)return!1;for(var t=0;t<e.length;t+=3)if(t!=e.length-3&&(e[t].val!=e[t+1].val||e[t].val!=e[t+2].val||e[t].val-1!=e[t+3].val))return!1;return!0},a.prototype.isPlaneWithOne=function(e){if(e.length<8||e.length%4!=0)return!1;for(var t=this.valCount(e),a=[],n=e.length/4,r=0;r<t.length;r++)3==t[r].count&&a.push(t[r]);if(a.length!=n||15===a[0].val)return!1;for(var o=0;o<a.length;o++)if(o!=a.length-1&&a[o].val-1!=a[o+1].val)return!1;return!0},a.prototype.isPlaneWithPairs=function(e){if(e.length<10||e.length%5!=0)return!1;for(var t=this.valCount(e),a=[],n=[],r=e.length/5,o=0;o<t.length;o++)if(3==t[o].count)a.push(t[o]);else{if(2!=t[o].count)return!1;n.push(t[o])}if(a.length!=r||n.length!=r||15===a[0].val)return!1;for(var s=0;s<a.length;s++)if(s!=a.length-1&&a[s].val-1!=a[s+1].val)return!1;return!0},a.prototype.isFourWithTwo=function(e){var t=this.valCount(e);if(6!=e.length||t.length>3)return!1;for(var a=0;a<t.length;a++)if(4===t[a].count)return!0;return!1},a.prototype.isFourWithPairs=function(e){if(8!=e.length)return!1;var t=this.valCount(e);if(3!=t.length)return!1;for(var a=0;a<t.length;a++)if(4!=t[a].count&&2!=t[a].count)return!1;return!0},a.prototype.isBomb=function(e){return 4===e.length&&e[0].val===e[1].val&&e[0].val===e[2].val&&e[0].val===e[3].val},a.prototype.isKingBomb=function(e){return 2===e.length&&"0"==e[0].shape&&"0"==e[1].shape},a.prototype.random=function(e,t){var a=(t=null==t?1:t)-(e=null==e?0:e)+1;return Math.floor(Math.random()*a+e)},a.prototype.valCount=function(e){for(var t=[],a=function(e,t){for(var a=0;a<e.length;a++)if(e[a].val==t)return void e[a].count++;e.push({val:t,count:1})},n=0;n<e.length;n++)a(t,e[n].val);return t},a.prototype.getMaxVal=function(e,t){for(var a=this.valCount(e),n=0,r=0;r<a.length;r++)a[r].count===t&&a[r].val>n&&(n=a[r].val);return n},a.prototype.cardSort=function(e,t){var a=parseInt(e.val),n=parseInt(t.val);return a===n?e.shape>t.shape?1:-1:a>n?-1:1},a.prototype.ONE=1,a.prototype.PAIRS=2,a.prototype.THREE=3,a.prototype.THREE_WITH_ONE=4,a.prototype.THREE_WITH_PAIRS=5,a.prototype.PROGRESSION=6,a.prototype.PROGRESSION_PAIRS=7,a.prototype.PLANE=8,a.prototype.PLANE_WITH_ONE=9,a.prototype.PLANE_WITH_PAIRS=10,a.prototype.FOUR_WITH_TWO=11,a.prototype.FOUR_WITH_TWO_PAIRS=12,a.prototype.BOMB=13,a.prototype.KING_BOMB=14,a.prototype.MSG_NO_SELECT="\u8bf7\u9009\u62e9\u8981\u51fa\u7684\u724c",a.prototype.MSG_ERROR_TYPE="\u60a8\u9009\u62e9\u7684\u724c\u4e0d\u7b26\u5408\u6e38\u620f\u89c4\u5219",a.prototype.MSG_NO_ROROB_RESTART="\u6240\u6709\u73a9\u5bb6\u5747\u672a\u53eb\u5206\uff0c\u91cd\u65b0\u53d1\u724c",a.prototype.DESK_STATUS_READY=1,a.prototype.DESK_STATUS_ROB=2,a.prototype.DESK_STATUS_PLAY=3,t.exports=a,cc._RF.pop()},{}],player:[function(e,t,a){"use strict";cc._RF.push(t,"f2022nXCBNKLpitl1HBFyWA","player"),a.__esModule=!0,a.default=void 0;var n=function(e){for(var t="",a=0;a<e;a++)t+=Math.floor(10*Math.random());return t};a.default=function(){var e=[n(5),n(5),n(5)],t=e[0],a=e[1],r=e[2];return{rootList:[{pos:0,userId:t,userName:"landlord_"+t,avatarUrl:2,socre:2e4},{pos:1,userId:a,userName:"landlord_"+a,avatarUrl:5,socre:26524},{pos:2,userId:r,userName:"landlord_"+r,avatarUrl:7,socre:1365}],masterUserId:""}},t.exports=a.default,cc._RF.pop()},{}]},{},["Main197001001","AILogic","carder","ddzConstants","ddzData","ddzServers","gameRule","player","Clock197001001","CustomButton197001001","CustomLabelShader197001001","LanguageLabel197001001","LanguageSprite197001001","MController197001001","MControllerView197001001","NodeUiConfig197001001","PreloadAniMsg197001001","RandNumber197001001","Loger197001001","GameEventNames197001001","AiLogic197001001","CardUtils197001001","DdzCard","DdzCardCfg","DdzCardItem","DdzCardParseInfo","DdzCardPaser","DdzCardUtils","DdzCards","DdzConst","DdzMsgType","GameRule197001001","Utils197001001","CMD197001001","CommonEnum197001001","Global197001001","UIConfigData197001001","GM197001001","Hall197001001","Menu197001001","MenuItem197001001","PlayerHead197001001","HelpPopup197001001","SettingPopup197001001","SliderItem197001001","GameResult197001001","LoadingPopup197001001","CardTypeEffects197001001","MainLayout197001001","MingCard197001001","Room197001001","RoomGui197001001","RoundId197001001","HandCard197001001","HandCard_1_197001001","OutCard197001001","Operate197001001","PlayerItem197001001","PlayerManager197001001","CardRecorder197001001"]);